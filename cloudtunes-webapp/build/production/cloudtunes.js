!function(){"use strict";var t="undefined"!=typeof window?window:global;if("function"!=typeof t.require){var e={},n={},r=function(t,e){return{}.hasOwnProperty.call(t,e)},i=function(t,e){var n,r,i=[];n=/^\.\.?(\/|$)/.test(e)?[t,e].join("/").split("/"):e.split("/");for(var o=0,s=n.length;s>o;o++)r=n[o],".."===r?i.pop():"."!==r&&""!==r&&i.push(r);return i.join("/")},o=function(t){return t.split("/").slice(0,-1).join("/")},s=function(e){return function(n){var r=o(e),s=i(r,n);return t.require(s)}},a=function(t,e){var r={id:t,exports:{}};e(r.exports,s(t),r);var i=n[t]=r.exports;return i},u=function(t){var o=i(t,".");if(r(n,o))return n[o];if(r(e,o))return a(o,e[o]);var s=i(o,"./index");if(r(n,s))return n[s];if(r(e,s))return a(s,e[s]);throw new Error('Cannot find module "'+t+'"')},l=function(t,n){if("object"==typeof t)for(var i in t)r(t,i)&&(e[i]=t[i]);else e[t]=n},c=function(){var t=[];for(var n in e)r(e,n)&&t.push(n);return t};t.require=u,t.require.define=l,t.require.register=l,t.require.list=c,t.require.brunch=!0}}(),function(t){for(var e,n=function(){},r="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(",");e=r.pop();)t[e]=t[e]||n}(window.console=window.console||{}),function(t,e){function n(t){var e=t.length,n=oe.type(t);return oe.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||"function"!==n&&(0===e||"number"==typeof e&&e>0&&e-1 in t)}function r(t){var e=fe[t]={};return oe.each(t.match(ae)||[],function(t,n){e[n]=!0}),e}function i(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=oe.expando+Math.random()}function o(t,n,r){var i;if(r===e&&1===t.nodeType)if(i="data-"+n.replace(ve,"-$1").toLowerCase(),r=t.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:ge.test(r)?JSON.parse(r):r}catch(o){}me.set(t,n,r)}else r=e;return r}function s(){return!0}function a(){return!1}function u(){try{return V.activeElement}catch(t){}}function l(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function c(t,e,n){if(oe.isFunction(e))return oe.grep(t,function(t,r){return!!e.call(t,r,t)!==n});if(e.nodeType)return oe.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(Ee.test(e))return oe.filter(e,t,n);e=oe.filter(e,t)}return oe.grep(t,function(t){return ee.call(e,t)>=0!==n})}function p(t,e){return oe.nodeName(t,"table")&&oe.nodeName(1===e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function h(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function d(t){var e=qe.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function f(t,e){for(var n=t.length,r=0;n>r;r++)ye.set(t[r],"globalEval",!e||ye.get(e[r],"globalEval"))}function m(t,e){var n,r,i,o,s,a,u,l;if(1===e.nodeType){if(ye.hasData(t)&&(o=ye.access(t),s=ye.set(e,o),l=o.events)){delete s.handle,s.events={};for(i in l)for(n=0,r=l[i].length;r>n;n++)oe.event.add(e,i,l[i][n])}me.hasData(t)&&(a=me.access(t),u=oe.extend({},a),me.set(e,u))}}function y(t,n){var r=t.getElementsByTagName?t.getElementsByTagName(n||"*"):t.querySelectorAll?t.querySelectorAll(n||"*"):[];return n===e||n&&oe.nodeName(t,n)?oe.merge([t],r):r}function g(t,e){var n=e.nodeName.toLowerCase();"input"===n&&$e.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}function v(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),r=e,i=Ze.length;i--;)if(e=Ze[i]+n,e in t)return e;return r}function _(t,e){return t=e||t,"none"===oe.css(t,"display")||!oe.contains(t.ownerDocument,t)}function b(e){return t.getComputedStyle(e,null)}function w(t,e){for(var n,r,i,o=[],s=0,a=t.length;a>s;s++)r=t[s],r.style&&(o[s]=ye.get(r,"olddisplay"),n=r.style.display,e?(o[s]||"none"!==n||(r.style.display=""),""===r.style.display&&_(r)&&(o[s]=ye.access(r,"olddisplay",S(r.nodeName)))):o[s]||(i=_(r),(n&&"none"!==n||!i)&&ye.set(r,"olddisplay",i?n:oe.css(r,"display"))));for(s=0;a>s;s++)r=t[s],r.style&&(e&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=e?o[s]||"":"none"));return t}function x(t,e,n){var r=Ue.exec(e);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):e}function k(t,e,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===e?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=oe.css(t,n+Ke[o],!0,i)),r?("content"===n&&(s-=oe.css(t,"padding"+Ke[o],!0,i)),"margin"!==n&&(s-=oe.css(t,"border"+Ke[o]+"Width",!0,i))):(s+=oe.css(t,"padding"+Ke[o],!0,i),"padding"!==n&&(s+=oe.css(t,"border"+Ke[o]+"Width",!0,i)));return s}function T(t,e,n){var r=!0,i="width"===e?t.offsetWidth:t.offsetHeight,o=b(t),s=oe.support.boxSizing&&"border-box"===oe.css(t,"boxSizing",!1,o);if(0>=i||null==i){if(i=ze(t,e,o),(0>i||null==i)&&(i=t.style[e]),Xe.test(i))return i;r=s&&(oe.support.boxSizingReliable||i===t.style[e]),i=parseFloat(i)||0}return i+k(t,e,n||(s?"border":"content"),r,o)+"px"}function S(t){var e=V,n=Ge[t];return n||(n=C(t,e),"none"!==n&&n||(Be=(Be||oe("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(e.documentElement),e=(Be[0].contentWindow||Be[0].contentDocument).document,e.write("<!doctype html><html><body>"),e.close(),n=C(t,e),Be.detach()),Ge[t]=n),n}function C(t,e){var n=oe(e.createElement(t)).appendTo(e.body),r=oe.css(n[0],"display");return n.remove(),r}function O(t,e,n,r){var i;if(oe.isArray(e))oe.each(e,function(e,i){n||en.test(t)?r(t,i):O(t+"["+("object"==typeof i?e:"")+"]",i,n,r)});else if(n||"object"!==oe.type(e))r(t,e);else for(i in e)O(t+"["+i+"]",e[i],n,r)}function E(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(ae)||[];if(oe.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function D(t,e,n,r){function i(a){var u;return o[a]=!0,oe.each(t[a]||[],function(t,a){var l=a(e,n,r);return"string"!=typeof l||s||o[l]?s?!(u=l):void 0:(e.dataTypes.unshift(l),i(l),!1)}),u}var o={},s=t===_n;return i(e.dataTypes[0])||!o["*"]&&i("*")}function N(t,n){var r,i,o=oe.ajaxSettings.flatOptions||{};for(r in n)n[r]!==e&&((o[r]?t:i||(i={}))[r]=n[r]);return i&&oe.extend(!0,t,i),t}function P(t,n,r){for(var i,o,s,a,u=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),i===e&&(i=t.mimeType||n.getResponseHeader("Content-Type"));if(i)for(o in u)if(u[o]&&u[o].test(i)){l.unshift(o);break}if(l[0]in r)s=l[0];else{for(o in r){if(!l[0]||t.converters[o+" "+l[0]]){s=o;break}a||(a=o)}s=s||a}return s?(s!==l[0]&&l.unshift(s),r[s]):void 0}function I(t,e,n,r){var i,o,s,a,u,l={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)l[s.toLowerCase()]=t.converters[s];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(s=l[u+" "+o]||l["* "+o],!s)for(i in l)if(a=i.split(" "),a[1]===o&&(s=l[u+" "+a[0]]||l["* "+a[0]])){s===!0?s=l[i]:l[i]!==!0&&(o=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(p){return{state:"parsererror",error:s?p:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}function A(){return setTimeout(function(){En=e}),En=oe.now()}function L(t,e,n){for(var r,i=(Ln[e]||[]).concat(Ln["*"]),o=0,s=i.length;s>o;o++)if(r=i[o].call(n,e,t))return r}function M(t,e,n){var r,i,o=0,s=An.length,a=oe.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var e=En||A(),n=Math.max(0,l.startTime+l.duration-e),r=n/l.duration||0,o=1-r,s=0,u=l.tweens.length;u>s;s++)l.tweens[s].run(o);return a.notifyWith(t,[l,o,n]),1>o&&u?n:(a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:oe.extend({},e),opts:oe.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:En||A(),duration:n.duration,tweens:[],createTween:function(e,n){var r=oe.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(r),r},stop:function(e){var n=0,r=e?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return e?a.resolveWith(t,[l,e]):a.rejectWith(t,[l,e]),this}}),c=l.props;for($(c,l.opts.specialEasing);s>o;o++)if(r=An[o].call(l,t,c,l.opts))return r;return oe.map(c,L,l),oe.isFunction(l.opts.start)&&l.opts.start.call(t,l),oe.fx.timer(oe.extend(u,{elem:t,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function $(t,e){var n,r,i,o,s;for(n in t)if(r=oe.camelCase(n),i=e[r],o=t[n],oe.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),s=oe.cssHooks[r],s&&"expand"in s){o=s.expand(o),delete t[r];for(n in o)n in t||(t[n]=o[n],e[n]=i)}else e[r]=i}function R(t,n,r){var i,o,s,a,u,l,c=this,p={},h=t.style,d=t.nodeType&&_(t),f=ye.get(t,"fxshow");r.queue||(u=oe._queueHooks(t,"fx"),null==u.unqueued&&(u.unqueued=0,l=u.empty.fire,u.empty.fire=function(){u.unqueued||l()}),u.unqueued++,c.always(function(){c.always(function(){u.unqueued--,oe.queue(t,"fx").length||u.empty.fire()})})),1===t.nodeType&&("height"in n||"width"in n)&&(r.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===oe.css(t,"display")&&"none"===oe.css(t,"float")&&(h.display="inline-block")),r.overflow&&(h.overflow="hidden",c.always(function(){h.overflow=r.overflow[0],h.overflowX=r.overflow[1],h.overflowY=r.overflow[2]}));for(i in n)if(o=n[i],Nn.exec(o)){if(delete n[i],s=s||"toggle"===o,o===(d?"hide":"show")){if("show"!==o||!f||f[i]===e)continue;d=!0}p[i]=f&&f[i]||oe.style(t,i)}if(!oe.isEmptyObject(p)){f?"hidden"in f&&(d=f.hidden):f=ye.access(t,"fxshow",{}),s&&(f.hidden=!d),d?oe(t).show():c.done(function(){oe(t).hide()}),c.done(function(){var e;ye.remove(t,"fxshow");for(e in p)oe.style(t,e,p[e])});for(i in p)a=L(d?f[i]:0,i,c),i in f||(f[i]=a.start,d&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function j(t,e,n,r,i){return new j.prototype.init(t,e,n,r,i)}function q(t,e){var n,r={height:t},i=0;for(e=e?1:0;4>i;i+=2-e)n=Ke[i],r["margin"+n]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function F(t){return oe.isWindow(t)?t:9===t.nodeType&&t.defaultView}var H,z,B=typeof e,W=t.location,V=t.document,U=V.documentElement,X=t.jQuery,J=t.$,G={},Q=[],Y="2.0.1",K=Q.concat,Z=Q.push,te=Q.slice,ee=Q.indexOf,ne=G.toString,re=G.hasOwnProperty,ie=Y.trim,oe=function(t,e){return new oe.fn.init(t,e,H)},se=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ae=/\S+/g,ue=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,le=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ce=/^-ms-/,pe=/-([\da-z])/gi,he=function(t,e){return e.toUpperCase()},de=function(){V.removeEventListener("DOMContentLoaded",de,!1),t.removeEventListener("load",de,!1),oe.ready()};oe.fn=oe.prototype={jquery:Y,constructor:oe,init:function(t,n,r){var i,o;if(!t)return this;if("string"==typeof t){if(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:ue.exec(t),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(t):this.constructor(n).find(t);if(i[1]){if(n=n instanceof oe?n[0]:n,oe.merge(this,oe.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:V,!0)),le.test(i[1])&&oe.isPlainObject(n))for(i in n)oe.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}return o=V.getElementById(i[2]),o&&o.parentNode&&(this.length=1,this[0]=o),this.context=V,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):oe.isFunction(t)?r.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),oe.makeArray(t,this))},selector:"",length:0,toArray:function(){return te.call(this)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t){var e=oe.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return oe.each(this,t,e)},ready:function(t){return oe.ready.promise().done(t),this},slice:function(){return this.pushStack(te.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},map:function(t){return this.pushStack(oe.map(this,function(e,n){return t.call(e,n,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:Z,sort:[].sort,splice:[].splice},oe.fn.init.prototype=oe.fn,oe.extend=oe.fn.extend=function(){var t,n,r,i,o,s,a=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[1]||{},u=2),"object"==typeof a||oe.isFunction(a)||(a={}),l===u&&(a=this,--u);l>u;u++)if(null!=(t=arguments[u]))for(n in t)r=a[n],i=t[n],a!==i&&(c&&i&&(oe.isPlainObject(i)||(o=oe.isArray(i)))?(o?(o=!1,s=r&&oe.isArray(r)?r:[]):s=r&&oe.isPlainObject(r)?r:{},a[n]=oe.extend(c,s,i)):i!==e&&(a[n]=i));return a},oe.extend({expando:"jQuery"+(Y+Math.random()).replace(/\D/g,""),noConflict:function(e){return t.$===oe&&(t.$=J),e&&t.jQuery===oe&&(t.jQuery=X),oe},isReady:!1,readyWait:1,holdReady:function(t){t?oe.readyWait++:oe.ready(!0)},ready:function(t){(t===!0?--oe.readyWait:oe.isReady)||(oe.isReady=!0,t!==!0&&--oe.readyWait>0||(z.resolveWith(V,[oe]),oe.fn.trigger&&oe(V).trigger("ready").off("ready")))},isFunction:function(t){return"function"===oe.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?String(t):"object"==typeof t||"function"==typeof t?G[ne.call(t)]||"object":typeof t},isPlainObject:function(t){if("object"!==oe.type(t)||t.nodeType||oe.isWindow(t))return!1;try{if(t.constructor&&!re.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw new Error(t)},parseHTML:function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||V;var r=le.exec(t),i=!n&&[];return r?[e.createElement(r[1])]:(r=oe.buildFragment([t],e,i),i&&oe(i).remove(),oe.merge([],r.childNodes))},parseJSON:JSON.parse,parseXML:function(t){var n,r;if(!t||"string"!=typeof t)return null;try{r=new DOMParser,n=r.parseFromString(t,"text/xml")}catch(i){n=e}return(!n||n.getElementsByTagName("parsererror").length)&&oe.error("Invalid XML: "+t),n},noop:function(){},globalEval:function(t){var e,n=eval;t=oe.trim(t),t&&(1===t.indexOf("use strict")?(e=V.createElement("script"),e.text=t,V.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(ce,"ms-").replace(pe,he)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,r){var i,o=0,s=t.length,a=n(t);if(r){if(a)for(;s>o&&(i=e.apply(t[o],r),i!==!1);o++);else for(o in t)if(i=e.apply(t[o],r),i===!1)break}else if(a)for(;s>o&&(i=e.call(t[o],o,t[o]),i!==!1);o++);else for(o in t)if(i=e.call(t[o],o,t[o]),i===!1)break;return t},trim:function(t){return null==t?"":ie.call(t)},makeArray:function(t,e){var r=e||[];return null!=t&&(n(Object(t))?oe.merge(r,"string"==typeof t?[t]:t):Z.call(r,t)),r},inArray:function(t,e,n){return null==e?-1:ee.call(e,t,n)},merge:function(t,n){var r=n.length,i=t.length,o=0;if("number"==typeof r)for(;r>o;o++)t[i++]=n[o];else for(;n[o]!==e;)t[i++]=n[o++];return t.length=i,t},grep:function(t,e,n){var r,i=[],o=0,s=t.length;for(n=!!n;s>o;o++)r=!!e(t[o],o),n!==r&&i.push(t[o]);return i},map:function(t,e,r){var i,o=0,s=t.length,a=n(t),u=[];if(a)for(;s>o;o++)i=e(t[o],o,r),null!=i&&(u[u.length]=i);else for(o in t)i=e(t[o],o,r),null!=i&&(u[u.length]=i);return K.apply([],u)},guid:1,proxy:function(t,n){var r,i,o;return"string"==typeof n&&(r=t[n],n=t,t=r),oe.isFunction(t)?(i=te.call(arguments,2),o=function(){return t.apply(n||this,i.concat(te.call(arguments)))},o.guid=t.guid=t.guid||oe.guid++,o):e},access:function(t,n,r,i,o,s,a){var u=0,l=t.length,c=null==r;if("object"===oe.type(r)){o=!0;for(u in r)oe.access(t,n,u,r[u],!0,s,a)}else if(i!==e&&(o=!0,oe.isFunction(i)||(a=!0),c&&(a?(n.call(t,i),n=null):(c=n,n=function(t,e,n){return c.call(oe(t),n)})),n))for(;l>u;u++)n(t[u],r,a?i:i.call(t[u],u,n(t[u],r)));return o?t:c?n.call(t):l?n(t[0],r):s},now:Date.now,swap:function(t,e,n,r){var i,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];i=n.apply(t,r||[]);for(o in e)t.style[o]=s[o];return i}}),oe.ready.promise=function(e){return z||(z=oe.Deferred(),"complete"===V.readyState?setTimeout(oe.ready):(V.addEventListener("DOMContentLoaded",de,!1),t.addEventListener("load",de,!1))),z.promise(e)},oe.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){G["[object "+e+"]"]=e.toLowerCase()}),H=oe(V),function(t,e){function n(t,e,n,r){var i,o,s,a,u,l,c,p,h,d;if((e?e.ownerDocument||e:W)!==$&&M(e),e=e||$,n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=e.nodeType)&&9!==a)return[];if(j&&!r){if(i=ke.exec(t))if(s=i[1]){if(9===a){if(o=e.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(s))&&z(e,o)&&o.id===s)return n.push(o),n}else{if(i[2])return ie.apply(n,e.getElementsByTagName(t)),n;if((s=i[3])&&O.getElementsByClassName&&e.getElementsByClassName)return ie.apply(n,e.getElementsByClassName(s)),n}if(O.qsa&&(!q||!q.test(t))){if(p=c=B,h=e,d=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(l=m(t),(c=e.getAttribute("id"))?p=c.replace(Ce,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",u=l.length;u--;)l[u]=p+y(l[u]);h=ge.test(t)&&e.parentNode||e,d=l.join(",")}if(d)try{return ie.apply(n,h.querySelectorAll(d)),n}catch(f){}finally{c||e.removeAttribute("id")}}}return T(t.replace(fe,"$1"),e,n,r)}function r(t){return xe.test(t+"")}function i(){function t(n,r){return e.push(n+=" ")>D.cacheLength&&delete t[e.shift()],t[n]=r}var e=[];return t}function o(t){return t[B]=!0,t}function s(t){var e=$.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function a(t,e,n){t=t.split("|");for(var r,i=t.length,o=n?null:e;i--;)(r=D.attrHandle[t[i]])&&r!==e||(D.attrHandle[t[i]]=o)}function u(t,e){var n=t.getAttributeNode(e);return n&&n.specified?n.value:t[e]===!0?e.toLowerCase():null}function l(t,e){return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}function c(t){return"input"===t.nodeName.toLowerCase()?t.defaultValue:void 0}function p(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||Z)-(~t.sourceIndex||Z);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function h(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function d(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function f(t){return o(function(e){return e=+e,o(function(n,r){for(var i,o=t([],n.length,e),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}function m(t,e){var r,i,o,s,a,u,l,c=J[t+" "];if(c)return e?0:c.slice(0);for(a=t,u=[],l=D.preFilter;a;){(!r||(i=me.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),u.push(o=[])),r=!1,(i=ye.exec(a))&&(r=i.shift(),o.push({value:r,type:i[0].replace(fe," ")}),a=a.slice(r.length));for(s in D.filter)!(i=we[s].exec(a))||l[s]&&!(i=l[s](i))||(r=i.shift(),o.push({value:r,type:s,matches:i}),a=a.slice(r.length));if(!r)break}return e?a.length:a?n.error(t):J(t,u).slice(0)}function y(t){for(var e=0,n=t.length,r="";n>e;e++)r+=t[e].value;return r}function g(t,e,n){var r=e.dir,i=n&&"parentNode"===r,o=U++;return e.first?function(e,n,o){for(;e=e[r];)if(1===e.nodeType||i)return t(e,n,o)}:function(e,n,s){var a,u,l,c=V+" "+o;if(s){for(;e=e[r];)if((1===e.nodeType||i)&&t(e,n,s))return!0}else for(;e=e[r];)if(1===e.nodeType||i)if(l=e[B]||(e[B]={}),(u=l[r])&&u[0]===c){if((a=u[1])===!0||a===E)return a===!0}else if(u=l[r]=[c],u[1]=t(e,n,s)||E,u[1]===!0)return!0}}function v(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function _(t,e,n,r,i){for(var o,s=[],a=0,u=t.length,l=null!=e;u>a;a++)(o=t[a])&&(!n||n(o,r,i))&&(s.push(o),l&&e.push(a));return s}function b(t,e,n,r,i,s){return r&&!r[B]&&(r=b(r)),i&&!i[B]&&(i=b(i,s)),o(function(o,s,a,u){var l,c,p,h=[],d=[],f=s.length,m=o||k(e||"*",a.nodeType?[a]:a,[]),y=!t||!o&&e?m:_(m,h,t,a,u),g=n?i||(o?t:f||r)?[]:s:y;if(n&&n(y,g,a,u),r)for(l=_(g,d),r(l,[],a,u),c=l.length;c--;)(p=l[c])&&(g[d[c]]=!(y[d[c]]=p));if(o){if(i||t){if(i){for(l=[],c=g.length;c--;)(p=g[c])&&l.push(y[c]=p);i(null,g=[],l,u)}for(c=g.length;c--;)(p=g[c])&&(l=i?ae.call(o,p):h[c])>-1&&(o[l]=!(s[l]=p))}}else g=_(g===s?g.splice(f,g.length):g),i?i(null,s,g,u):ie.apply(s,g)})}function w(t){for(var e,n,r,i=t.length,o=D.relative[t[0].type],s=o||D.relative[" "],a=o?1:0,u=g(function(t){return t===e},s,!0),l=g(function(t){return ae.call(e,t)>-1},s,!0),c=[function(t,n,r){return!o&&(r||n!==A)||((e=n).nodeType?u(t,n,r):l(t,n,r))}];i>a;a++)if(n=D.relative[t[a].type])c=[g(v(c),n)];else{if(n=D.filter[t[a].type].apply(null,t[a].matches),n[B]){for(r=++a;i>r&&!D.relative[t[r].type];r++);return b(a>1&&v(c),a>1&&y(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(fe,"$1"),n,r>a&&w(t.slice(a,r)),i>r&&w(t=t.slice(r)),i>r&&y(t))}c.push(n)}return v(c)}function x(t,e){var r=0,i=e.length>0,s=t.length>0,a=function(o,a,u,l,c){var p,h,d,f=[],m=0,y="0",g=o&&[],v=null!=c,b=A,w=o||s&&D.find.TAG("*",c&&a.parentNode||a),x=V+=null==b?1:Math.random()||.1;for(v&&(A=a!==$&&a,E=r);null!=(p=w[y]);y++){if(s&&p){for(h=0;d=t[h++];)if(d(p,a,u)){l.push(p);break}v&&(V=x,E=++r)}i&&((p=!d&&p)&&m--,o&&g.push(p))}if(m+=y,i&&y!==m){for(h=0;d=e[h++];)d(g,f,a,u);if(o){if(m>0)for(;y--;)g[y]||f[y]||(f[y]=ne.call(l));f=_(f)}ie.apply(l,f),v&&!o&&f.length>0&&m+e.length>1&&n.uniqueSort(l)}return v&&(V=x,A=b),g};return i?o(a):a}function k(t,e,r){for(var i=0,o=e.length;o>i;i++)n(t,e[i],r);return r}function T(t,e,n,r){var i,o,s,a,u,l=m(t);if(!r&&1===l.length){if(o=l[0]=l[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&O.getById&&9===e.nodeType&&j&&D.relative[o[1].type]){if(e=(D.find.ID(s.matches[0].replace(Oe,Ee),e)||[])[0],!e)return n;t=t.slice(o.shift().value.length)}for(i=we.needsContext.test(t)?0:o.length;i--&&(s=o[i],!D.relative[a=s.type]);)if((u=D.find[a])&&(r=u(s.matches[0].replace(Oe,Ee),ge.test(o[0].type)&&e.parentNode||e))){if(o.splice(i,1),t=r.length&&y(o),!t)return ie.apply(n,r),n;break}}return I(t,l)(r,e,!j,n,ge.test(t)),n}function S(){}var C,O,E,D,N,P,I,A,L,M,$,R,j,q,F,H,z,B="sizzle"+-new Date,W=t.document,V=0,U=0,X=i(),J=i(),G=i(),Q=!1,Y=function(){return 0},K=typeof e,Z=1<<31,te={}.hasOwnProperty,ee=[],ne=ee.pop,re=ee.push,ie=ee.push,se=ee.slice,ae=ee.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},ue="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",le="[\\x20\\t\\r\\n\\f]",ce="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",pe=ce.replace("w","w#"),he="\\["+le+"*("+ce+")"+le+"*(?:([*^$|!~]?=)"+le+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+pe+")|)|)"+le+"*\\]",de=":("+ce+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+he.replace(3,8)+")*)|.*)\\)|)",fe=new RegExp("^"+le+"+|((?:^|[^\\\\])(?:\\\\.)*)"+le+"+$","g"),me=new RegExp("^"+le+"*,"+le+"*"),ye=new RegExp("^"+le+"*([>+~]|"+le+")"+le+"*"),ge=new RegExp(le+"*[+~]"),ve=new RegExp("="+le+"*([^\\]'\"]*)"+le+"*\\]","g"),_e=new RegExp(de),be=new RegExp("^"+pe+"$"),we={ID:new RegExp("^#("+ce+")"),CLASS:new RegExp("^\\.("+ce+")"),TAG:new RegExp("^("+ce.replace("w","w*")+")"),ATTR:new RegExp("^"+he),PSEUDO:new RegExp("^"+de),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+le+"*(even|odd|(([+-]|)(\\d*)n|)"+le+"*(?:([+-]|)"+le+"*(\\d+)|))"+le+"*\\)|)","i"),bool:new RegExp("^(?:"+ue+")$","i"),needsContext:new RegExp("^"+le+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+le+"*((?:-\\d)?\\d*)"+le+"*\\)|)(?=[^-]|$)","i")},xe=/^[^{]+\{\s*\[native \w/,ke=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Te=/^(?:input|select|textarea|button)$/i,Se=/^h\d$/i,Ce=/'|\\/g,Oe=new RegExp("\\\\([\\da-f]{1,6}"+le+"?|("+le+")|.)","ig"),Ee=function(t,e,n){var r="0x"+e-65536;return r!==r||n?e:0>r?String.fromCharCode(r+65536):String.fromCharCode(55296|r>>10,56320|1023&r)};try{ie.apply(ee=se.call(W.childNodes),W.childNodes),ee[W.childNodes.length].nodeType}catch(De){ie={apply:ee.length?function(t,e){re.apply(t,se.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}P=n.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},O=n.support={},M=n.setDocument=function(t){var e=t?t.ownerDocument||t:W;return e!==$&&9===e.nodeType&&e.documentElement?($=e,R=e.documentElement,j=!P(e),O.attributes=s(function(t){return t.innerHTML="<a href='#'></a>",a("type|href|height|width",l,"#"===t.firstChild.getAttribute("href")),a(ue,u,null==t.getAttribute("disabled")),t.className="i",!t.getAttribute("className")}),O.input=s(function(t){return t.innerHTML="<input>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}),a("value",c,O.attributes&&O.input),O.getElementsByTagName=s(function(t){return t.appendChild(e.createComment("")),!t.getElementsByTagName("*").length}),O.getElementsByClassName=s(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),O.getById=s(function(t){return R.appendChild(t).id=B,!e.getElementsByName||!e.getElementsByName(B).length}),O.getById?(D.find.ID=function(t,e){if(typeof e.getElementById!==K&&j){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},D.filter.ID=function(t){var e=t.replace(Oe,Ee);return function(t){return t.getAttribute("id")===e}}):(delete D.find.ID,D.filter.ID=function(t){var e=t.replace(Oe,Ee);return function(t){var n=typeof t.getAttributeNode!==K&&t.getAttributeNode("id");return n&&n.value===e}}),D.find.TAG=O.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==K?e.getElementsByTagName(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},D.find.CLASS=O.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==K&&j?e.getElementsByClassName(t):void 0},F=[],q=[],(O.qsa=r(e.querySelectorAll))&&(s(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||q.push("\\["+le+"*(?:value|"+ue+")"),t.querySelectorAll(":checked").length||q.push(":checked")}),s(function(t){var n=e.createElement("input");n.setAttribute("type","hidden"),t.appendChild(n).setAttribute("t",""),t.querySelectorAll("[t^='']").length&&q.push("[*^$]="+le+"*(?:''|\"\")"),t.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),q.push(",.*:")})),(O.matchesSelector=r(H=R.webkitMatchesSelector||R.mozMatchesSelector||R.oMatchesSelector||R.msMatchesSelector))&&s(function(t){O.disconnectedMatch=H.call(t,"div"),H.call(t,"[s!='']:x"),F.push("!=",de)}),q=q.length&&new RegExp(q.join("|")),F=F.length&&new RegExp(F.join("|")),z=r(R.contains)||R.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},O.sortDetached=s(function(t){return 1&t.compareDocumentPosition(e.createElement("div"))}),Y=R.compareDocumentPosition?function(t,n){if(t===n)return Q=!0,0;var r=n.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(n);return r?1&r||!O.sortDetached&&n.compareDocumentPosition(t)===r?t===e||z(W,t)?-1:n===e||z(W,n)?1:L?ae.call(L,t)-ae.call(L,n):0:4&r?-1:1:t.compareDocumentPosition?-1:1}:function(t,n){var r,i=0,o=t.parentNode,s=n.parentNode,a=[t],u=[n];if(t===n)return Q=!0,0;if(!o||!s)return t===e?-1:n===e?1:o?-1:s?1:L?ae.call(L,t)-ae.call(L,n):0;if(o===s)return p(t,n);for(r=t;r=r.parentNode;)a.unshift(r);for(r=n;r=r.parentNode;)u.unshift(r);for(;a[i]===u[i];)i++;return i?p(a[i],u[i]):a[i]===W?-1:u[i]===W?1:0},e):$},n.matches=function(t,e){return n(t,null,null,e)},n.matchesSelector=function(t,e){if((t.ownerDocument||t)!==$&&M(t),e=e.replace(ve,"='$1']"),!(!O.matchesSelector||!j||F&&F.test(e)||q&&q.test(e)))try{var r=H.call(t,e);if(r||O.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(i){}return n(e,$,null,[t]).length>0},n.contains=function(t,e){return(t.ownerDocument||t)!==$&&M(t),z(t,e)},n.attr=function(t,n){(t.ownerDocument||t)!==$&&M(t);var r=D.attrHandle[n.toLowerCase()],i=r&&te.call(D.attrHandle,n.toLowerCase())?r(t,n,!j):e;return i===e?O.attributes||!j?t.getAttribute(n):(i=t.getAttributeNode(n))&&i.specified?i.value:null:i},n.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},n.uniqueSort=function(t){var e,n=[],r=0,i=0;if(Q=!O.detectDuplicates,L=!O.sortStable&&t.slice(0),t.sort(Y),Q){for(;e=t[i++];)e===t[i]&&(r=n.push(i));for(;r--;)t.splice(n[r],1)}return t},N=n.getText=function(t){var e,n="",r=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=N(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[r];r++)n+=N(e);return n},D=n.selectors={cacheLength:50,createPseudo:o,match:we,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Oe,Ee),t[3]=(t[4]||t[5]||"").replace(Oe,Ee),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||n.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&n.error(t[0]),t},PSEUDO:function(t){var n,r=!t[5]&&t[2];return we.CHILD.test(t[0])?null:(t[3]&&t[4]!==e?t[2]=t[4]:r&&_e.test(r)&&(n=m(r,!0))&&(n=r.indexOf(")",r.length-n)-r.length)&&(t[0]=t[0].slice(0,n),t[2]=r.slice(0,n)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Oe,Ee).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=X[t+" "];return e||(e=new RegExp("(^|"+le+")"+t+"("+le+"|$)"))&&X(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==K&&t.getAttribute("class")||"")})},ATTR:function(t,e,r){return function(i){var o=n.attr(i,t);return null==o?"!="===e:e?(o+="","="===e?o===r:"!="===e?o!==r:"^="===e?r&&0===o.indexOf(r):"*="===e?r&&o.indexOf(r)>-1:"$="===e?r&&o.slice(-r.length)===r:"~="===e?(" "+o+" ").indexOf(r)>-1:"|="===e?o===r||o.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,u){var l,c,p,h,d,f,m=o!==s?"nextSibling":"previousSibling",y=e.parentNode,g=a&&e.nodeName.toLowerCase(),v=!u&&!a;if(y){if(o){for(;m;){for(p=e;p=p[m];)if(a?p.nodeName.toLowerCase()===g:1===p.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?y.firstChild:y.lastChild],s&&v){for(c=y[B]||(y[B]={}),l=c[t]||[],d=l[0]===V&&l[1],h=l[0]===V&&l[2],p=d&&y.childNodes[d];p=++d&&p&&p[m]||(h=d=0)||f.pop();)if(1===p.nodeType&&++h&&p===e){c[t]=[V,d,h];break}}else if(v&&(l=(e[B]||(e[B]={}))[t])&&l[0]===V)h=l[1];else for(;(p=++d&&p&&p[m]||(h=d=0)||f.pop())&&((a?p.nodeName.toLowerCase()!==g:1!==p.nodeType)||!++h||(v&&((p[B]||(p[B]={}))[t]=[V,h]),p!==e)););return h-=i,h===r||0===h%r&&h/r>=0}}},PSEUDO:function(t,e){var r,i=D.pseudos[t]||D.setFilters[t.toLowerCase()]||n.error("unsupported pseudo: "+t);return i[B]?i(e):i.length>1?(r=[t,t,"",e],D.setFilters.hasOwnProperty(t.toLowerCase())?o(function(t,n){for(var r,o=i(t,e),s=o.length;s--;)r=ae.call(t,o[s]),t[r]=!(n[r]=o[s])}):function(t){return i(t,0,r)}):i}},pseudos:{not:o(function(t){var e=[],n=[],r=I(t.replace(fe,"$1"));return r[B]?o(function(t,e,n,i){for(var o,s=r(t,null,i,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),!n.pop()
}}),has:o(function(t){return function(e){return n(t,e).length>0}}),contains:o(function(t){return function(e){return(e.textContent||e.innerText||N(e)).indexOf(t)>-1}}),lang:o(function(t){return be.test(t||"")||n.error("unsupported lang: "+t),t=t.replace(Oe,Ee).toLowerCase(),function(e){var n;do if(n=j?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===R},focus:function(t){return t===$.activeElement&&(!$.hasFocus||$.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeName>"@"||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!D.pseudos.empty(t)},header:function(t){return Se.test(t.nodeName)},input:function(t){return Te.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:f(function(){return[0]}),last:f(function(t,e){return[e-1]}),eq:f(function(t,e,n){return[0>n?n+e:n]}),even:f(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:f(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:f(function(t,e,n){for(var r=0>n?n+e:n;--r>=0;)t.push(r);return t}),gt:f(function(t,e,n){for(var r=0>n?n+e:n;++r<e;)t.push(r);return t})}};for(C in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})D.pseudos[C]=h(C);for(C in{submit:!0,reset:!0})D.pseudos[C]=d(C);I=n.compile=function(t,e){var n,r=[],i=[],o=G[t+" "];if(!o){for(e||(e=m(t)),n=e.length;n--;)o=w(e[n]),o[B]?r.push(o):i.push(o);o=G(t,x(i,r))}return o},D.pseudos.nth=D.pseudos.eq,S.prototype=D.filters=D.pseudos,D.setFilters=new S,O.sortStable=B.split("").sort(Y).join("")===B,M(),[0,0].sort(Y),O.detectDuplicates=Q,oe.find=n,oe.expr=n.selectors,oe.expr[":"]=oe.expr.pseudos,oe.unique=n.uniqueSort,oe.text=n.getText,oe.isXMLDoc=n.isXML,oe.contains=n.contains}(t);var fe={};oe.Callbacks=function(t){t="string"==typeof t?fe[t]||r(t):oe.extend({},t);var n,i,o,s,a,u,l=[],c=!t.once&&[],p=function(e){for(n=t.memory&&e,i=!0,u=s||0,s=0,a=l.length,o=!0;l&&a>u;u++)if(l[u].apply(e[0],e[1])===!1&&t.stopOnFalse){n=!1;break}o=!1,l&&(c?c.length&&p(c.shift()):n?l=[]:h.disable())},h={add:function(){if(l){var e=l.length;!function r(e){oe.each(e,function(e,n){var i=oe.type(n);"function"===i?t.unique&&h.has(n)||l.push(n):n&&n.length&&"string"!==i&&r(n)})}(arguments),o?a=l.length:n&&(s=e,p(n))}return this},remove:function(){return l&&oe.each(arguments,function(t,e){for(var n;(n=oe.inArray(e,l,n))>-1;)l.splice(n,1),o&&(a>=n&&a--,u>=n&&u--)}),this},has:function(t){return t?oe.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],a=0,this},disable:function(){return l=c=n=e,this},disabled:function(){return!l},lock:function(){return c=e,n||h.disable(),this},locked:function(){return!c},fireWith:function(t,e){return e=e||[],e=[t,e.slice?e.slice():e],!l||i&&!c||(o?c.push(e):p(e)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!i}};return h},oe.extend({Deferred:function(t){var e=[["resolve","done",oe.Callbacks("once memory"),"resolved"],["reject","fail",oe.Callbacks("once memory"),"rejected"],["notify","progress",oe.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var t=arguments;return oe.Deferred(function(n){oe.each(e,function(e,o){var s=o[0],a=oe.isFunction(t[e])&&t[e];i[o[1]](function(){var t=a&&a.apply(this,arguments);t&&oe.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===r?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?oe.extend(t,r):r}},i={};return r.pipe=r.then,oe.each(e,function(t,o){var s=o[2],a=o[3];r[o[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=s.fireWith}),r.promise(i),t&&t.call(i,i),i},when:function(t){var e,n,r,i=0,o=te.call(arguments),s=o.length,a=1!==s||t&&oe.isFunction(t.promise)?s:0,u=1===a?t:oe.Deferred(),l=function(t,n,r){return function(i){n[t]=this,r[t]=arguments.length>1?te.call(arguments):i,r===e?u.notifyWith(n,r):--a||u.resolveWith(n,r)}};if(s>1)for(e=new Array(s),n=new Array(s),r=new Array(s);s>i;i++)o[i]&&oe.isFunction(o[i].promise)?o[i].promise().done(l(i,r,o)).fail(u.reject).progress(l(i,n,e)):--a;return a||u.resolveWith(r,o),u.promise()}}),oe.support=function(e){var n=V.createElement("input"),r=V.createDocumentFragment(),i=V.createElement("div"),o=V.createElement("select"),s=o.appendChild(V.createElement("option"));return n.type?(n.type="checkbox",e.checkOn=""!==n.value,e.optSelected=s.selected,e.reliableMarginRight=!0,e.boxSizingReliable=!0,e.pixelPosition=!1,n.checked=!0,e.noCloneChecked=n.cloneNode(!0).checked,o.disabled=!0,e.optDisabled=!s.disabled,n=V.createElement("input"),n.value="t",n.type="radio",e.radioValue="t"===n.value,n.setAttribute("checked","t"),n.setAttribute("name","t"),r.appendChild(n),e.checkClone=r.cloneNode(!0).cloneNode(!0).lastChild.checked,e.focusinBubbles="onfocusin"in t,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",e.clearCloneStyle="content-box"===i.style.backgroundClip,oe(function(){var n,r,o="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",s=V.getElementsByTagName("body")[0];s&&(n=V.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",s.appendChild(n).appendChild(i),i.innerHTML="",i.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",oe.swap(s,null!=s.style.zoom?{zoom:1}:{},function(){e.boxSizing=4===i.offsetWidth}),t.getComputedStyle&&(e.pixelPosition="1%"!==(t.getComputedStyle(i,null)||{}).top,e.boxSizingReliable="4px"===(t.getComputedStyle(i,null)||{width:"4px"}).width,r=i.appendChild(V.createElement("div")),r.style.cssText=i.style.cssText=o,r.style.marginRight=r.style.width="0",i.style.width="1px",e.reliableMarginRight=!parseFloat((t.getComputedStyle(r,null)||{}).marginRight)),s.removeChild(n))}),e):e}({});var me,ye,ge=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,ve=/([A-Z])/g;i.uid=1,i.accepts=function(t){return t.nodeType?1===t.nodeType||9===t.nodeType:!0},i.prototype={key:function(t){if(!i.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=i.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(r){e[this.expando]=n,oe.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var r,i=this.key(t),o=this.cache[i];if("string"==typeof e)o[e]=n;else if(oe.isEmptyObject(o))oe.extend(this.cache[i],e);else for(r in e)o[r]=e[r];return o},get:function(t,n){var r=this.cache[this.key(t)];return n===e?r:r[n]},access:function(t,n,r){return n===e||n&&"string"==typeof n&&r===e?this.get(t,n):(this.set(t,n,r),r!==e?r:n)},remove:function(t,n){var r,i,o,s=this.key(t),a=this.cache[s];if(n===e)this.cache[s]={};else{oe.isArray(n)?i=n.concat(n.map(oe.camelCase)):(o=oe.camelCase(n),n in a?i=[n,o]:(i=o,i=i in a?[i]:i.match(ae)||[])),r=i.length;for(;r--;)delete a[i[r]]}},hasData:function(t){return!oe.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}},me=new i,ye=new i,oe.extend({acceptData:i.accepts,hasData:function(t){return me.hasData(t)||ye.hasData(t)},data:function(t,e,n){return me.access(t,e,n)},removeData:function(t,e){me.remove(t,e)},_data:function(t,e,n){return ye.access(t,e,n)},_removeData:function(t,e){ye.remove(t,e)}}),oe.fn.extend({data:function(t,n){var r,i,s=this[0],a=0,u=null;if(t===e){if(this.length&&(u=me.get(s),1===s.nodeType&&!ye.get(s,"hasDataAttrs"))){for(r=s.attributes;a<r.length;a++)i=r[a].name,0===i.indexOf("data-")&&(i=oe.camelCase(i.slice(5)),o(s,i,u[i]));ye.set(s,"hasDataAttrs",!0)}return u}return"object"==typeof t?this.each(function(){me.set(this,t)}):oe.access(this,function(n){var r,i=oe.camelCase(t);if(s&&n===e){if(r=me.get(s,t),r!==e)return r;if(r=me.get(s,i),r!==e)return r;if(r=o(s,i,e),r!==e)return r}else this.each(function(){var r=me.get(this,i);me.set(this,i,n),-1!==t.indexOf("-")&&r!==e&&me.set(this,t,n)})},null,n,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){me.remove(this,t)})}}),oe.extend({queue:function(t,e,n){var r;return t?(e=(e||"fx")+"queue",r=ye.get(t,e),n&&(!r||oe.isArray(n)?r=ye.access(t,e,oe.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=oe.queue(t,e),r=n.length,i=n.shift(),o=oe._queueHooks(t,e),s=function(){oe.dequeue(t,e)};"inprogress"===i&&(i=n.shift(),r--),o.cur=i,i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,s,o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return ye.get(t,n)||ye.access(t,n,{empty:oe.Callbacks("once memory").add(function(){ye.remove(t,[e+"queue",n])})})}}),oe.fn.extend({queue:function(t,n){var r=2;return"string"!=typeof t&&(n=t,t="fx",r--),arguments.length<r?oe.queue(this[0],t):n===e?this:this.each(function(){var e=oe.queue(this,t,n);oe._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&oe.dequeue(this,t)})},dequeue:function(t){return this.each(function(){oe.dequeue(this,t)})},delay:function(t,e){return t=oe.fx?oe.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var r=setTimeout(e,t);n.stop=function(){clearTimeout(r)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,n){var r,i=1,o=oe.Deferred(),s=this,a=this.length,u=function(){--i||o.resolveWith(s,[s])};for("string"!=typeof t&&(n=t,t=e),t=t||"fx";a--;)r=ye.get(s[a],t+"queueHooks"),r&&r.empty&&(i++,r.empty.add(u));return u(),o.promise(n)}});var _e,be,we=/[\t\r\n\f]/g,xe=/\r/g,ke=/^(?:input|select|textarea|button)$/i;oe.fn.extend({attr:function(t,e){return oe.access(this,oe.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){oe.removeAttr(this,t)})},prop:function(t,e){return oe.access(this,oe.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[oe.propFix[t]||t]})},addClass:function(t){var e,n,r,i,o,s=0,a=this.length,u="string"==typeof t&&t;if(oe.isFunction(t))return this.each(function(e){oe(this).addClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(ae)||[];a>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(we," "):" ")){for(o=0;i=e[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");n.className=oe.trim(r)}return this},removeClass:function(t){var e,n,r,i,o,s=0,a=this.length,u=0===arguments.length||"string"==typeof t&&t;if(oe.isFunction(t))return this.each(function(e){oe(this).removeClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(ae)||[];a>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(we," "):"")){for(o=0;i=e[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");n.className=t?oe.trim(r):""}return this},toggleClass:function(t,e){var n=typeof t,r="boolean"==typeof e;return oe.isFunction(t)?this.each(function(n){oe(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var i,o=0,s=oe(this),a=e,u=t.match(ae)||[];i=u[o++];)a=r?a:!s.hasClass(i),s[a?"addClass":"removeClass"](i);else(n===B||"boolean"===n)&&(this.className&&ye.set(this,"__className__",this.className),this.className=this.className||t===!1?"":ye.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(we," ").indexOf(e)>=0)return!0;return!1},val:function(t){var n,r,i,o=this[0];{if(arguments.length)return i=oe.isFunction(t),this.each(function(r){var o;1===this.nodeType&&(o=i?t.call(this,r,oe(this).val()):t,null==o?o="":"number"==typeof o?o+="":oe.isArray(o)&&(o=oe.map(o,function(t){return null==t?"":t+""})),n=oe.valHooks[this.type]||oe.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,o,"value")!==e||(this.value=o))});if(o)return n=oe.valHooks[o.type]||oe.valHooks[o.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(o,"value"))!==e?r:(r=o.value,"string"==typeof r?r.replace(xe,""):null==r?"":r)}}}),oe.extend({valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){for(var e,n,r=t.options,i=t.selectedIndex,o="select-one"===t.type||0>i,s=o?null:[],a=o?i+1:r.length,u=0>i?a:o?i:0;a>u;u++)if(n=r[u],!(!n.selected&&u!==i||(oe.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&oe.nodeName(n.parentNode,"optgroup"))){if(e=oe(n).val(),o)return e;s.push(e)}return s},set:function(t,e){for(var n,r,i=t.options,o=oe.makeArray(e),s=i.length;s--;)r=i[s],(r.selected=oe.inArray(oe(r).val(),o)>=0)&&(n=!0);return n||(t.selectedIndex=-1),o}}},attr:function(t,n,r){var i,o,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return typeof t.getAttribute===B?oe.prop(t,n,r):(1===s&&oe.isXMLDoc(t)||(n=n.toLowerCase(),i=oe.attrHooks[n]||(oe.expr.match.bool.test(n)?be:_e)),r===e?i&&"get"in i&&null!==(o=i.get(t,n))?o:(o=oe.find.attr(t,n),null==o?e:o):null!==r?i&&"set"in i&&(o=i.set(t,r,n))!==e?o:(t.setAttribute(n,r+""),r):(oe.removeAttr(t,n),void 0))},removeAttr:function(t,e){var n,r,i=0,o=e&&e.match(ae);if(o&&1===t.nodeType)for(;n=o[i++];)r=oe.propFix[n]||n,oe.expr.match.bool.test(n)&&(t[r]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!oe.support.radioValue&&"radio"===e&&oe.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(t,n,r){var i,o,s,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return s=1!==a||!oe.isXMLDoc(t),s&&(n=oe.propFix[n]||n,o=oe.propHooks[n]),r!==e?o&&"set"in o&&(i=o.set(t,r,n))!==e?i:t[n]=r:o&&"get"in o&&null!==(i=o.get(t,n))?i:t[n]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||ke.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),be={set:function(t,e,n){return e===!1?oe.removeAttr(t,n):t.setAttribute(n,n),n}},oe.each(oe.expr.match.bool.source.match(/\w+/g),function(t,n){var r=oe.expr.attrHandle[n]||oe.find.attr;oe.expr.attrHandle[n]=function(t,n,i){var o=oe.expr.attrHandle[n],s=i?e:(oe.expr.attrHandle[n]=e)!=r(t,n,i)?n.toLowerCase():null;return oe.expr.attrHandle[n]=o,s}}),oe.support.optSelected||(oe.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),oe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){oe.propFix[this.toLowerCase()]=this}),oe.each(["radio","checkbox"],function(){oe.valHooks[this]={set:function(t,e){return oe.isArray(e)?t.checked=oe.inArray(oe(t).val(),e)>=0:void 0}},oe.support.checkOn||(oe.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Te=/^key/,Se=/^(?:mouse|contextmenu)|click/,Ce=/^(?:focusinfocus|focusoutblur)$/,Oe=/^([^.]*)(?:\.(.+)|)$/;oe.event={global:{},add:function(t,n,r,i,o){var s,a,u,l,c,p,h,d,f,m,y,g=ye.get(t);if(g){for(r.handler&&(s=r,r=s.handler,o=s.selector),r.guid||(r.guid=oe.guid++),(l=g.events)||(l=g.events={}),(a=g.handle)||(a=g.handle=function(t){return typeof oe===B||t&&oe.event.triggered===t.type?e:oe.event.dispatch.apply(a.elem,arguments)},a.elem=t),n=(n||"").match(ae)||[""],c=n.length;c--;)u=Oe.exec(n[c])||[],f=y=u[1],m=(u[2]||"").split(".").sort(),f&&(h=oe.event.special[f]||{},f=(o?h.delegateType:h.bindType)||f,h=oe.event.special[f]||{},p=oe.extend({type:f,origType:y,data:i,handler:r,guid:r.guid,selector:o,needsContext:o&&oe.expr.match.needsContext.test(o),namespace:m.join(".")},s),(d=l[f])||(d=l[f]=[],d.delegateCount=0,h.setup&&h.setup.call(t,i,m,a)!==!1||t.addEventListener&&t.addEventListener(f,a,!1)),h.add&&(h.add.call(t,p),p.handler.guid||(p.handler.guid=r.guid)),o?d.splice(d.delegateCount++,0,p):d.push(p),oe.event.global[f]=!0);t=null}},remove:function(t,e,n,r,i){var o,s,a,u,l,c,p,h,d,f,m,y=ye.hasData(t)&&ye.get(t);if(y&&(u=y.events)){for(e=(e||"").match(ae)||[""],l=e.length;l--;)if(a=Oe.exec(e[l])||[],d=m=a[1],f=(a[2]||"").split(".").sort(),d){for(p=oe.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,h=u[d]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=h.length;o--;)c=h[o],!i&&m!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(h.splice(o,1),c.selector&&h.delegateCount--,p.remove&&p.remove.call(t,c));s&&!h.length&&(p.teardown&&p.teardown.call(t,f,y.handle)!==!1||oe.removeEvent(t,d,y.handle),delete u[d])}else for(d in u)oe.event.remove(t,d+e[l],n,r,!0);oe.isEmptyObject(u)&&(delete y.handle,ye.remove(t,"events"))}},trigger:function(n,r,i,o){var s,a,u,l,c,p,h,d=[i||V],f=re.call(n,"type")?n.type:n,m=re.call(n,"namespace")?n.namespace.split("."):[];if(a=u=i=i||V,3!==i.nodeType&&8!==i.nodeType&&!Ce.test(f+oe.event.triggered)&&(f.indexOf(".")>=0&&(m=f.split("."),f=m.shift(),m.sort()),c=f.indexOf(":")<0&&"on"+f,n=n[oe.expando]?n:new oe.Event(f,"object"==typeof n&&n),n.isTrigger=o?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=e,n.target||(n.target=i),r=null==r?[n]:oe.makeArray(r,[n]),h=oe.event.special[f]||{},o||!h.trigger||h.trigger.apply(i,r)!==!1)){if(!o&&!h.noBubble&&!oe.isWindow(i)){for(l=h.delegateType||f,Ce.test(l+f)||(a=a.parentNode);a;a=a.parentNode)d.push(a),u=a;u===(i.ownerDocument||V)&&d.push(u.defaultView||u.parentWindow||t)}for(s=0;(a=d[s++])&&!n.isPropagationStopped();)n.type=s>1?l:h.bindType||f,p=(ye.get(a,"events")||{})[n.type]&&ye.get(a,"handle"),p&&p.apply(a,r),p=c&&a[c],p&&oe.acceptData(a)&&p.apply&&p.apply(a,r)===!1&&n.preventDefault();return n.type=f,o||n.isDefaultPrevented()||h._default&&h._default.apply(d.pop(),r)!==!1||!oe.acceptData(i)||c&&oe.isFunction(i[f])&&!oe.isWindow(i)&&(u=i[c],u&&(i[c]=null),oe.event.triggered=f,i[f](),oe.event.triggered=e,u&&(i[c]=u)),n.result}},dispatch:function(t){t=oe.event.fix(t);var n,r,i,o,s,a=[],u=te.call(arguments),l=(ye.get(this,"events")||{})[t.type]||[],c=oe.event.special[t.type]||{};if(u[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(a=oe.event.handlers.call(this,t,l),n=0;(o=a[n++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,r=0;(s=o.handlers[r++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(s.namespace))&&(t.handleObj=s,t.data=s.data,i=((oe.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,u),i!==e&&(t.result=i)===!1&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,n){var r,i,o,s,a=[],u=n.delegateCount,l=t.target;if(u&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==t.type){for(i=[],r=0;u>r;r++)s=n[r],o=s.selector+" ",i[o]===e&&(i[o]=s.needsContext?oe(o,this).index(l)>=0:oe.find(o,this,null,[l]).length),i[o]&&i.push(s);i.length&&a.push({elem:l,handlers:i})}return u<n.length&&a.push({elem:this,handlers:n.slice(u)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,n){var r,i,o,s=n.button;return null==t.pageX&&null!=n.clientX&&(r=t.target.ownerDocument||V,i=r.documentElement,o=r.body,t.pageX=n.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),t.pageY=n.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0)),t.which||s===e||(t.which=1&s?1:2&s?3:4&s?2:0),t}},fix:function(t){if(t[oe.expando])return t;var e,n,r,i=t.type,o=t,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=Se.test(i)?this.mouseHooks:Te.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,t=new oe.Event(o),e=r.length;e--;)n=r[e],t[n]=o[n];return t.target||(t.target=V),3===t.target.nodeType&&(t.target=t.target.parentNode),s.filter?s.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==u()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===u()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&oe.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return oe.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==e&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,r){var i=oe.extend(new oe.Event,n,{type:t,isSimulated:!0,originalEvent:{}});r?oe.event.trigger(i,null,e):oe.event.dispatch.call(e,i),i.isDefaultPrevented()&&n.preventDefault()}},oe.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},oe.Event=function(t,e){return this instanceof oe.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.getPreventDefault&&t.getPreventDefault()?s:a):this.type=t,e&&oe.extend(this,e),this.timeStamp=t&&t.timeStamp||oe.now(),this[oe.expando]=!0,void 0):new oe.Event(t,e)},oe.Event.prototype={isDefaultPrevented:a,isPropagationStopped:a,isImmediatePropagationStopped:a,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=s,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=s,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=s,this.stopPropagation()}},oe.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){oe.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,i=t.relatedTarget,o=t.handleObj;return(!i||i!==r&&!oe.contains(r,i))&&(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),oe.support.focusinBubbles||oe.each({focus:"focusin",blur:"focusout"},function(t,e){var n=0,r=function(t){oe.event.simulate(e,t.target,oe.event.fix(t),!0)};oe.event.special[e]={setup:function(){0===n++&&V.addEventListener(t,r,!0)},teardown:function(){0===--n&&V.removeEventListener(t,r,!0)}}}),oe.fn.extend({on:function(t,n,r,i,o){var s,u;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=e);for(u in t)this.on(u,n,r,t[u],o);return this}if(null==r&&null==i?(i=n,r=n=e):null==i&&("string"==typeof n?(i=r,r=e):(i=r,r=n,n=e)),i===!1)i=a;else if(!i)return this;return 1===o&&(s=i,i=function(t){return oe().off(t),s.apply(this,arguments)},i.guid=s.guid||(s.guid=oe.guid++)),this.each(function(){oe.event.add(this,t,i,r,n)})},one:function(t,e,n,r){return this.on(t,e,n,r,1)},off:function(t,n,r){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,oe(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(o in t)this.off(o,n,t[o]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=e),r===!1&&(r=a),this.each(function(){oe.event.remove(this,t,r,n)})},trigger:function(t,e){return this.each(function(){oe.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?oe.event.trigger(t,e,n,!0):void 0}});var Ee=/^.[^:#\[\.,]*$/,De=/^(?:parents|prev(?:Until|All))/,Ne=oe.expr.match.needsContext,Pe={children:!0,contents:!0,next:!0,prev:!0};oe.fn.extend({find:function(t){var e,n=[],r=this,i=r.length;if("string"!=typeof t)return this.pushStack(oe(t).filter(function(){for(e=0;i>e;e++)if(oe.contains(r[e],this))return!0}));for(e=0;i>e;e++)oe.find(t,r[e],n);return n=this.pushStack(i>1?oe.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},has:function(t){var e=oe(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(oe.contains(this,e[t]))return!0})},not:function(t){return this.pushStack(c(this,t||[],!0))},filter:function(t){return this.pushStack(c(this,t||[],!1))},is:function(t){return!!c(this,"string"==typeof t&&Ne.test(t)?oe(t):t||[],!1).length},closest:function(t,e){for(var n,r=0,i=this.length,o=[],s=Ne.test(t)||"string"!=typeof t?oe(t,e||this.context):0;i>r;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&oe.find.matchesSelector(n,t))){n=o.push(n);break}return this.pushStack(o.length>1?oe.unique(o):o)},index:function(t){return t?"string"==typeof t?ee.call(oe(t),this[0]):ee.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){var n="string"==typeof t?oe(t,e):oe.makeArray(t&&t.nodeType?[t]:t),r=oe.merge(this.get(),n);return this.pushStack(oe.unique(r))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),oe.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return oe.dir(t,"parentNode")},parentsUntil:function(t,e,n){return oe.dir(t,"parentNode",n)},next:function(t){return l(t,"nextSibling")},prev:function(t){return l(t,"previousSibling")},nextAll:function(t){return oe.dir(t,"nextSibling")},prevAll:function(t){return oe.dir(t,"previousSibling")},nextUntil:function(t,e,n){return oe.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return oe.dir(t,"previousSibling",n)},siblings:function(t){return oe.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return oe.sibling(t.firstChild)},contents:function(t){return oe.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:oe.merge([],t.childNodes)}},function(t,e){oe.fn[t]=function(n,r){var i=oe.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=oe.filter(r,i)),this.length>1&&(Pe[t]||oe.unique(i),De.test(t)&&i.reverse()),this.pushStack(i)}}),oe.extend({filter:function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?oe.find.matchesSelector(r,t)?[r]:[]:oe.find.matches(t,oe.grep(e,function(t){return 1===t.nodeType}))},dir:function(t,n,r){for(var i=[],o=r!==e;(t=t[n])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&oe(t).is(r))break;i.push(t)}return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}});var Ie=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ae=/<([\w:]+)/,Le=/<|&#?\w+;/,Me=/<(?:script|style|link)/i,$e=/^(?:checkbox|radio)$/i,Re=/checked\s*(?:[^=]|=\s*.checked.)/i,je=/^$|\/(?:java|ecma)script/i,qe=/^true\/(.*)/,Fe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,He={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};He.optgroup=He.option,He.tbody=He.tfoot=He.colgroup=He.caption=He.thead,He.th=He.td,oe.fn.extend({text:function(t){return oe.access(this,function(t){return t===e?oe.text(this):this.empty().append((this[0]&&this[0].ownerDocument||V).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=p(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=p(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,r=t?oe.filter(t,this):this,i=0;null!=(n=r[i]);i++)e||1!==n.nodeType||oe.cleanData(y(n)),n.parentNode&&(e&&oe.contains(n.ownerDocument,n)&&f(y(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(oe.cleanData(y(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return oe.clone(this,t,e)})},html:function(t){return oe.access(this,function(t){var n=this[0]||{},r=0,i=this.length;if(t===e&&1===n.nodeType)return n.innerHTML;if("string"==typeof t&&!Me.test(t)&&!He[(Ae.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Ie,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(oe.cleanData(y(n,!1)),n.innerHTML=t);n=0}catch(o){}}n&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=oe.map(this,function(t){return[t.nextSibling,t.parentNode]}),e=0;return this.domManip(arguments,function(n){var r=t[e++],i=t[e++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),oe(this).remove(),i.insertBefore(n,r))},!0),e?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e,n){t=K.apply([],t);var r,i,o,s,a,u,l=0,c=this.length,p=this,f=c-1,m=t[0],g=oe.isFunction(m);if(g||!(1>=c||"string"!=typeof m||oe.support.checkClone)&&Re.test(m))return this.each(function(r){var i=p.eq(r);g&&(t[0]=m.call(this,r,i.html())),i.domManip(t,e,n)});if(c&&(r=oe.buildFragment(t,this[0].ownerDocument,!1,!n&&this),i=r.firstChild,1===r.childNodes.length&&(r=i),i)){for(o=oe.map(y(r,"script"),h),s=o.length;c>l;l++)a=r,l!==f&&(a=oe.clone(a,!0,!0),s&&oe.merge(o,y(a,"script"))),e.call(this[l],a,l);if(s)for(u=o[o.length-1].ownerDocument,oe.map(o,d),l=0;s>l;l++)a=o[l],je.test(a.type||"")&&!ye.access(a,"globalEval")&&oe.contains(u,a)&&(a.src?oe._evalUrl(a.src):oe.globalEval(a.textContent.replace(Fe,"")))}return this}}),oe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){oe.fn[t]=function(t){for(var n,r=[],i=oe(t),o=i.length-1,s=0;o>=s;s++)n=s===o?this:this.clone(!0),oe(i[s])[e](n),Z.apply(r,n.get());return this.pushStack(r)}}),oe.extend({clone:function(t,e,n){var r,i,o,s,a=t.cloneNode(!0),u=oe.contains(t.ownerDocument,t);if(!(oe.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||oe.isXMLDoc(t)))for(s=y(a),o=y(t),r=0,i=o.length;i>r;r++)g(o[r],s[r]);if(e)if(n)for(o=o||y(t),s=s||y(a),r=0,i=o.length;i>r;r++)m(o[r],s[r]);else m(t,a);return s=y(a,"script"),s.length>0&&f(s,!u&&y(t,"script")),a},buildFragment:function(t,e,n,r){for(var i,o,s,a,u,l,c=0,p=t.length,h=e.createDocumentFragment(),d=[];p>c;c++)if(i=t[c],i||0===i)if("object"===oe.type(i))oe.merge(d,i.nodeType?[i]:i);else if(Le.test(i)){for(o=o||h.appendChild(e.createElement("div")),s=(Ae.exec(i)||["",""])[1].toLowerCase(),a=He[s]||He._default,o.innerHTML=a[1]+i.replace(Ie,"<$1></$2>")+a[2],l=a[0];l--;)o=o.firstChild;oe.merge(d,o.childNodes),o=h.firstChild,o.textContent=""}else d.push(e.createTextNode(i));for(h.textContent="",c=0;i=d[c++];)if((!r||-1===oe.inArray(i,r))&&(u=oe.contains(i.ownerDocument,i),o=y(h.appendChild(i),"script"),u&&f(o),n))for(l=0;i=o[l++];)je.test(i.type||"")&&n.push(i);return h},cleanData:function(t){for(var n,r,o,s,a,u,l=oe.event.special,c=0;(r=t[c])!==e;c++){if(i.accepts(r)&&(a=r[ye.expando],a&&(n=ye.cache[a]))){if(o=Object.keys(n.events||{}),o.length)for(u=0;(s=o[u])!==e;u++)l[s]?oe.event.remove(r,s):oe.removeEvent(r,s,n.handle);ye.cache[a]&&delete ye.cache[a]}delete me.cache[r[me.expando]]}},_evalUrl:function(t){return oe.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})
}}),oe.fn.extend({wrapAll:function(t){var e;return oe.isFunction(t)?this.each(function(e){oe(this).wrapAll(t.call(this,e))}):(this[0]&&(e=oe(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return oe.isFunction(t)?this.each(function(e){oe(this).wrapInner(t.call(this,e))}):this.each(function(){var e=oe(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=oe.isFunction(t);return this.each(function(n){oe(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){oe.nodeName(this,"body")||oe(this).replaceWith(this.childNodes)}).end()}});var ze,Be,We=/^(none|table(?!-c[ea]).+)/,Ve=/^margin/,Ue=new RegExp("^("+se+")(.*)$","i"),Xe=new RegExp("^("+se+")(?!px)[a-z%]+$","i"),Je=new RegExp("^([+-])=("+se+")","i"),Ge={BODY:"block"},Qe={position:"absolute",visibility:"hidden",display:"block"},Ye={letterSpacing:0,fontWeight:400},Ke=["Top","Right","Bottom","Left"],Ze=["Webkit","O","Moz","ms"];oe.fn.extend({css:function(t,n){return oe.access(this,function(t,n,r){var i,o,s={},a=0;if(oe.isArray(n)){for(i=b(t),o=n.length;o>a;a++)s[n[a]]=oe.css(t,n[a],!1,i);return s}return r!==e?oe.style(t,n,r):oe.css(t,n)},t,n,arguments.length>1)},show:function(){return w(this,!0)},hide:function(){return w(this)},toggle:function(t){var e="boolean"==typeof t;return this.each(function(){(e?t:_(this))?oe(this).show():oe(this).hide()})}}),oe.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=ze(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,n,r,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,s,a,u=oe.camelCase(n),l=t.style;return n=oe.cssProps[u]||(oe.cssProps[u]=v(l,u)),a=oe.cssHooks[n]||oe.cssHooks[u],r===e?a&&"get"in a&&(o=a.get(t,!1,i))!==e?o:l[n]:(s=typeof r,"string"===s&&(o=Je.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(oe.css(t,n)),s="number"),null==r||"number"===s&&isNaN(r)||("number"!==s||oe.cssNumber[u]||(r+="px"),oe.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(l[n]="inherit"),a&&"set"in a&&(r=a.set(t,r,i))===e||(l[n]=r)),void 0)}},css:function(t,n,r,i){var o,s,a,u=oe.camelCase(n);return n=oe.cssProps[u]||(oe.cssProps[u]=v(t.style,u)),a=oe.cssHooks[n]||oe.cssHooks[u],a&&"get"in a&&(o=a.get(t,!0,r)),o===e&&(o=ze(t,n,i)),"normal"===o&&n in Ye&&(o=Ye[n]),""===r||r?(s=parseFloat(o),r===!0||oe.isNumeric(s)?s||0:o):o}}),ze=function(t,n,r){var i,o,s,a=r||b(t),u=a?a.getPropertyValue(n)||a[n]:e,l=t.style;return a&&(""!==u||oe.contains(t.ownerDocument,t)||(u=oe.style(t,n)),Xe.test(u)&&Ve.test(n)&&(i=l.width,o=l.minWidth,s=l.maxWidth,l.minWidth=l.maxWidth=l.width=u,u=a.width,l.width=i,l.minWidth=o,l.maxWidth=s)),u},oe.each(["height","width"],function(t,e){oe.cssHooks[e]={get:function(t,n,r){return n?0===t.offsetWidth&&We.test(oe.css(t,"display"))?oe.swap(t,Qe,function(){return T(t,e,r)}):T(t,e,r):void 0},set:function(t,n,r){var i=r&&b(t);return x(t,n,r?k(t,e,r,oe.support.boxSizing&&"border-box"===oe.css(t,"boxSizing",!1,i),i):0)}}}),oe(function(){oe.support.reliableMarginRight||(oe.cssHooks.marginRight={get:function(t,e){return e?oe.swap(t,{display:"inline-block"},ze,[t,"marginRight"]):void 0}}),!oe.support.pixelPosition&&oe.fn.position&&oe.each(["top","left"],function(t,e){oe.cssHooks[e]={get:function(t,n){return n?(n=ze(t,e),Xe.test(n)?oe(t).position()[e]+"px":n):void 0}}})}),oe.expr&&oe.expr.filters&&(oe.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},oe.expr.filters.visible=function(t){return!oe.expr.filters.hidden(t)}),oe.each({margin:"",padding:"",border:"Width"},function(t,e){oe.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[t+Ke[r]+e]=o[r]||o[r-2]||o[0];return i}},Ve.test(t)||(oe.cssHooks[t+e].set=x)});var tn=/%20/g,en=/\[\]$/,nn=/\r?\n/g,rn=/^(?:submit|button|image|reset|file)$/i,on=/^(?:input|select|textarea|keygen)/i;oe.fn.extend({serialize:function(){return oe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=oe.prop(this,"elements");return t?oe.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!oe(this).is(":disabled")&&on.test(this.nodeName)&&!rn.test(t)&&(this.checked||!$e.test(t))}).map(function(t,e){var n=oe(this).val();return null==n?null:oe.isArray(n)?oe.map(n,function(t){return{name:e.name,value:t.replace(nn,"\r\n")}}):{name:e.name,value:n.replace(nn,"\r\n")}}).get()}}),oe.param=function(t,n){var r,i=[],o=function(t,e){e=oe.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(n===e&&(n=oe.ajaxSettings&&oe.ajaxSettings.traditional),oe.isArray(t)||t.jquery&&!oe.isPlainObject(t))oe.each(t,function(){o(this.name,this.value)});else for(r in t)O(r,t[r],n,o);return i.join("&").replace(tn,"+")},oe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){oe.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),oe.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var sn,an,un=oe.now(),ln=/\?/,cn=/#.*$/,pn=/([?&])_=[^&]*/,hn=/^(.*?):[ \t]*([^\r\n]*)$/gm,dn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,fn=/^(?:GET|HEAD)$/,mn=/^\/\//,yn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,gn=oe.fn.load,vn={},_n={},bn="*/".concat("*");try{an=W.href}catch(wn){an=V.createElement("a"),an.href="",an=an.href}sn=yn.exec(an.toLowerCase())||[],oe.fn.load=function(t,n,r){if("string"!=typeof t&&gn)return gn.apply(this,arguments);var i,o,s,a=this,u=t.indexOf(" ");return u>=0&&(i=t.slice(u),t=t.slice(0,u)),oe.isFunction(n)?(r=n,n=e):n&&"object"==typeof n&&(o="POST"),a.length>0&&oe.ajax({url:t,type:o,dataType:"html",data:n}).done(function(t){s=arguments,a.html(i?oe("<div>").append(oe.parseHTML(t)).find(i):t)}).complete(r&&function(t,e){a.each(r,s||[t.responseText,e,t])}),this},oe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){oe.fn[e]=function(t){return this.on(e,t)}}),oe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:an,type:"GET",isLocal:dn.test(sn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":bn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":oe.parseJSON,"text xml":oe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?N(N(t,oe.ajaxSettings),e):N(oe.ajaxSettings,t)},ajaxPrefilter:E(vn),ajaxTransport:E(_n),ajax:function(t,n){function r(t,n,r,a){var l,p,v,_,w,k=n;2!==b&&(b=2,u&&clearTimeout(u),i=e,s=a||"",x.readyState=t>0?4:0,l=t>=200&&300>t||304===t,r&&(_=P(h,x,r)),_=I(h,_,x,l),l?(h.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(oe.lastModified[o]=w),w=x.getResponseHeader("etag"),w&&(oe.etag[o]=w)),204===t||"HEAD"===h.type?k="nocontent":304===t?k="notmodified":(k=_.state,p=_.data,v=_.error,l=!v)):(v=k,(t||!k)&&(k="error",0>t&&(t=0))),x.status=t,x.statusText=(n||k)+"",l?m.resolveWith(d,[p,k,x]):m.rejectWith(d,[x,k,v]),x.statusCode(g),g=e,c&&f.trigger(l?"ajaxSuccess":"ajaxError",[x,h,l?p:v]),y.fireWith(d,[x,k]),c&&(f.trigger("ajaxComplete",[x,h]),--oe.active||oe.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=e),n=n||{};var i,o,s,a,u,l,c,p,h=oe.ajaxSetup({},n),d=h.context||h,f=h.context&&(d.nodeType||d.jquery)?oe(d):oe.event,m=oe.Deferred(),y=oe.Callbacks("once memory"),g=h.statusCode||{},v={},_={},b=0,w="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!a)for(a={};e=hn.exec(s);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return b||(t=_[n]=_[n]||t,v[t]=e),this},overrideMimeType:function(t){return b||(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)g[e]=[g[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||w;return i&&i.abort(e),r(0,e),this}};if(m.promise(x).complete=y.add,x.success=x.done,x.error=x.fail,h.url=((t||h.url||an)+"").replace(cn,"").replace(mn,sn[1]+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=oe.trim(h.dataType||"*").toLowerCase().match(ae)||[""],null==h.crossDomain&&(l=yn.exec(h.url.toLowerCase()),h.crossDomain=!(!l||l[1]===sn[1]&&l[2]===sn[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(sn[3]||("http:"===sn[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=oe.param(h.data,h.traditional)),D(vn,h,n,x),2===b)return x;c=h.global,c&&0===oe.active++&&oe.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!fn.test(h.type),o=h.url,h.hasContent||(h.data&&(o=h.url+=(ln.test(o)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=pn.test(o)?o.replace(pn,"$1_="+un++):o+(ln.test(o)?"&":"?")+"_="+un++)),h.ifModified&&(oe.lastModified[o]&&x.setRequestHeader("If-Modified-Since",oe.lastModified[o]),oe.etag[o]&&x.setRequestHeader("If-None-Match",oe.etag[o])),(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",h.contentType),x.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+bn+"; q=0.01":""):h.accepts["*"]);for(p in h.headers)x.setRequestHeader(p,h.headers[p]);if(h.beforeSend&&(h.beforeSend.call(d,x,h)===!1||2===b))return x.abort();w="abort";for(p in{success:1,error:1,complete:1})x[p](h[p]);if(i=D(_n,h,n,x)){x.readyState=1,c&&f.trigger("ajaxSend",[x,h]),h.async&&h.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},h.timeout));try{b=1,i.send(v,r)}catch(k){if(!(2>b))throw k;r(-1,k)}}else r(-1,"No Transport");return x},getJSON:function(t,e,n){return oe.get(t,e,n,"json")},getScript:function(t,n){return oe.get(t,e,n,"script")}}),oe.each(["get","post"],function(t,n){oe[n]=function(t,r,i,o){return oe.isFunction(r)&&(o=o||i,i=r,r=e),oe.ajax({url:t,type:n,dataType:o,data:r,success:i})}}),oe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return oe.globalEval(t),t}}}),oe.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),oe.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(r,i){e=oe("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),V.head.appendChild(e[0])},abort:function(){n&&n()}}}});var xn=[],kn=/(=)\?(?=&|$)|\?\?/;oe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=xn.pop()||oe.expando+"_"+un++;return this[t]=!0,t}}),oe.ajaxPrefilter("json jsonp",function(n,r,i){var o,s,a,u=n.jsonp!==!1&&(kn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&kn.test(n.data)&&"data");return u||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=oe.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,u?n[u]=n[u].replace(kn,"$1"+o):n.jsonp!==!1&&(n.url+=(ln.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return a||oe.error(o+" was not called"),a[0]},n.dataTypes[0]="json",s=t[o],t[o]=function(){a=arguments},i.always(function(){t[o]=s,n[o]&&(n.jsonpCallback=r.jsonpCallback,xn.push(o)),a&&oe.isFunction(s)&&s(a[0]),a=s=e}),"script"):void 0}),oe.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Tn=oe.ajaxSettings.xhr(),Sn={0:200,1223:204},Cn=0,On={};t.ActiveXObject&&oe(t).on("unload",function(){for(var t in On)On[t]();On=e}),oe.support.cors=!!Tn&&"withCredentials"in Tn,oe.support.ajax=Tn=!!Tn,oe.ajaxTransport(function(t){var n;return oe.support.cors||Tn&&!t.crossDomain?{send:function(r,i){var o,s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)a[o]=t.xhrFields[o];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(o in r)a.setRequestHeader(o,r[o]);n=function(t){return function(){n&&(delete On[s],n=a.onload=a.onerror=null,"abort"===t?a.abort():"error"===t?i(a.status||404,a.statusText):i(Sn[a.status]||a.status,a.statusText,"string"==typeof a.responseText?{text:a.responseText}:e,a.getAllResponseHeaders()))}},a.onload=n(),a.onerror=n("error"),n=On[s=Cn++]=n("abort"),a.send(t.hasContent&&t.data||null)},abort:function(){n&&n()}}:void 0});var En,Dn,Nn=/^(?:toggle|show|hide)$/,Pn=new RegExp("^(?:([+-])=|)("+se+")([a-z%]*)$","i"),In=/queueHooks$/,An=[R],Ln={"*":[function(t,e){var n=this.createTween(t,e),r=n.cur(),i=Pn.exec(e),o=i&&i[3]||(oe.cssNumber[t]?"":"px"),s=(oe.cssNumber[t]||"px"!==o&&+r)&&Pn.exec(oe.css(n.elem,t)),a=1,u=20;if(s&&s[3]!==o){o=o||s[3],i=i||[],s=+r||1;do a=a||".5",s/=a,oe.style(n.elem,t,s+o);while(a!==(a=n.cur()/r)&&1!==a&&--u)}return i&&(n.unit=o,n.start=+s||+r||0,n.end=i[1]?s+(i[1]+1)*i[2]:+i[2]),n}]};oe.Animation=oe.extend(M,{tweener:function(t,e){oe.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,r=0,i=t.length;i>r;r++)n=t[r],Ln[n]=Ln[n]||[],Ln[n].unshift(e)},prefilter:function(t,e){e?An.unshift(t):An.push(t)}}),oe.Tween=j,j.prototype={constructor:j,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||"swing",this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(oe.cssNumber[n]?"":"px")},cur:function(){var t=j.propHooks[this.prop];return t&&t.get?t.get(this):j.propHooks._default.get(this)},run:function(t){var e,n=j.propHooks[this.prop];return this.pos=e=this.options.duration?oe.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):j.propHooks._default.set(this),this}},j.prototype.init.prototype=j.prototype,j.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=oe.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){oe.fx.step[t.prop]?oe.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[oe.cssProps[t.prop]]||oe.cssHooks[t.prop])?oe.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},j.propHooks.scrollTop=j.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},oe.each(["toggle","show","hide"],function(t,e){var n=oe.fn[e];oe.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(q(e,!0),t,r,i)}}),oe.fn.extend({fadeTo:function(t,e,n,r){return this.filter(_).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=oe.isEmptyObject(t),o=oe.speed(e,n,r),s=function(){var e=M(this,oe.extend({},t),o);s.finish=function(){e.stop(!0)},(i||ye.get(this,"finish"))&&e.stop(!0)};return s.finish=s,i||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(t,n,r){var i=function(t){var e=t.stop;delete t.stop,e(r)};return"string"!=typeof t&&(r=n,n=t,t=e),n&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,n=null!=t&&t+"queueHooks",o=oe.timers,s=ye.get(this);if(n)s[n]&&s[n].stop&&i(s[n]);else for(n in s)s[n]&&s[n].stop&&In.test(n)&&i(s[n]);for(n=o.length;n--;)o[n].elem!==this||null!=t&&o[n].queue!==t||(o[n].anim.stop(r),e=!1,o.splice(n,1));(e||!r)&&oe.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=ye.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=oe.timers,s=r?r.length:0;for(n.finish=!0,oe.queue(this,t,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;s>e;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),oe.each({slideDown:q("show"),slideUp:q("hide"),slideToggle:q("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){oe.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),oe.speed=function(t,e,n){var r=t&&"object"==typeof t?oe.extend({},t):{complete:n||!n&&e||oe.isFunction(t)&&t,duration:t,easing:n&&e||e&&!oe.isFunction(e)&&e};return r.duration=oe.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in oe.fx.speeds?oe.fx.speeds[r.duration]:oe.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){oe.isFunction(r.old)&&r.old.call(this),r.queue&&oe.dequeue(this,r.queue)},r},oe.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},oe.timers=[],oe.fx=j.prototype.init,oe.fx.tick=function(){var t,n=oe.timers,r=0;for(En=oe.now();r<n.length;r++)t=n[r],t()||n[r]!==t||n.splice(r--,1);n.length||oe.fx.stop(),En=e},oe.fx.timer=function(t){t()&&oe.timers.push(t)&&oe.fx.start()},oe.fx.interval=13,oe.fx.start=function(){Dn||(Dn=setInterval(oe.fx.tick,oe.fx.interval))},oe.fx.stop=function(){clearInterval(Dn),Dn=null},oe.fx.speeds={slow:600,fast:200,_default:400},oe.fx.step={},oe.expr&&oe.expr.filters&&(oe.expr.filters.animated=function(t){return oe.grep(oe.timers,function(e){return t===e.elem}).length}),oe.fn.offset=function(t){if(arguments.length)return t===e?this:this.each(function(e){oe.offset.setOffset(this,t,e)});var n,r,i=this[0],o={top:0,left:0},s=i&&i.ownerDocument;if(s)return n=s.documentElement,oe.contains(n,i)?(typeof i.getBoundingClientRect!==B&&(o=i.getBoundingClientRect()),r=F(s),{top:o.top+r.pageYOffset-n.clientTop,left:o.left+r.pageXOffset-n.clientLeft}):o},oe.offset={setOffset:function(t,e,n){var r,i,o,s,a,u,l,c=oe.css(t,"position"),p=oe(t),h={};"static"===c&&(t.style.position="relative"),a=p.offset(),o=oe.css(t,"top"),u=oe.css(t,"left"),l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1,l?(r=p.position(),s=r.top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(u)||0),oe.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(h.top=e.top-a.top+s),null!=e.left&&(h.left=e.left-a.left+i),"using"in e?e.using.call(t,h):p.css(h)}},oe.fn.extend({position:function(){if(this[0]){var t,e,n=this[0],r={top:0,left:0};return"fixed"===oe.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),oe.nodeName(t[0],"html")||(r=t.offset()),r.top+=oe.css(t[0],"borderTopWidth",!0),r.left+=oe.css(t[0],"borderLeftWidth",!0)),{top:e.top-r.top-oe.css(n,"marginTop",!0),left:e.left-r.left-oe.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||U;t&&!oe.nodeName(t,"html")&&"static"===oe.css(t,"position");)t=t.offsetParent;return t||U})}}),oe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,r){var i="pageYOffset"===r;oe.fn[n]=function(o){return oe.access(this,function(n,o,s){var a=F(n);return s===e?a?a[r]:n[o]:(a?a.scrollTo(i?t.pageXOffset:s,i?s:t.pageYOffset):n[o]=s,void 0)},n,o,arguments.length,null)}}),oe.each({Height:"height",Width:"width"},function(t,n){oe.each({padding:"inner"+t,content:n,"":"outer"+t},function(r,i){oe.fn[i]=function(i,o){var s=arguments.length&&(r||"boolean"!=typeof i),a=r||(i===!0||o===!0?"margin":"border");return oe.access(this,function(n,r,i){var o;return oe.isWindow(n)?n.document.documentElement["client"+t]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+t],o["scroll"+t],n.body["offset"+t],o["offset"+t],o["client"+t])):i===e?oe.css(n,r,a):oe.style(n,r,i,a)},n,s?i:e,s,null)}})}),oe.fn.size=function(){return this.length},oe.fn.andSelf=oe.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=oe:"function"==typeof define&&define.amd&&define("jquery",[],function(){return oe}),"object"==typeof t&&"object"==typeof t.document&&(t.jQuery=t.$=oe)}(window),function(){var t=this,e=t._,n={},r=Array.prototype,i=Object.prototype,o=Function.prototype,s=r.push,a=r.slice,u=r.concat,l=i.toString,c=i.hasOwnProperty,p=r.forEach,h=r.map,d=r.reduce,f=r.reduceRight,m=r.filter,y=r.every,g=r.some,v=r.indexOf,_=r.lastIndexOf,b=Array.isArray,w=Object.keys,x=o.bind,k=function(t){return t instanceof k?t:this instanceof k?(this._wrapped=t,void 0):new k(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):t._=k,k.VERSION="1.4.4";var T=k.each=k.forEach=function(t,e,r){if(null!=t)if(p&&t.forEach===p)t.forEach(e,r);else if(t.length===+t.length){for(var i=0,o=t.length;o>i;i++)if(e.call(r,t[i],i,t)===n)return}else for(var s in t)if(k.has(t,s)&&e.call(r,t[s],s,t)===n)return};k.map=k.collect=function(t,e,n){var r=[];return null==t?r:h&&t.map===h?t.map(e,n):(T(t,function(t,i,o){r[r.length]=e.call(n,t,i,o)}),r)};var S="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),d&&t.reduce===d)return r&&(e=k.bind(e,r)),i?t.reduce(e,n):t.reduce(e);if(T(t,function(t,o,s){i?n=e.call(r,n,t,o,s):(n=t,i=!0)}),!i)throw new TypeError(S);return n},k.reduceRight=k.foldr=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),f&&t.reduceRight===f)return r&&(e=k.bind(e,r)),i?t.reduceRight(e,n):t.reduceRight(e);var o=t.length;if(o!==+o){var s=k.keys(t);o=s.length}if(T(t,function(a,u,l){u=s?s[--o]:--o,i?n=e.call(r,n,t[u],u,l):(n=t[u],i=!0)}),!i)throw new TypeError(S);return n},k.find=k.detect=function(t,e,n){var r;return C(t,function(t,i,o){return e.call(n,t,i,o)?(r=t,!0):void 0}),r},k.filter=k.select=function(t,e,n){var r=[];return null==t?r:m&&t.filter===m?t.filter(e,n):(T(t,function(t,i,o){e.call(n,t,i,o)&&(r[r.length]=t)}),r)},k.reject=function(t,e,n){return k.filter(t,function(t,r,i){return!e.call(n,t,r,i)},n)},k.every=k.all=function(t,e,r){e||(e=k.identity);var i=!0;return null==t?i:y&&t.every===y?t.every(e,r):(T(t,function(t,o,s){return(i=i&&e.call(r,t,o,s))?void 0:n}),!!i)};var C=k.some=k.any=function(t,e,r){e||(e=k.identity);var i=!1;return null==t?i:g&&t.some===g?t.some(e,r):(T(t,function(t,o,s){return i||(i=e.call(r,t,o,s))?n:void 0}),!!i)};k.contains=k.include=function(t,e){return null==t?!1:v&&t.indexOf===v?-1!=t.indexOf(e):C(t,function(t){return t===e})},k.invoke=function(t,e){var n=a.call(arguments,2),r=k.isFunction(e);return k.map(t,function(t){return(r?e:t[e]).apply(t,n)})},k.pluck=function(t,e){return k.map(t,function(t){return t[e]})},k.where=function(t,e,n){return k.isEmpty(e)?n?null:[]:k[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},k.findWhere=function(t,e){return k.where(t,e,!0)},k.max=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&k.isEmpty(t))return-1/0;var r={computed:-1/0,value:-1/0};return T(t,function(t,i,o){var s=e?e.call(n,t,i,o):t;s>=r.computed&&(r={value:t,computed:s})}),r.value},k.min=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&k.isEmpty(t))return 1/0;var r={computed:1/0,value:1/0};return T(t,function(t,i,o){var s=e?e.call(n,t,i,o):t;s<r.computed&&(r={value:t,computed:s})}),r.value},k.shuffle=function(t){var e,n=0,r=[];return T(t,function(t){e=k.random(n++),r[n-1]=r[e],r[e]=t}),r};var O=function(t){return k.isFunction(t)?t:function(e){return e[t]}};k.sortBy=function(t,e,n){var r=O(e);return k.pluck(k.map(t,function(t,e,i){return{value:t,index:e,criteria:r.call(n,t,e,i)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index<e.index?-1:1}),"value")};var E=function(t,e,n,r){var i={},o=O(e||k.identity);return T(t,function(e,s){var a=o.call(n,e,s,t);r(i,a,e)}),i};k.groupBy=function(t,e,n){return E(t,e,n,function(t,e,n){(k.has(t,e)?t[e]:t[e]=[]).push(n)})},k.countBy=function(t,e,n){return E(t,e,n,function(t,e){k.has(t,e)||(t[e]=0),t[e]++})},k.sortedIndex=function(t,e,n,r){n=null==n?k.identity:O(n);for(var i=n.call(r,e),o=0,s=t.length;s>o;){var a=o+s>>>1;n.call(r,t[a])<i?o=a+1:s=a}return o},k.toArray=function(t){return t?k.isArray(t)?a.call(t):t.length===+t.length?k.map(t,k.identity):k.values(t):[]},k.size=function(t){return null==t?0:t.length===+t.length?t.length:k.keys(t).length},k.first=k.head=k.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:a.call(t,0,e)},k.initial=function(t,e,n){return a.call(t,0,t.length-(null==e||n?1:e))},k.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},k.rest=k.tail=k.drop=function(t,e,n){return a.call(t,null==e||n?1:e)},k.compact=function(t){return k.filter(t,k.identity)};var D=function(t,e,n){return T(t,function(t){k.isArray(t)?e?s.apply(n,t):D(t,e,n):n.push(t)}),n};k.flatten=function(t,e){return D(t,e,[])},k.without=function(t){return k.difference(t,a.call(arguments,1))},k.uniq=k.unique=function(t,e,n,r){k.isFunction(e)&&(r=n,n=e,e=!1);var i=n?k.map(t,n,r):t,o=[],s=[];return T(i,function(n,r){(e?r&&s[s.length-1]===n:k.contains(s,n))||(s.push(n),o.push(t[r]))}),o},k.union=function(){return k.uniq(u.apply(r,arguments))},k.intersection=function(t){var e=a.call(arguments,1);return k.filter(k.uniq(t),function(t){return k.every(e,function(e){return k.indexOf(e,t)>=0})})},k.difference=function(t){var e=u.apply(r,a.call(arguments,1));return k.filter(t,function(t){return!k.contains(e,t)})},k.zip=function(){for(var t=a.call(arguments),e=k.max(k.pluck(t,"length")),n=new Array(e),r=0;e>r;r++)n[r]=k.pluck(t,""+r);return n},k.object=function(t,e){if(null==t)return{};for(var n={},r=0,i=t.length;i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},k.indexOf=function(t,e,n){if(null==t)return-1;var r=0,i=t.length;if(n){if("number"!=typeof n)return r=k.sortedIndex(t,e),t[r]===e?r:-1;r=0>n?Math.max(0,i+n):n}if(v&&t.indexOf===v)return t.indexOf(e,n);for(;i>r;r++)if(t[r]===e)return r;return-1},k.lastIndexOf=function(t,e,n){if(null==t)return-1;var r=null!=n;if(_&&t.lastIndexOf===_)return r?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var i=r?n:t.length;i--;)if(t[i]===e)return i;return-1},k.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=0,o=new Array(r);r>i;)o[i++]=t,t+=n;return o},k.bind=function(t,e){if(t.bind===x&&x)return x.apply(t,a.call(arguments,1));var n=a.call(arguments,2);return function(){return t.apply(e,n.concat(a.call(arguments)))}},k.partial=function(t){var e=a.call(arguments,1);return function(){return t.apply(this,e.concat(a.call(arguments)))}},k.bindAll=function(t){var e=a.call(arguments,1);return 0===e.length&&(e=k.functions(t)),T(e,function(e){t[e]=k.bind(t[e],t)}),t},k.memoize=function(t,e){var n={};return e||(e=k.identity),function(){var r=e.apply(this,arguments);return k.has(n,r)?n[r]:n[r]=t.apply(this,arguments)}},k.delay=function(t,e){var n=a.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},k.defer=function(t){return k.delay.apply(k,[t,1].concat(a.call(arguments,1)))},k.throttle=function(t,e){var n,r,i,o,s=0,a=function(){s=new Date,i=null,o=t.apply(n,r)};return function(){var u=new Date,l=e-(u-s);return n=this,r=arguments,0>=l?(clearTimeout(i),i=null,s=u,o=t.apply(n,r)):i||(i=setTimeout(a,l)),o}},k.debounce=function(t,e,n){var r,i;return function(){var o=this,s=arguments,a=function(){r=null,n||(i=t.apply(o,s))},u=n&&!r;return clearTimeout(r),r=setTimeout(a,e),u&&(i=t.apply(o,s)),i}},k.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},k.wrap=function(t,e){return function(){var n=[t];return s.apply(n,arguments),e.apply(this,n)}},k.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},k.after=function(t,e){return 0>=t?e():function(){return--t<1?e.apply(this,arguments):void 0}},k.keys=w||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)k.has(t,n)&&(e[e.length]=n);return e},k.values=function(t){var e=[];for(var n in t)k.has(t,n)&&e.push(t[n]);return e},k.pairs=function(t){var e=[];for(var n in t)k.has(t,n)&&e.push([n,t[n]]);return e},k.invert=function(t){var e={};for(var n in t)k.has(t,n)&&(e[t[n]]=n);return e},k.functions=k.methods=function(t){var e=[];for(var n in t)k.isFunction(t[n])&&e.push(n);return e.sort()},k.extend=function(t){return T(a.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},k.pick=function(t){var e={},n=u.apply(r,a.call(arguments,1));return T(n,function(n){n in t&&(e[n]=t[n])}),e},k.omit=function(t){var e={},n=u.apply(r,a.call(arguments,1));for(var i in t)k.contains(n,i)||(e[i]=t[i]);return e},k.defaults=function(t){return T(a.call(arguments,1),function(e){if(e)for(var n in e)null==t[n]&&(t[n]=e[n])}),t},k.clone=function(t){return k.isObject(t)?k.isArray(t)?t.slice():k.extend({},t):t},k.tap=function(t,e){return e(t),t};var N=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof k&&(t=t._wrapped),e instanceof k&&(e=e._wrapped);var i=l.call(t);if(i!=l.call(e))return!1;switch(i){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]==t)return r[o]==e;n.push(t),r.push(e);var s=0,a=!0;if("[object Array]"==i){if(s=t.length,a=s==e.length)for(;s--&&(a=N(t[s],e[s],n,r)););}else{var u=t.constructor,c=e.constructor;if(u!==c&&!(k.isFunction(u)&&u instanceof u&&k.isFunction(c)&&c instanceof c))return!1;for(var p in t)if(k.has(t,p)&&(s++,!(a=k.has(e,p)&&N(t[p],e[p],n,r))))break;if(a){for(p in e)if(k.has(e,p)&&!s--)break;a=!s}}return n.pop(),r.pop(),a};k.isEqual=function(t,e){return N(t,e,[],[])},k.isEmpty=function(t){if(null==t)return!0;if(k.isArray(t)||k.isString(t))return 0===t.length;for(var e in t)if(k.has(t,e))return!1;return!0},k.isElement=function(t){return!(!t||1!==t.nodeType)},k.isArray=b||function(t){return"[object Array]"==l.call(t)},k.isObject=function(t){return t===Object(t)},T(["Arguments","Function","String","Number","Date","RegExp"],function(t){k["is"+t]=function(e){return l.call(e)=="[object "+t+"]"}}),k.isArguments(arguments)||(k.isArguments=function(t){return!(!t||!k.has(t,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(t){return"function"==typeof t}),k.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},k.isNaN=function(t){return k.isNumber(t)&&t!=+t},k.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==l.call(t)},k.isNull=function(t){return null===t},k.isUndefined=function(t){return void 0===t},k.has=function(t,e){return c.call(t,e)},k.noConflict=function(){return t._=e,this},k.identity=function(t){return t},k.times=function(t,e,n){for(var r=Array(t),i=0;t>i;i++)r[i]=e.call(n,i);return r},k.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var P={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};P.unescape=k.invert(P.escape);var I={escape:new RegExp("["+k.keys(P.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(P.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(t){k[t]=function(e){return null==e?"":(""+e).replace(I[t],function(e){return P[t][e]
})}}),k.result=function(t,e){if(null==t)return null;var n=t[e];return k.isFunction(n)?n.call(t):n},k.mixin=function(t){T(k.functions(t),function(e){var n=k[e]=t[e];k.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),R.call(this,n.apply(k,t))}})};var A=0;k.uniqueId=function(t){var e=++A+"";return t?t+e:e},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},$=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(t,e,n){var r;n=k.defaults({},n,k.templateSettings);var i=new RegExp([(n.escape||L).source,(n.interpolate||L).source,(n.evaluate||L).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(i,function(e,n,r,i,a){return s+=t.slice(o,a).replace($,function(t){return"\\"+M[t]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(s+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(s+="';\n"+i+"\n__p+='"),o=a+e.length,e}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{r=new Function(n.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(e)return r(e,k);var u=function(t){return r.call(this,t,k)};return u.source="function("+(n.variable||"obj")+"){\n"+s+"}",u},k.chain=function(t){return k(t).chain()};var R=function(t){return this._chain?k(t).chain():t};k.mixin(k),T(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=r[t];k.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],R.call(this,n)}}),T(["concat","join","slice"],function(t){var e=r[t];k.prototype[t]=function(){return R.call(this,e.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(){var t,e=this,n=e.Backbone,r=[],i=r.push,o=r.slice,s=r.splice;t="undefined"!=typeof exports?exports:e.Backbone={},t.VERSION="1.0.0";var a=e._;a||"undefined"==typeof require||(a=require("underscore")),t.$=e.jQuery||e.Zepto||e.ender||e.$,t.noConflict=function(){return e.Backbone=n,this},t.emulateHTTP=!1,t.emulateJSON=!1;var u=t.Events={on:function(t,e,n){if(!c(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!c(this,"once",t,[e,n])||!e)return this;var r=this,i=a.once(function(){r.off(t,i),e.apply(this,arguments)});return i._callback=e,this.on(t,i,n)},off:function(t,e,n){var r,i,o,s,u,l,p,h;if(!this._events||!c(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(s=t?[t]:a.keys(this._events),u=0,l=s.length;l>u;u++)if(t=s[u],o=this._events[t]){if(this._events[t]=r=[],e||n)for(p=0,h=o.length;h>p;p++)i=o[p],(e&&e!==i.callback&&e!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!c(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&p(n,e),r&&p(r,arguments),this},stopListening:function(t,e,n){var r=this._listeners;if(!r)return this;var i=!e&&!n;"object"==typeof e&&(n=this),t&&((r={})[t._listenerId]=t);for(var o in r)r[o].off(e,n,this),i&&delete this._listeners[o];return this}},l=/\s+/,c=function(t,e,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)t[e].apply(t,[i,n[i]].concat(r));return!1}if(l.test(n)){for(var o=n.split(l),s=0,a=o.length;a>s;s++)t[e].apply(t,[o[s]].concat(r));return!1}return!0},p=function(t,e){var n,r=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e)}},h={listenTo:"on",listenToOnce:"once"};a.each(h,function(t,e){u[e]=function(e,n,r){var i=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=a.uniqueId("l"));return i[o]=e,"object"==typeof n&&(r=this),e[t](n,r,this),this}}),u.bind=u.on,u.unbind=u.off,a.extend(t,u);var d=t.Model=function(t,e){var n,r=t||{};e||(e={}),this.cid=a.uniqueId("c"),this.attributes={},a.extend(this,a.pick(e,f)),e.parse&&(r=this.parse(r,e)||{}),(n=a.result(this,"defaults"))&&(r=a.defaults({},r,n)),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)},f=["url","urlRoot","collection"];a.extend(d.prototype,u,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return a.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return a.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var r,i,o,s,u,l,c,p;if(null==t)return this;if("object"==typeof t?(i=t,n=e):(i={})[t]=e,n||(n={}),!this._validate(i,n))return!1;o=n.unset,u=n.silent,s=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=a.clone(this.attributes),this.changed={}),p=this.attributes,c=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)e=i[r],a.isEqual(p[r],e)||s.push(r),a.isEqual(c[r],e)?delete this.changed[r]:this.changed[r]=e,o?delete p[r]:p[r]=e;if(!u){s.length&&(this._pending=!0);for(var h=0,d=s.length;d>h;h++)this.trigger("change:"+s[h],this,p[s[h]],n)}if(l)return this;if(!u)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,a.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,a.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!a.isEmpty(this.changed):a.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?a.clone(this.changed):!1;var e,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in t)a.isEqual(r[i],e=t[i])||((n||(n={}))[i]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return a.clone(this._previousAttributes)},fetch:function(t){t=t?a.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(r){return e.set(e.parse(r,t),t)?(n&&n(e,r,t),e.trigger("sync",e,r,t),void 0):!1},R(this,t),this.sync("read",this,t)},save:function(t,e,n){var r,i,o,s=this.attributes;if(null==t||"object"==typeof t?(r=t,n=e):(r={})[t]=e,!(!r||n&&n.wait||this.set(r,n)))return!1;if(n=a.extend({validate:!0},n),!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=a.extend({},s,r)),void 0===n.parse&&(n.parse=!0);var u=this,l=n.success;return n.success=function(t){u.attributes=s;var e=u.parse(t,n);return n.wait&&(e=a.extend(r||{},e)),a.isObject(e)&&!u.set(e,n)?!1:(l&&l(u,t,n),u.trigger("sync",u,t,n),void 0)},R(this,n),i=this.isNew()?"create":n.patch?"patch":"update","patch"===i&&(n.attrs=r),o=this.sync(i,this,n),r&&n.wait&&(this.attributes=s),o},destroy:function(t){t=t?a.clone(t):{};var e=this,n=t.success,r=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&r(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;R(this,t);var i=this.sync("delete",this,t);return t.wait||r(),i},url:function(){var t=a.result(this,"urlRoot")||a.result(this.collection,"url")||$();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},a.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=a.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,a.extend(e||{},{validationError:n})),!1):!0}});var m=["keys","values","pairs","invert","pick","omit"];a.each(m,function(t){d.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.attributes),a[t].apply(a,e)}});var y=t.Collection=function(t,e){e||(e={}),e.url&&(this.url=e.url),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,a.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},v={add:!0,merge:!1,remove:!1};a.extend(y.prototype,u,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return t.sync.apply(this,arguments)},add:function(t,e){return this.set(t,a.defaults(e||{},v))},remove:function(t,e){t=a.isArray(t)?t.slice():[t],e||(e={});var n,r,i,o;for(n=0,r=t.length;r>n;n++)o=this.get(t[n]),o&&(delete this._byId[o.id],delete this._byId[o.cid],i=this.indexOf(o),this.models.splice(i,1),this.length--,e.silent||(e.index=i,o.trigger("remove",o,this,e)),this._removeReference(o));return this},set:function(t,e){e=a.defaults(e||{},g),e.parse&&(t=this.parse(t,e)),a.isArray(t)||(t=t?[t]:[]);var n,r,o,u,l,c=e.at,p=this.comparator&&null==c&&e.sort!==!1,h=a.isString(this.comparator)?this.comparator:null,d=[],f=[],m={};for(n=0,r=t.length;r>n;n++)(o=this._prepareModel(t[n],e))&&((u=this.get(o))?(e.remove&&(m[u.cid]=!0),e.merge&&(u.set(o.attributes,e),p&&!l&&u.hasChanged(h)&&(l=!0))):e.add&&(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,null!=o.id&&(this._byId[o.id]=o)));if(e.remove){for(n=0,r=this.length;r>n;++n)m[(o=this.models[n]).cid]||f.push(o);f.length&&this.remove(f,e)}if(d.length&&(p&&(l=!0),this.length+=d.length,null!=c?s.apply(this.models,[c,0].concat(d)):i.apply(this.models,d)),l&&this.sort({silent:!0}),e.silent)return this;for(n=0,r=d.length;r>n;n++)(o=d[n]).trigger("add",o,this,e);return l&&this.trigger("sort",this,e),this},reset:function(t,e){e||(e={});for(var n=0,r=this.models.length;r>n;n++)this._removeReference(this.models[n]);return e.previousModels=this.models,this._reset(),this.add(t,a.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,a.extend({at:this.length},e)),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,a.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(t,e){return this.models.slice(t,e)},get:function(t){return null==t?void 0:this._byId[null!=t.id?t.id:t.cid||t]},at:function(t){return this.models[t]},where:function(t,e){return a.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),a.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(a.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},sortedIndex:function(t,e,n){e||(e=this.comparator);var r=a.isFunction(e)?e:function(t){return t.get(e)};return a.sortedIndex(this.models,t,r,n)},pluck:function(t){return a.invoke(this.models,"get",t)},fetch:function(t){t=t?a.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(r){var i=t.reset?"reset":"set";n[i](r,t),e&&e(n,r,t),n.trigger("sync",n,r,t)},R(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?a.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,r=e.success;return e.success=function(i){e.wait&&n.add(t,e),r&&r(t,i,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof d)return t.collection||(t.collection=this),t;e||(e={}),e.collection=this;var n=new this.model(t,e);return n._validate(t,e)?n:(this.trigger("invalid",this,t,e),!1)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,r),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var _=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];a.each(_,function(t){y.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.models),a[t].apply(a,e)}});var b=["groupBy","countBy","sortBy"];a.each(b,function(t){y.prototype[t]=function(e,n){var r=a.isFunction(e)?e:function(t){return t.get(e)};return a[t](this.models,r,n)}});var w=t.View=function(t){this.cid=a.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},x=/^(\S+)\s*(.*)$/,k=["model","collection","el","id","attributes","className","tagName","events"];a.extend(w.prototype,u,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=a.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(a.isFunction(n)||(n=this[t[e]]),n){var r=e.match(x),i=r[1],o=r[2];n=a.bind(n,this),i+=".delegateEvents"+this.cid,""===o?this.$el.on(i,n):this.$el.on(i,o,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(t){this.options&&(t=a.extend({},a.result(this,"options"),t)),a.extend(this,a.pick(t,k)),this.options=t},_ensureElement:function(){if(this.el)this.setElement(a.result(this,"el"),!1);else{var e=a.extend({},a.result(this,"attributes"));this.id&&(e.id=a.result(this,"id")),this.className&&(e["class"]=a.result(this,"className"));var n=t.$("<"+a.result(this,"tagName")+">").attr(e);this.setElement(n,!1)}}}),t.sync=function(e,n,r){var i=T[e];a.defaults(r||(r={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:i,dataType:"json"};if(r.url||(o.url=a.result(n,"url")||$()),null!=r.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(o.contentType="application/json",o.data=JSON.stringify(r.attrs||n.toJSON(r))),r.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),r.emulateHTTP&&("PUT"===i||"DELETE"===i||"PATCH"===i)){o.type="POST",r.emulateJSON&&(o.data._method=i);var s=r.beforeSend;r.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",i),s?s.apply(this,arguments):void 0}}"GET"===o.type||r.emulateJSON||(o.processData=!1),"PATCH"!==o.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var u=r.xhr=t.ajax(a.extend(o,r));return n.trigger("request",n,u,r),u};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var S=t.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,O=/(\(\?)?:\w+/g,E=/\*\w+/g,D=/[\-{}\[\]+?.,\\\^$|#\s]/g;a.extend(S.prototype,u,{initialize:function(){},route:function(e,n,r){a.isRegExp(e)||(e=this._routeToRegExp(e)),a.isFunction(n)&&(r=n,n=""),r||(r=this[n]);var i=this;return t.history.route(e,function(o){var s=i._extractParameters(e,o);r&&r.apply(i,s),i.trigger.apply(i,["route:"+n].concat(s)),i.trigger("route",n,s),t.history.trigger("route",i,n,s)}),this},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=a.result(this,"routes");for(var t,e=a.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(D,"\\$&").replace(C,"(?:$1)?").replace(O,function(t,e){return e?t:"([^/]+)"}).replace(E,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return a.map(n,function(t){return t?decodeURIComponent(t):null})}});var N=t.History=function(){this.handlers=[],a.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},P=/^[#\/]|\s+$/g,I=/^\/+|\/+$/g,A=/msie [\w.]+/,L=/\/$/;N.started=!1,a.extend(N.prototype,u,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var n=this.root.replace(L,"");t.indexOf(n)||(t=t.substr(n.length))}else t=this.getHash();return t.replace(P,"")},start:function(e){if(N.started)throw new Error("Backbone.history has already been started");N.started=!0,this.options=a.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),r=document.documentMode,i=A.exec(navigator.userAgent.toLowerCase())&&(!r||7>=r);this.root=("/"+this.root+"/").replace(I,"/"),i&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!i?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var o=this.location,s=o.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&s&&o.hash&&(this.fragment=this.getHash().replace(P,""),this.history.replaceState({},document.title,this.root+this.fragment+o.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),N.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(t){var e=this.fragment=this.getFragment(t),n=a.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0});return n},navigate:function(t,e){if(!N.started)return!1;if(e&&e!==!0||(e={trigger:e}),t=this.getFragment(t||""),this.fragment!==t){this.fragment=t;var n=this.root+t;if(this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}e.trigger&&this.loadUrl(t)}},_updateHash:function(t,e,n){if(n){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}}),t.history=new N;var M=function(t,e){var n,r=this;n=t&&a.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},a.extend(n,r,e);var i=function(){this.constructor=n};return i.prototype=r.prototype,n.prototype=new i,t&&a.extend(n.prototype,t),n.__super__=r.prototype,n};d.extend=y.extend=S.extend=w.extend=N.extend=M;var $=function(){throw new Error('A "url" property or function must be specified')},R=function(t,e){var n=e.error;e.error=function(r){n&&n(t,r,e),t.trigger("error",t,r,e)}}}.call(this),function(){require.define({jquery:function(t,e,n){return n.exports=jQuery},underscore:function(t,e,n){return n.exports=_},backbone:function(t,e,n){return n.exports=Backbone}})}.call(this);var Handlebars={};!function(t,e){t.VERSION="1.0.0",t.COMPILER_REVISION=4,t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},t.helpers={},t.partials={};var n=Object.prototype.toString,r="[object Function]",i="[object Object]";t.registerHelper=function(e,r,o){if(n.call(e)===i){if(o||r)throw new t.Exception("Arg not supported with multiple helpers");t.Utils.extend(this.helpers,e)}else o&&(r.not=o),this.helpers[e]=r},t.registerPartial=function(e,r){n.call(e)===i?t.Utils.extend(this.partials,e):this.partials[e]=r},t.registerHelper("helperMissing",function(t){if(2===arguments.length)return e;throw new Error("Missing helper: '"+t+"'")}),t.registerHelper("blockHelperMissing",function(e,i){var o=i.inverse||function(){},s=i.fn,a=n.call(e);return a===r&&(e=e.call(this)),e===!0?s(this):e===!1||null==e?o(this):"[object Array]"===a?e.length>0?t.helpers.each(e,i):o(this):s(e)}),t.K=function(){},t.createFrame=Object.create||function(e){t.K.prototype=e;var n=new t.K;return t.K.prototype=null,n},t.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(e,n){if(t.logger.level<=e){var r=t.logger.methodMap[e];"undefined"!=typeof console&&console[r]&&console[r].call(console,n)}}},t.log=function(e,n){t.logger.log(e,n)},t.registerHelper("each",function(e,i){var o,s=i.fn,a=i.inverse,u=0,l="",c=n.call(e);if(c===r&&(e=e.call(this)),i.data&&(o=t.createFrame(i.data)),e&&"object"==typeof e)if(e instanceof Array)for(var p=e.length;p>u;u++)o&&(o.index=u),l+=s(e[u],{data:o});else for(var h in e)e.hasOwnProperty(h)&&(o&&(o.key=h),l+=s(e[h],{data:o}),u++);return 0===u&&(l=a(this)),l}),t.registerHelper("if",function(e,i){var o=n.call(e);return o===r&&(e=e.call(this)),!e||t.Utils.isEmpty(e)?i.inverse(this):i.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn})}),t.registerHelper("with",function(e,i){var o=n.call(e);return o===r&&(e=e.call(this)),t.Utils.isEmpty(e)?void 0:i.fn(e)}),t.registerHelper("log",function(e,n){var r=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(r,e)});var o=["description","fileName","lineNumber","message","name","number","stack"];t.Exception=function(){for(var t=Error.prototype.constructor.apply(this,arguments),e=0;e<o.length;e++)this[o[e]]=t[o[e]]},t.Exception.prototype=new Error,t.SafeString=function(t){this.string=t},t.SafeString.prototype.toString=function(){return this.string.toString()};var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},a=/[&<>"'`]/g,u=/[&<>"'`]/,l=function(t){return s[t]||"&amp;"};t.Utils={extend:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},escapeExpression:function(e){return e instanceof t.SafeString?e.toString():null==e||e===!1?"":(e=e.toString(),u.test(e)?e.replace(a,l):e)},isEmpty:function(t){return t||0===t?"[object Array]"===n.call(t)&&0===t.length?!0:!1:!0}},t.VM={template:function(e){var n={escapeExpression:t.Utils.escapeExpression,invokePartial:t.VM.invokePartial,programs:[],program:function(e,n,r){var i=this.programs[e];return r?i=t.VM.program(e,n,r):i||(i=this.programs[e]=t.VM.program(e,n)),i},merge:function(e,n){var r=e||n;return e&&n&&(r={},t.Utils.extend(r,n),t.Utils.extend(r,e)),r},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(r,i){i=i||{};var o=e.call(n,t,r,i.helpers,i.partials,i.data),s=n.compilerInfo||[],a=s[0]||1,u=t.COMPILER_REVISION;if(a!==u){if(u>a){var l=t.REVISION_CHANGES[u],c=t.REVISION_CHANGES[a];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+l+") or downgrade your runtime to an older version ("+c+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+s[1]+")."}return o}},programWithDepth:function(t,e,n){var r=Array.prototype.slice.call(arguments,3),i=function(t,i){return i=i||{},e.apply(this,[t,i.data||n].concat(r))};return i.program=t,i.depth=r.length,i},program:function(t,e,n){var r=function(t,r){return r=r||{},e(t,r.data||n)};return r.program=t,r.depth=0,r},noop:function(){return""},invokePartial:function(n,r,i,o,s,a){var u={helpers:o,partials:s,data:a};if(n===e)throw new t.Exception("The partial "+r+" could not be found");if(n instanceof Function)return n(i,u);if(t.compile)return s[r]=t.compile(n,{data:a!==e}),s[r](i,u);throw new t.Exception("The partial "+r+" could not be compiled when running in runtime-only mode")}},t.template=t.VM.template}(Handlebars);var io="undefined"==typeof module?{}:module.exports;!function(){if(function(t,e){var n=t;n.version="0.9.10",n.protocol=1,n.transports=[],n.j=[],n.sockets={},n.connect=function(t,r){var i,o,s=n.util.parseUri(t);e&&e.location&&(s.protocol=s.protocol||e.location.protocol.slice(0,-1),s.host=s.host||(e.document?e.document.domain:e.location.hostname),s.port=s.port||e.location.port),i=n.util.uniqueUri(s);var a={host:s.host,secure:"https"==s.protocol,port:s.port||("https"==s.protocol?443:80),query:s.query||""};return n.util.merge(a,r),(a["force new connection"]||!n.sockets[i])&&(o=new n.Socket(a)),!a["force new connection"]&&o&&(n.sockets[i]=o),o=o||n.sockets[i],o.of(s.path.length>1?s.path:"")}}("object"==typeof module?module.exports:this.io={},this),function(t,e){var n=t.util={},r=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];n.parseUri=function(t){for(var e=r.exec(t||""),n={},o=14;o--;)n[i[o]]=e[o]||"";return n},n.uniqueUri=function(t){var n=t.protocol,r=t.host,i=t.port;return"document"in e?(r=r||document.domain,i=i||("https"==n&&"https:"!==document.location.protocol?443:document.location.port)):(r=r||"localhost",i||"https"!=n||(i=443)),(n||"http")+"://"+r+":"+(i||80)},n.query=function(t,e){var r=n.chunkQuery(t||""),i=[];n.merge(r,n.chunkQuery(e||""));for(var o in r)r.hasOwnProperty(o)&&i.push(o+"="+r[o]);return i.length?"?"+i.join("&"):""},n.chunkQuery=function(t){for(var e,n={},r=t.split("&"),i=0,o=r.length;o>i;++i)e=r[i].split("="),e[0]&&(n[e[0]]=e[1]);return n};var o=!1;n.load=function(t){return"document"in e&&"complete"===document.readyState||o?t():(n.on(e,"load",t,!1),void 0)},n.on=function(t,e,n,r){t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener&&t.addEventListener(e,n,r)},n.request=function(t){if(t&&"undefined"!=typeof XDomainRequest)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!t||n.ua.hasCORS))return new XMLHttpRequest;if(!t)try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}return null},"undefined"!=typeof window&&n.load(function(){o=!0}),n.defer=function(t){return n.ua.webkit&&"undefined"==typeof importScripts?(n.load(function(){setTimeout(t,100)}),void 0):t()},n.merge=function(t,e,r,i){var o,s=i||[],a="undefined"==typeof r?2:r;for(o in e)e.hasOwnProperty(o)&&n.indexOf(s,o)<0&&("object"==typeof t[o]&&a?n.merge(t[o],e[o],a-1,s):(t[o]=e[o],s.push(e[o])));return t},n.mixin=function(t,e){n.merge(t.prototype,e.prototype)},n.inherit=function(t,e){function n(){}n.prototype=e.prototype,t.prototype=new n},n.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},n.intersect=function(t,e){for(var r=[],i=t.length>e.length?t:e,o=t.length>e.length?e:t,s=0,a=o.length;a>s;s++)~n.indexOf(i,o[s])&&r.push(o[s]);return r},n.indexOf=function(t,e,n){for(var r=t.length,n=0>n?0>n+r?0:n+r:n||0;r>n&&t[n]!==e;n++);return n>=r?-1:n},n.toArray=function(t){for(var e=[],n=0,r=t.length;r>n;n++)e.push(t[n]);return e},n.ua={},n.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var t=new XMLHttpRequest}catch(e){return!1}return void 0!=t.withCredentials}(),n.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent),n.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)}("undefined"!=typeof io?io:module.exports,this),function(t,e){function n(){}t.EventEmitter=n,n.prototype.on=function(t,n){return this.$events||(this.$events={}),this.$events[t]?e.util.isArray(this.$events[t])?this.$events[t].push(n):this.$events[t]=[this.$events[t],n]:this.$events[t]=n,this},n.prototype.addListener=n.prototype.on,n.prototype.once=function(t,e){function n(){r.removeListener(t,n),e.apply(this,arguments)}var r=this;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,n){if(this.$events&&this.$events[t]){var r=this.$events[t];if(e.util.isArray(r)){for(var i=-1,o=0,s=r.length;s>o;o++)if(r[o]===n||r[o].listener&&r[o].listener===n){i=o;break}if(0>i)return this;r.splice(i,1),r.length||delete this.$events[t]}else(r===n||r.listener&&r.listener===n)&&delete this.$events[t]}return this},n.prototype.removeAllListeners=function(t){return void 0===t?(this.$events={},this):(this.$events&&this.$events[t]&&(this.$events[t]=null),this)},n.prototype.listeners=function(t){return this.$events||(this.$events={}),this.$events[t]||(this.$events[t]=[]),e.util.isArray(this.$events[t])||(this.$events[t]=[this.$events[t]]),this.$events[t]},n.prototype.emit=function(t){if(!this.$events)return!1;var n=this.$events[t];if(!n)return!1;var r=Array.prototype.slice.call(arguments,1);if("function"==typeof n)n.apply(this,r);else{if(!e.util.isArray(n))return!1;for(var i=n.slice(),o=0,s=i.length;s>o;o++)i[o].apply(this,r)}return!0}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(exports,nativeJSON){"use strict";function f(t){return 10>t?"0"+t:t}function date(t){return isFinite(t.valueOf())?t.getUTCFullYear()+"-"+f(t.getUTCMonth()+1)+"-"+f(t.getUTCDate())+"T"+f(t.getUTCHours())+":"+f(t.getUTCMinutes())+":"+f(t.getUTCSeconds())+"Z":null}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,r,i,o,s,a=gap,u=e[t];switch(u instanceof Date&&(u=date(t)),"function"==typeof rep&&(u=rep.call(e,t,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(u)){for(o=u.length,n=0;o>n;n+=1)s[n]=str(n,u)||"null";return i=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,i}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],i=str(r,u),i&&s.push(quote(r)+(gap?": ":":")+i));else for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(i=str(r,u),i&&s.push(quote(r)+(gap?": ":":")+i));return i=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,i}}if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};
var JSON=exports.JSON={},cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;JSON.stringify=function(t,e,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})},JSON.parse=function(text,reviver){function walk(t,e){var n,r,i=t[e];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),void 0!==r?i[n]=r:delete i[n]);return reviver.call(t,e,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof JSON?JSON:void 0),function(t,e){var n=t.parser={},r=n.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],i=n.reasons=["transport not supported","client not handshaken","unauthorized"],o=n.advice=["reconnect"],s=e.JSON,a=e.util.indexOf;n.encodePacket=function(t){var e=a(r,t.type),n=t.id||"",u=t.endpoint||"",l=t.ack,c=null;switch(t.type){case"error":var p=t.reason?a(i,t.reason):"",h=t.advice?a(o,t.advice):"";(""!==p||""!==h)&&(c=p+(""!==h?"+"+h:""));break;case"message":""!==t.data&&(c=t.data);break;case"event":var d={name:t.name};t.args&&t.args.length&&(d.args=t.args),c=s.stringify(d);break;case"json":c=s.stringify(t.data);break;case"connect":t.qs&&(c=t.qs);break;case"ack":c=t.ackId+(t.args&&t.args.length?"+"+s.stringify(t.args):"")}var f=[e,n+("data"==l?"+":""),u];return null!==c&&void 0!==c&&f.push(c),f.join(":")},n.encodePayload=function(t){var e="";if(1==t.length)return t[0];for(var n=0,r=t.length;r>n;n++){var i=t[n];e+=""+i.length+""+t[n]}return e};var u=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;n.decodePacket=function(t){var e=t.match(u);if(!e)return{};var n=e[2]||"",t=e[5]||"",a={type:r[e[1]],endpoint:e[4]||""};switch(n&&(a.id=n,a.ack=e[3]?"data":!0),a.type){case"error":var e=t.split("+");a.reason=i[e[0]]||"",a.advice=o[e[1]]||"";break;case"message":a.data=t||"";break;case"event":try{var l=s.parse(t);a.name=l.name,a.args=l.args}catch(c){}a.args=a.args||[];break;case"json":try{a.data=s.parse(t)}catch(c){}break;case"connect":a.qs=t||"";break;case"ack":var e=t.match(/^([0-9]+)(\+)?(.*)/);if(e&&(a.ackId=e[1],a.args=[],e[3]))try{a.args=e[3]?s.parse(e[3]):[]}catch(c){}break;case"disconnect":case"heartbeat":}return a},n.decodePayload=function(t){if(""==t.charAt(0)){for(var e=[],r=1,i="";r<t.length;r++)""==t.charAt(r)?(e.push(n.decodePacket(t.substr(r+1).substr(0,i))),r+=Number(i)+1,i=""):i+=t.charAt(r);return e}return[n.decodePacket(t)]}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(t,e){function n(t,e){this.socket=t,this.sessid=e}t.Transport=n,e.util.mixin(n,e.EventEmitter),n.prototype.heartbeats=function(){return!0},n.prototype.onData=function(t){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),""!==t){var n=e.parser.decodePayload(t);if(n&&n.length)for(var r=0,i=n.length;i>r;r++)this.onPacket(n[r])}return this},n.prototype.onPacket=function(t){return this.socket.setHeartbeatTimeout(),"heartbeat"==t.type?this.onHeartbeat():("connect"==t.type&&""==t.endpoint&&this.onConnect(),"error"==t.type&&"reconnect"==t.advice&&(this.isOpen=!1),this.socket.onPacket(t),this)},n.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var t=this;this.closeTimeout=setTimeout(function(){t.onDisconnect()},this.socket.closeTimeout)}},n.prototype.onDisconnect=function(){return this.isOpen&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},n.prototype.onConnect=function(){return this.socket.onConnect(),this},n.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},n.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},n.prototype.packet=function(t){this.send(e.parser.encodePacket(t))},n.prototype.onHeartbeat=function(){this.packet({type:"heartbeat"})},n.prototype.onOpen=function(){this.isOpen=!0,this.clearCloseTimeout(),this.socket.onOpen()},n.prototype.onClose=function(){this.isOpen=!1,this.socket.onClose(),this.onDisconnect()},n.prototype.prepareUrl=function(){var t=this.socket.options;return this.scheme()+"://"+t.host+":"+t.port+"/"+t.resource+"/"+e.protocol+"/"+this.name+"/"+this.sessid},n.prototype.ready=function(t,e){e.call(this)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(t,e,n){function r(t){if(this.options={port:80,secure:!1,document:"document"in n?document:!1,resource:"socket.io",transports:e.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!1,"auto connect":!0,"flash policy port":10843,manualFlush:!1},e.util.merge(this.options,t),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||e.util.ua.hasCORS)){var r=this;e.util.on(n,"beforeunload",function(){r.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function i(){}t.Socket=r,e.util.mixin(r,e.EventEmitter),r.prototype.of=function(t){return this.namespaces[t]||(this.namespaces[t]=new e.SocketNamespace(this,t),""!==t&&this.namespaces[t].packet({type:"connect"})),this.namespaces[t]},r.prototype.publish=function(){this.emit.apply(this,arguments);var t;for(var e in this.namespaces)this.namespaces.hasOwnProperty(e)&&(t=this.of(e),t.$emit.apply(t,arguments))},r.prototype.handshake=function(t){function n(e){e instanceof Error?(r.connecting=!1,r.onError(e.message)):t.apply(null,e.split(":"))}var r=this,o=this.options,s=["http"+(o.secure?"s":"")+":/",o.host+":"+o.port,o.resource,e.protocol,e.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!e.util.ua.hasCORS){var a=document.getElementsByTagName("script")[0],u=document.createElement("script");u.src=s+"&jsonp="+e.j.length,a.parentNode.insertBefore(u,a),e.j.push(function(t){n(t),u.parentNode.removeChild(u)})}else{var l=e.util.request();l.open("GET",s,!0),this.isXDomain()&&(l.withCredentials=!0),l.onreadystatechange=function(){4==l.readyState&&(l.onreadystatechange=i,200==l.status?n(l.responseText):403==l.status?r.onError(l.responseText):(r.connecting=!1,!r.reconnecting&&r.onError(l.responseText)))},l.send(null)}},r.prototype.getTransport=function(t){for(var n,r=t||this.transports,i=0;n=r[i];i++)if(e.Transport[n]&&e.Transport[n].check(this)&&(!this.isXDomain()||e.Transport[n].xdomainCheck(this)))return new e.Transport[n](this,this.sessionid);return null},r.prototype.connect=function(t){if(this.connecting)return this;var n=this;return n.connecting=!0,this.handshake(function(r,i,o,s){function a(t){return n.transport&&n.transport.clearTimeouts(),n.transport=n.getTransport(t),n.transport?(n.transport.ready(n,function(){n.connecting=!0,n.publish("connecting",n.transport.name),n.transport.open(),n.options["connect timeout"]&&(n.connectTimeoutTimer=setTimeout(function(){if(!n.connected&&(n.connecting=!1,n.options["try multiple transports"])){for(var t=n.transports;t.length>0&&t.splice(0,1)[0]!=n.transport.name;);t.length?a(t):n.publish("connect_failed")}},n.options["connect timeout"]))}),void 0):n.publish("connect_failed")}n.sessionid=r,n.closeTimeout=1e3*o,n.heartbeatTimeout=1e3*i,n.transports||(n.transports=n.origTransports=s?e.util.intersect(s.split(","),n.options.transports):n.options.transports),n.setHeartbeatTimeout(),a(n.transports),n.once("connect",function(){clearTimeout(n.connectTimeoutTimer),t&&"function"==typeof t&&t()})}),this},r.prototype.setHeartbeatTimeout=function(){if(clearTimeout(this.heartbeatTimeoutTimer),!this.transport||this.transport.heartbeats()){var t=this;this.heartbeatTimeoutTimer=setTimeout(function(){t.transport.onClose()},this.heartbeatTimeout)}},r.prototype.packet=function(t){return this.connected&&!this.doBuffer?this.transport.packet(t):this.buffer.push(t),this},r.prototype.setBuffer=function(t){this.doBuffer=t,!t&&this.connected&&this.buffer.length&&(this.options.manualFlush||this.flushBuffer())},r.prototype.flushBuffer=function(){this.transport.payload(this.buffer),this.buffer=[]},r.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this},r.prototype.disconnectSync=function(){var t=e.util.request(),n=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,e.protocol,"",this.sessionid].join("/")+"/?disconnect=1";t.open("GET",n,!1),t.send(null),this.onDisconnect("booted")},r.prototype.isXDomain=function(){var t=n.location.port||("https:"==n.location.protocol?443:80);return this.options.host!==n.location.hostname||this.options.port!=t},r.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},r.prototype.onOpen=function(){this.open=!0},r.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},r.prototype.onPacket=function(t){this.of(t.endpoint).onPacket(t)},r.prototype.onError=function(t){t&&t.advice&&"reconnect"===t.advice&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",t&&t.reason?t.reason:t)},r.prototype.onDisconnect=function(t){var e=this.connected,n=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(e||n)&&(this.transport.close(),this.transport.clearTimeouts(),e&&(this.publish("disconnect",t),"booted"!=t&&this.options.reconnect&&!this.reconnecting&&this.reconnect()))},r.prototype.reconnect=function(){function t(){if(n.connected){for(var t in n.namespaces)n.namespaces.hasOwnProperty(t)&&""!==t&&n.namespaces[t].packet({type:"connect"});n.publish("reconnect",n.transport.name,n.reconnectionAttempts)}clearTimeout(n.reconnectionTimer),n.removeListener("connect_failed",e),n.removeListener("connect",e),n.reconnecting=!1,delete n.reconnectionAttempts,delete n.reconnectionDelay,delete n.reconnectionTimer,delete n.redoTransports,n.options["try multiple transports"]=i}function e(){return n.reconnecting?n.connected?t():n.connecting&&n.reconnecting?n.reconnectionTimer=setTimeout(e,1e3):(n.reconnectionAttempts++>=r?n.redoTransports?(n.publish("reconnect_failed"),t()):(n.on("connect_failed",e),n.options["try multiple transports"]=!0,n.transports=n.origTransports,n.transport=n.getTransport(),n.redoTransports=!0,n.connect()):(n.reconnectionDelay<o&&(n.reconnectionDelay*=2),n.connect(),n.publish("reconnecting",n.reconnectionDelay,n.reconnectionAttempts),n.reconnectionTimer=setTimeout(e,n.reconnectionDelay)),void 0):void 0}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var n=this,r=this.options["max reconnection attempts"],i=this.options["try multiple transports"],o=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(e,this.reconnectionDelay),this.on("connect",e)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(t,e){function n(t,e){this.socket=t,this.name=e||"",this.flags={},this.json=new r(this,"json"),this.ackPackets=0,this.acks={}}function r(t,e){this.namespace=t,this.name=e}t.SocketNamespace=n,e.util.mixin(n,e.EventEmitter),n.prototype.$emit=e.EventEmitter.prototype.emit,n.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},n.prototype.packet=function(t){return t.endpoint=this.name,this.socket.packet(t),this.flags={},this},n.prototype.send=function(t,e){var n={type:this.flags.json?"json":"message",data:t};return"function"==typeof e&&(n.id=++this.ackPackets,n.ack=!0,this.acks[n.id]=e),this.packet(n)},n.prototype.emit=function(t){var e=Array.prototype.slice.call(arguments,1),n=e[e.length-1],r={type:"event",name:t};return"function"==typeof n&&(r.id=++this.ackPackets,r.ack="data",this.acks[r.id]=n,e=e.slice(0,e.length-1)),r.args=e,this.packet(r)},n.prototype.disconnect=function(){return""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},n.prototype.onPacket=function(t){function n(){r.packet({type:"ack",args:e.util.toArray(arguments),ackId:t.id})}var r=this;switch(t.type){case"connect":this.$emit("connect");break;case"disconnect":""===this.name?this.socket.onDisconnect(t.reason||"booted"):this.$emit("disconnect",t.reason);break;case"message":case"json":var i=["message",t.data];"data"==t.ack?i.push(n):t.ack&&this.packet({type:"ack",ackId:t.id}),this.$emit.apply(this,i);break;case"event":var i=[t.name].concat(t.args);"data"==t.ack&&i.push(n),this.$emit.apply(this,i);break;case"ack":this.acks[t.ackId]&&(this.acks[t.ackId].apply(this,t.args),delete this.acks[t.ackId]);break;case"error":t.advice?this.socket.onError(t):"unauthorized"==t.reason?this.$emit("connect_failed",t.reason):this.$emit("error",t.reason)}},r.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},r.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(t,e,n){function r(){e.Transport.apply(this,arguments)}t.websocket=r,e.util.inherit(r,e.Transport),r.prototype.name="websocket",r.prototype.open=function(){var t,r=e.util.query(this.socket.options.query),i=this;return t||(t=n.MozWebSocket||n.WebSocket),this.websocket=new t(this.prepareUrl()+r),this.websocket.onopen=function(){i.onOpen(),i.socket.setBuffer(!1)},this.websocket.onmessage=function(t){i.onData(t.data)},this.websocket.onclose=function(){i.onClose(),i.socket.setBuffer(!0)},this.websocket.onerror=function(t){i.onError(t)},this},r.prototype.send=e.util.ua.iDevice?function(t){var e=this;return setTimeout(function(){e.websocket.send(t)},0),this}:function(t){return this.websocket.send(t),this},r.prototype.payload=function(t){for(var e=0,n=t.length;n>e;e++)this.packet(t[e]);return this},r.prototype.close=function(){return this.websocket.close(),this},r.prototype.onError=function(t){this.socket.onError(t)},r.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},r.check=function(){return"WebSocket"in n&&!("__addTask"in WebSocket)||"MozWebSocket"in n},r.xdomainCheck=function(){return!0},e.transports.push("websocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(t,e){function n(){e.Transport.websocket.apply(this,arguments)}t.flashsocket=n,e.util.inherit(n,e.Transport.websocket),n.prototype.name="flashsocket",n.prototype.open=function(){var t=this,n=arguments;return WebSocket.__addTask(function(){e.Transport.websocket.prototype.open.apply(t,n)}),this},n.prototype.send=function(){var t=this,n=arguments;return WebSocket.__addTask(function(){e.Transport.websocket.prototype.send.apply(t,n)}),this},n.prototype.close=function(){return WebSocket.__tasks.length=0,e.Transport.websocket.prototype.close.call(this),this},n.prototype.ready=function(t,r){function i(){var e=t.options,i=e["flash policy port"],s=["http"+(e.secure?"s":"")+":/",e.host+":"+e.port,e.resource,"static/flashsocket","WebSocketMain"+(t.isXDomain()?"Insecure":"")+".swf"];n.loaded||("undefined"==typeof WEB_SOCKET_SWF_LOCATION&&(WEB_SOCKET_SWF_LOCATION=s.join("/")),843!==i&&WebSocket.loadFlashPolicyFile("xmlsocket://"+e.host+":"+i),WebSocket.__initialize(),n.loaded=!0),r.call(o)}var o=this;return document.body?i():(e.util.load(i),void 0)},n.check=function(){return"undefined"!=typeof WebSocket&&"__initialize"in WebSocket&&swfobject?swfobject.getFlashPlayerVersion().major>=10:!1},n.xdomainCheck=function(){return!0},"undefined"!=typeof window&&(WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0),e.transports.push("flashsocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),"undefined"!=typeof window)var swfobject=function(){function t(){if(!B){try{var t=$.getElementsByTagName("body")[0].appendChild(y("span"));t.parentNode.removeChild(t)}catch(e){return}B=!0;for(var n=q.length,r=0;n>r;r++)q[r]()}}function e(t){B?t():q[q.length]=t}function n(t){if(typeof M.addEventListener!=E)M.addEventListener("load",t,!1);else if(typeof $.addEventListener!=E)$.addEventListener("load",t,!1);else if(typeof M.attachEvent!=E)g(M,"onload",t);else if("function"==typeof M.onload){var e=M.onload;M.onload=function(){e(),t()}}else M.onload=t}function r(){j?i():o()}function i(){var t=$.getElementsByTagName("body")[0],e=y(D);e.setAttribute("type",I);var n=t.appendChild(e);if(n){var r=0;!function(){if(typeof n.GetVariable!=E){var i=n.GetVariable("$version");i&&(i=i.split(" ")[1].split(","),U.pv=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)])}else if(10>r)return r++,setTimeout(arguments.callee,10),void 0;t.removeChild(e),n=null,o()}()}else o()}function o(){var t=F.length;if(t>0)for(var e=0;t>e;e++){var n=F[e].id,r=F[e].callbackFn,i={success:!1,id:n};if(U.pv[0]>0){var o=m(n);if(o)if(!v(F[e].swfVersion)||U.wk&&U.wk<312)if(F[e].expressInstall&&a()){var c={};c.data=F[e].expressInstall,c.width=o.getAttribute("width")||"0",c.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(c.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(c.align=o.getAttribute("align"));for(var p={},h=o.getElementsByTagName("param"),d=h.length,f=0;d>f;f++)"movie"!=h[f].getAttribute("name").toLowerCase()&&(p[h[f].getAttribute("name")]=h[f].getAttribute("value"));u(c,p,n,r)}else l(o),r&&r(i);else b(n,!0),r&&(i.success=!0,i.ref=s(n),r(i))}else if(b(n,!0),r){var y=s(n);y&&typeof y.SetVariable!=E&&(i.success=!0,i.ref=y),r(i)}}}function s(t){var e=null,n=m(t);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=E)e=n;else{var r=n.getElementsByTagName(D)[0];r&&(e=r)}return e}function a(){return!W&&v("6.0.65")&&(U.win||U.mac)&&!(U.wk&&U.wk<312)}function u(t,e,n,r){W=!0,T=r||null,S={success:!1,id:n};var i=m(n);if(i){"OBJECT"==i.nodeName?(x=c(i),k=null):(x=i,k=n),t.id=A,(typeof t.width==E||!/%$/.test(t.width)&&parseInt(t.width,10)<310)&&(t.width="310"),(typeof t.height==E||!/%$/.test(t.height)&&parseInt(t.height,10)<137)&&(t.height="137"),$.title=$.title.slice(0,47)+" - Flash Player Installation";var o=U.ie&&U.win?["Active"].concat("").join("X"):"PlugIn",s="MMredirectURL="+M.location.toString().replace(/&/g,"%26")+"&MMplayerType="+o+"&MMdoctitle="+$.title;if(typeof e.flashvars!=E?e.flashvars+="&"+s:e.flashvars=s,U.ie&&U.win&&4!=i.readyState){var a=y("div");n+="SWFObjectNew",a.setAttribute("id",n),i.parentNode.insertBefore(a,i),i.style.display="none",function(){4==i.readyState?i.parentNode.removeChild(i):setTimeout(arguments.callee,10)}()}p(t,e,n)}}function l(t){if(U.ie&&U.win&&4!=t.readyState){var e=y("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(c(t),e),t.style.display="none",function(){4==t.readyState?t.parentNode.removeChild(t):setTimeout(arguments.callee,10)}()}else t.parentNode.replaceChild(c(t),t)}function c(t){var e=y("div");if(U.win&&U.ie)e.innerHTML=t.innerHTML;else{var n=t.getElementsByTagName(D)[0];if(n){var r=n.childNodes;if(r)for(var i=r.length,o=0;i>o;o++)1==r[o].nodeType&&"PARAM"==r[o].nodeName||8==r[o].nodeType||e.appendChild(r[o].cloneNode(!0))}}return e}function p(t,e,n){var r,i=m(n);if(U.wk&&U.wk<312)return r;if(i)if(typeof t.id==E&&(t.id=n),U.ie&&U.win){var o="";for(var s in t)t[s]!=Object.prototype[s]&&("data"==s.toLowerCase()?e.movie=t[s]:"styleclass"==s.toLowerCase()?o+=' class="'+t[s]+'"':"classid"!=s.toLowerCase()&&(o+=" "+s+'="'+t[s]+'"'));var a="";for(var u in e)e[u]!=Object.prototype[u]&&(a+='<param name="'+u+'" value="'+e[u]+'" />');i.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+o+">"+a+"</object>",H[H.length]=t.id,r=m(t.id)}else{var l=y(D);l.setAttribute("type",I);for(var c in t)t[c]!=Object.prototype[c]&&("styleclass"==c.toLowerCase()?l.setAttribute("class",t[c]):"classid"!=c.toLowerCase()&&l.setAttribute(c,t[c]));for(var p in e)e[p]!=Object.prototype[p]&&"movie"!=p.toLowerCase()&&h(l,p,e[p]);i.parentNode.replaceChild(l,i),r=l}return r}function h(t,e,n){var r=y("param");r.setAttribute("name",e),r.setAttribute("value",n),t.appendChild(r)}function d(t){var e=m(t);e&&"OBJECT"==e.nodeName&&(U.ie&&U.win?(e.style.display="none",function(){4==e.readyState?f(t):setTimeout(arguments.callee,10)}()):e.parentNode.removeChild(e))}function f(t){var e=m(t);if(e){for(var n in e)"function"==typeof e[n]&&(e[n]=null);e.parentNode.removeChild(e)}}function m(t){var e=null;try{e=$.getElementById(t)}catch(n){}return e}function y(t){return $.createElement(t)}function g(t,e,n){t.attachEvent(e,n),z[z.length]=[t,e,n]}function v(t){var e=U.pv,n=t.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,e[0]>n[0]||e[0]==n[0]&&e[1]>n[1]||e[0]==n[0]&&e[1]==n[1]&&e[2]>=n[2]?!0:!1}function _(t,e,n,r){if(!U.ie||!U.mac){var i=$.getElementsByTagName("head")[0];if(i){var o=n&&"string"==typeof n?n:"screen";if(r&&(C=null,O=null),!C||O!=o){var s=y("style");s.setAttribute("type","text/css"),s.setAttribute("media",o),C=i.appendChild(s),U.ie&&U.win&&typeof $.styleSheets!=E&&$.styleSheets.length>0&&(C=$.styleSheets[$.styleSheets.length-1]),O=o}U.ie&&U.win?C&&typeof C.addRule==D&&C.addRule(t,e):C&&typeof $.createTextNode!=E&&C.appendChild($.createTextNode(t+" {"+e+"}"))}}}function b(t,e){if(V){var n=e?"visible":"hidden";B&&m(t)?m(t).style.visibility=n:_("#"+t,"visibility:"+n)}}function w(t){var e=/[\\\"<>\.;]/,n=null!=e.exec(t);return n&&typeof encodeURIComponent!=E?encodeURIComponent(t):t}var x,k,T,S,C,O,E="undefined",D="object",N="Shockwave Flash",P="ShockwaveFlash.ShockwaveFlash",I="application/x-shockwave-flash",A="SWFObjectExprInst",L="onreadystatechange",M=window,$=document,R=navigator,j=!1,q=[r],F=[],H=[],z=[],B=!1,W=!1,V=!0,U=function(){var t=typeof $.getElementById!=E&&typeof $.getElementsByTagName!=E&&typeof $.createElement!=E,e=R.userAgent.toLowerCase(),n=R.platform.toLowerCase(),r=n?/win/.test(n):/win/.test(e),i=n?/mac/.test(n):/mac/.test(e),o=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,s=!1,a=[0,0,0],u=null;if(typeof R.plugins!=E&&typeof R.plugins[N]==D)u=R.plugins[N].description,!u||typeof R.mimeTypes!=E&&R.mimeTypes[I]&&!R.mimeTypes[I].enabledPlugin||(j=!0,s=!1,u=u.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),a[0]=parseInt(u.replace(/^(.*)\..*$/,"$1"),10),a[1]=parseInt(u.replace(/^.*\.(.*)\s.*$/,"$1"),10),a[2]=/[a-zA-Z]/.test(u)?parseInt(u.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof M[["Active"].concat("Object").join("X")]!=E)try{var l=new(window[["Active"].concat("Object").join("X")])(P);l&&(u=l.GetVariable("$version"),u&&(s=!0,u=u.split(" ")[1].split(","),a=[parseInt(u[0],10),parseInt(u[1],10),parseInt(u[2],10)]))}catch(c){}return{w3:t,pv:a,wk:o,ie:s,win:r,mac:i}}();return function(){U.w3&&((typeof $.readyState!=E&&"complete"==$.readyState||typeof $.readyState==E&&($.getElementsByTagName("body")[0]||$.body))&&t(),B||(typeof $.addEventListener!=E&&$.addEventListener("DOMContentLoaded",t,!1),U.ie&&U.win&&($.attachEvent(L,function(){"complete"==$.readyState&&($.detachEvent(L,arguments.callee),t())}),M==top&&function(){if(!B){try{$.documentElement.doScroll("left")}catch(e){return setTimeout(arguments.callee,0),void 0}t()}}()),U.wk&&function(){return B?void 0:/loaded|complete/.test($.readyState)?(t(),void 0):(setTimeout(arguments.callee,0),void 0)}(),n(t)))}(),function(){U.ie&&U.win&&window.attachEvent("onunload",function(){for(var t=z.length,e=0;t>e;e++)z[e][0].detachEvent(z[e][1],z[e][2]);for(var n=H.length,r=0;n>r;r++)d(H[r]);for(var i in U)U[i]=null;U=null;for(var o in swfobject)swfobject[o]=null;swfobject=null})}(),{registerObject:function(t,e,n,r){if(U.w3&&t&&e){var i={};i.id=t,i.swfVersion=e,i.expressInstall=n,i.callbackFn=r,F[F.length]=i,b(t,!1)}else r&&r({success:!1,id:t})},getObjectById:function(t){return U.w3?s(t):void 0},embedSWF:function(t,n,r,i,o,s,l,c,h,d){var f={success:!1,id:n};U.w3&&!(U.wk&&U.wk<312)&&t&&n&&r&&i&&o?(b(n,!1),e(function(){r+="",i+="";var e={};if(h&&typeof h===D)for(var m in h)e[m]=h[m];e.data=t,e.width=r,e.height=i;var y={};if(c&&typeof c===D)for(var g in c)y[g]=c[g];if(l&&typeof l===D)for(var _ in l)typeof y.flashvars!=E?y.flashvars+="&"+_+"="+l[_]:y.flashvars=_+"="+l[_];if(v(o)){var w=p(e,y,n);e.id==n&&b(n,!0),f.success=!0,f.ref=w}else{if(s&&a())return e.data=s,u(e,y,n,d),void 0;b(n,!0)}d&&d(f)})):d&&d(f)},switchOffAutoHideShow:function(){V=!1},ua:U,getFlashPlayerVersion:function(){return{major:U.pv[0],minor:U.pv[1],release:U.pv[2]}},hasFlashPlayerVersion:v,createSWF:function(t,e,n){return U.w3?p(t,e,n):void 0},showExpressInstall:function(t,e,n,r){U.w3&&a()&&u(t,e,n,r)},removeSWF:function(t){U.w3&&d(t)},createCSS:function(t,e,n,r){U.w3&&_(t,e,n,r)},addDomLoadEvent:e,addLoadEvent:n,getQueryParamValue:function(t){var e=$.location.search||$.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),null==t)return w(e);for(var n=e.split("&"),r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==t)return w(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(W){var t=m(A);t&&x&&(t.parentNode.replaceChild(x,t),k&&(b(k,!0),U.ie&&U.win&&(x.style.display="block")),T&&T(S)),W=!1}}}}();!function(){if("undefined"!=typeof window&&!window.WebSocket){var t=window.console;if(t&&t.log&&t.error||(t={log:function(){},error:function(){}}),!swfobject.hasFlashPlayerVersion("10.0.0"))return t.error("Flash Player >= 10.0.0 is required."),void 0;"file:"==location.protocol&&t.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),WebSocket=function(t,e,n,r,i){var o=this;o.__id=WebSocket.__nextId++,WebSocket.__instances[o.__id]=o,o.readyState=WebSocket.CONNECTING,o.bufferedAmount=0,o.__events={},e?"string"==typeof e&&(e=[e]):e=[],setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(o.__id,t,e,n||null,r||0,i||null)})},0)},WebSocket.prototype.send=function(t){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";var e=WebSocket.__flash.send(this.__id,encodeURIComponent(t));return 0>e?!0:(this.bufferedAmount+=e,!1)},WebSocket.prototype.close=function(){this.readyState!=WebSocket.CLOSED&&this.readyState!=WebSocket.CLOSING&&(this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id))},WebSocket.prototype.addEventListener=function(t,e){t in this.__events||(this.__events[t]=[]),this.__events[t].push(e)},WebSocket.prototype.removeEventListener=function(t,e){if(t in this.__events)for(var n=this.__events[t],r=n.length-1;r>=0;--r)if(n[r]===e){n.splice(r,1);break}},WebSocket.prototype.dispatchEvent=function(t){for(var e=this.__events[t.type]||[],n=0;n<e.length;++n)e[n](t);var r=this["on"+t.type];r&&r(t)},WebSocket.prototype.__handleEvent=function(t){"readyState"in t&&(this.readyState=t.readyState),"protocol"in t&&(this.protocol=t.protocol);var e;if("open"==t.type||"error"==t.type)e=this.__createSimpleEvent(t.type);else if("close"==t.type)e=this.__createSimpleEvent("close");else{if("message"!=t.type)throw"unknown event type: "+t.type;var n=decodeURIComponent(t.message);e=this.__createMessageEvent("message",n)}this.dispatchEvent(e)},WebSocket.prototype.__createSimpleEvent=function(t){if(document.createEvent&&window.Event){var e=document.createEvent("Event");return e.initEvent(t,!1,!1),e}return{type:t,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=function(t,e){if(document.createEvent&&window.MessageEvent&&!window.opera){var n=document.createEvent("MessageEvent");return n.initMessageEvent("message",!1,!1,e,null,null,window,null),n}return{type:t,data:e,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__flash=null,WebSocket.__instances={},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(t){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(t)})},WebSocket.__initialize=function(){if(!WebSocket.__flash){if(WebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation),!window.WEB_SOCKET_SWF_LOCATION)return t.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf"),void 0;var e=document.createElement("div");e.id="webSocketContainer",e.style.position="absolute",WebSocket.__isFlashLite()?(e.style.left="0px",e.style.top="0px"):(e.style.left="-100px",e.style.top="-100px");var n=document.createElement("div");n.id="webSocketFlash",e.appendChild(n),document.body.appendChild(e),swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(e){e.success||t.error("[WebSocket] swfobject.embedSWF failed")})}},WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash"),WebSocket.__flash.setCallerUrl(location.href),WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var t=0;t<WebSocket.__tasks.length;++t)WebSocket.__tasks[t]();WebSocket.__tasks=[]},0)},WebSocket.__onFlashEvent=function(){return setTimeout(function(){try{for(var e=WebSocket.__flash.receiveEvents(),n=0;n<e.length;++n)WebSocket.__instances[e[n].webSocketId].__handleEvent(e[n])}catch(r){t.error(r)}},0),!0},WebSocket.__log=function(e){t.log(decodeURIComponent(e))},WebSocket.__error=function(e){t.error(decodeURIComponent(e))},WebSocket.__addTask=function(t){WebSocket.__flash?t():WebSocket.__tasks.push(t)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var t=window.navigator.mimeTypes["application/x-shockwave-flash"];return t&&t.enabledPlugin&&t.enabledPlugin.filename?t.enabledPlugin.filename.match(/flashlite/i)?!0:!1:!1},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||(window.addEventListener?window.addEventListener("load",function(){WebSocket.__initialize()},!1):window.attachEvent("onload",function(){WebSocket.__initialize()}))}}(),function(t,e,n){function r(t){t&&(e.Transport.apply(this,arguments),this.sendBuffer=[])}function i(){}t.XHR=r,e.util.inherit(r,e.Transport),r.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},r.prototype.payload=function(t){for(var n=[],r=0,i=t.length;i>r;r++)n.push(e.parser.encodePacket(t[r]));this.send(e.parser.encodePayload(n))},r.prototype.send=function(t){return this.post(t),this},r.prototype.post=function(t){function e(){4==this.readyState&&(this.onreadystatechange=i,o.posting=!1,200==this.status?o.socket.setBuffer(!1):o.onClose())}function r(){this.onload=i,o.socket.setBuffer(!1)}var o=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),n.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=r:this.sendXHR.onreadystatechange=e,this.sendXHR.send(t)},r.prototype.close=function(){return this.onClose(),this
},r.prototype.request=function(t){var n=e.util.request(this.socket.isXDomain()),r=e.util.query(this.socket.options.query,"t="+ +new Date);if(n.open(t||"GET",this.prepareUrl()+r,!0),"POST"==t)try{n.setRequestHeader?n.setRequestHeader("Content-type","text/plain;charset=UTF-8"):n.contentType="text/plain"}catch(i){}return n},r.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},r.check=function(t,r){try{var i=e.util.request(r),o=n.XDomainRequest&&i instanceof XDomainRequest,s=t&&t.options&&t.options.secure?"https:":"http:",a=s!=n.location.protocol;if(i&&(!o||!a))return!0}catch(u){}return!1},r.xdomainCheck=function(t){return r.check(t,!0)}}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(t,e){function n(){e.Transport.XHR.apply(this,arguments)}t.htmlfile=n,e.util.inherit(n,e.Transport.XHR),n.prototype.name="htmlfile",n.prototype.get=function(){this.doc=new(window[["Active"].concat("Object").join("X")])("htmlfile"),this.doc.open(),this.doc.write("<html></html>"),this.doc.close(),this.doc.parentWindow.s=this;var t=this.doc.createElement("div");t.className="socketio",this.doc.body.appendChild(t),this.iframe=this.doc.createElement("iframe"),t.appendChild(this.iframe);var n=this,r=e.util.query(this.socket.options.query,"t="+ +new Date);this.iframe.src=this.prepareUrl()+r,e.util.on(window,"unload",function(){n.destroy()})},n.prototype._=function(t,e){this.onData(t);try{var n=e.getElementsByTagName("script")[0];n.parentNode.removeChild(n)}catch(r){}},n.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(t){}this.doc=null,this.iframe.parentNode.removeChild(this.iframe),this.iframe=null,CollectGarbage()}},n.prototype.close=function(){return this.destroy(),e.Transport.XHR.prototype.close.call(this)},n.check=function(t){if("undefined"!=typeof window&&["Active"].concat("Object").join("X")in window)try{var n=new(window[["Active"].concat("Object").join("X")])("htmlfile");return n&&e.Transport.XHR.check(t)}catch(r){}return!1},n.xdomainCheck=function(){return!1},e.transports.push("htmlfile")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(t,e,n){function r(){e.Transport.XHR.apply(this,arguments)}function i(){}t["xhr-polling"]=r,e.util.inherit(r,e.Transport.XHR),e.util.merge(r,e.Transport.XHR),r.prototype.name="xhr-polling",r.prototype.heartbeats=function(){return!1},r.prototype.open=function(){var t=this;return e.Transport.XHR.prototype.open.call(t),!1},r.prototype.get=function(){function t(){4==this.readyState&&(this.onreadystatechange=i,200==this.status?(o.onData(this.responseText),o.get()):o.onClose())}function e(){this.onload=i,this.onerror=i,o.onData(this.responseText),o.get()}function r(){o.onClose()}if(this.isOpen){var o=this;this.xhr=this.request(),n.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=e,this.xhr.onerror=r):this.xhr.onreadystatechange=t,this.xhr.send(null)}},r.prototype.onClose=function(){if(e.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=i;try{this.xhr.abort()}catch(t){}this.xhr=null}},r.prototype.ready=function(t,n){var r=this;e.util.defer(function(){n.call(r)})},e.transports.push("xhr-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(t,e,n){function r(){e.Transport["xhr-polling"].apply(this,arguments),this.index=e.j.length;var t=this;e.j.push(function(e){t._(e)})}var i=n.document&&"MozAppearance"in n.document.documentElement.style;t["jsonp-polling"]=r,e.util.inherit(r,e.Transport["xhr-polling"]),r.prototype.name="jsonp-polling",r.prototype.post=function(t){function n(){r(),i.socket.setBuffer(!1)}function r(){i.iframe&&i.form.removeChild(i.iframe);try{s=document.createElement('<iframe name="'+i.iframeId+'">')}catch(t){s=document.createElement("iframe"),s.name=i.iframeId}s.id=i.iframeId,i.form.appendChild(s),i.iframe=s}var i=this,o=e.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var s,a=document.createElement("form"),u=document.createElement("textarea"),l=this.iframeId="socketio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="0px",a.style.left="0px",a.style.display="none",a.target=l,a.method="POST",a.setAttribute("accept-charset","utf-8"),u.name="d",a.appendChild(u),document.body.appendChild(a),this.form=a,this.area=u}this.form.action=this.prepareUrl()+o,r(),this.area.value=e.JSON.stringify(t);try{this.form.submit()}catch(c){}this.iframe.attachEvent?s.onreadystatechange=function(){"complete"==i.iframe.readyState&&n()}:this.iframe.onload=n,this.socket.setBuffer(!0)},r.prototype.get=function(){var t=this,n=document.createElement("script"),r=e.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),n.async=!0,n.src=this.prepareUrl()+r,n.onerror=function(){t.onClose()};var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(n,o),this.script=n,i&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},r.prototype._=function(t){return this.onData(t),this.isOpen&&this.get(),this},r.prototype.ready=function(t,n){var r=this;return i?(e.util.load(function(){n.call(r)}),void 0):n.call(this)},r.check=function(){return"document"in n},r.xdomainCheck=function(){return!0},e.transports.push("jsonp-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this)}(),function(t){function e(e,n){function r(t){return le.preferFlash&&ie&&!le.ignoreFlash&&"undefined"!=typeof le.flash[t]&&le.flash[t]}function i(t){return function(e){var n,r=this._t;return r&&r._a?n=t.call(this,e):(r&&r.id?le._wD(de+"ignoring "+e.type+": "+r.id):le._wD(de+"ignoring "+e.type),n=null),n}}this.setupOptions={url:e||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!0,noSWFCache:!1},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=n||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20120624",this.version=null,this.movieURL=null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.hasHTML5=function(){try{return"undefined"!=typeof Audio&&"undefined"!=typeof(new Audio).canPlayType}catch(t){return!1}}(),this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var o,s,a,u,l,c,p,h,d,f,m,y,g,v,_,b,w,x,k,T,S,C,O,E,D,N,P,I,A,L,M,$,R,j,q,F,H,z,B,W,V,U,X,J,G,Q,Y,K,Z,te,ee,ne,re,ie,oe,se,ae,ue,le=this,ce=null,pe="soundManager",he=pe+"::",de="HTML5::",fe=navigator.userAgent,me=t,ye=me.location.href.toString(),ge=document,ve=[],_e=!0,be=!1,we=!1,xe=!1,ke=!1,Te=!1,Se=0,Ce=["log","info","warn","error"],Oe=8,Ee=null,De=null,Ne=!1,Pe=!1,Ie=0,Ae=null,Le=null,Me=Array.prototype.slice,$e=!1,Re=fe.match(/(ipad|iphone|ipod)/i),je=fe.match(/msie/i),qe=fe.match(/webkit/i),Fe=fe.match(/safari/i)&&!fe.match(/chrome/i),He=fe.match(/opera/i),ze=fe.match(/(mobile|pre\/|xoom)/i)||Re,Be=!ye.match(/usehtml5audio/i)&&!ye.match(/sm2\-ignorebadua/i)&&Fe&&!fe.match(/silk/i)&&fe.match(/OS X 10_6_([3-7])/i),We="undefined"!=typeof console&&"undefined"!=typeof console.log,Ve="undefined"!=typeof ge.hasFocus?ge.hasFocus():null,Ue=Fe&&("undefined"==typeof ge.hasFocus||!ge.hasFocus()),Xe=!Ue,Je=/(mp3|mp4|mpa|m4a)/i,Ge="about:blank",Qe=ge.location?ge.location.protocol.match(/http/i):null,Ye=Qe?"":"http://",Ke=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|mp4v|3gp|3g2)\s*(?:$|;)/i,Ze=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","mp4v","3gp","3g2"],tn=new RegExp("\\.("+Ze.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!Qe,this._global_a=null,F={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},ze&&(le.useHTML5Audio=!0,le.preferFlash=!1,Re&&(le.ignoreFlash=!0,$e=!0)),this.setup=function(t){return"undefined"!=typeof t&&xe&&Le&&le.ok()&&("undefined"!=typeof t.flashVersion||"undefined"!=typeof t.url)&&W(R("setupLate")),m(t),le},this.ok=function(){return Le?xe&&!ke:le.useHTML5Audio&&le.hasHTML5},this.supported=this.ok,this.getMovie=function(t){return s(t)||ge[t]||me[t]},this.createSound=function(t,e){function n(){return s=z(s),le.sounds[u.id]=new o(u),le.soundIDs.push(u.id),le.sounds[u.id]}var r,i,s=null,a=null,u=null;return r=pe+".createSound(): ",i=r+R(xe?"notOK":"notReady"),xe&&le.ok()?("undefined"!=typeof e&&(t={id:t,url:e}),s=f(t),s.url=G(s.url),u=s,u.id.toString().charAt(0).match(/^[0-9]$/)&&le._wD(r+R("badID",u.id),2),le._wD(r+u.id+" ("+u.url+")",1),V(u.id,!0)?(le._wD(r+u.id+" exists",1),le.sounds[u.id]):(Y(u)?(a=n(),le._wD("Creating sound "+u.id+", using HTML5"),a._setup_html5(u)):(c>8&&(null===u.isMovieStar&&(u.isMovieStar=!(!u.serverURL&&(u.type?!u.type.match(Ke):1)&&!u.url.match(tn))),u.isMovieStar&&(le._wD(r+"using MovieStar handling"),u.loops>1&&h("noNSLoop"))),u=B(u,r),a=n(),8===c?ce._createSound(u.id,u.loops||1,u.usePolicyFile):(ce._createSound(u.id,u.url,u.usePeakData,u.useWaveformData,u.useEQData,u.isMovieStar,u.isMovieStar?u.bufferTime:!1,u.loops||1,u.serverURL,u.duration||null,u.autoPlay,!0,u.autoLoad,u.usePolicyFile),u.serverURL||(a.connected=!0,u.onconnect&&u.onconnect.apply(a))),u.serverURL||!u.autoLoad&&!u.autoPlay||a.load(u)),!u.serverURL&&u.autoPlay&&a.play(),a)):(W(i),!1)},this.destroySound=function(t,e){if(!V(t))return!1;var n,r=le.sounds[t];for(r._iO={},r.stop(),r.unload(),n=0;n<le.soundIDs.length;n++)if(le.soundIDs[n]===t){le.soundIDs.splice(n,1);break}return e||r.destruct(!0),r=null,delete le.sounds[t],!0},this.load=function(t,e){return V(t)?le.sounds[t].load(e):!1},this.unload=function(t){return V(t)?le.sounds[t].unload():!1},this.onPosition=function(t,e,n,r){return V(t)?le.sounds[t].onposition(e,n,r):!1},this.onposition=this.onPosition,this.clearOnPosition=function(t,e,n){return V(t)?le.sounds[t].clearOnPosition(e,n):!1},this.play=function(t,e){var n=!1;return xe&&le.ok()?V(t)?le.sounds[t].play(e):(e instanceof Object||(e={url:e}),e&&e.url&&(le._wD(pe+'.play(): attempting to create "'+t+'"',1),e.id=t,n=le.createSound(e).play()),n):(W(pe+".play(): "+R(xe?"notOK":"notReady")),n)},this.start=this.play,this.setPosition=function(t,e){return V(t)?le.sounds[t].setPosition(e):!1},this.stop=function(t){return V(t)?(le._wD(pe+".stop("+t+")",1),le.sounds[t].stop()):!1},this.stopAll=function(){var t;le._wD(pe+".stopAll()",1);for(t in le.sounds)le.sounds.hasOwnProperty(t)&&le.sounds[t].stop()},this.pause=function(t){return V(t)?le.sounds[t].pause():!1},this.pauseAll=function(){var t;for(t=le.soundIDs.length-1;t>=0;t--)le.sounds[le.soundIDs[t]].pause()},this.resume=function(t){return V(t)?le.sounds[t].resume():!1},this.resumeAll=function(){var t;for(t=le.soundIDs.length-1;t>=0;t--)le.sounds[le.soundIDs[t]].resume()},this.togglePause=function(t){return V(t)?le.sounds[t].togglePause():!1},this.setPan=function(t,e){return V(t)?le.sounds[t].setPan(e):!1},this.setVolume=function(t,e){return V(t)?le.sounds[t].setVolume(e):!1},this.mute=function(t){var e=0;if("string"!=typeof t&&(t=null),t)return V(t)?(le._wD(pe+'.mute(): Muting "'+t+'"'),le.sounds[t].mute()):!1;for(le._wD(pe+".mute(): Muting all sounds"),e=le.soundIDs.length-1;e>=0;e--)le.sounds[le.soundIDs[e]].mute();return le.muted=!0,!0},this.muteAll=function(){le.mute()},this.unmute=function(t){var e;if("string"!=typeof t&&(t=null),t)return V(t)?(le._wD(pe+'.unmute(): Unmuting "'+t+'"'),le.sounds[t].unmute()):!1;for(le._wD(pe+".unmute(): Unmuting all sounds"),e=le.soundIDs.length-1;e>=0;e--)le.sounds[le.soundIDs[e]].unmute();return le.muted=!1,!0},this.unmuteAll=function(){le.unmute()},this.toggleMute=function(t){return V(t)?le.sounds[t].toggleMute():!1},this.getMemoryUse=function(){var t=0;return ce&&8!==c&&(t=parseInt(ce._getMemoryUse(),10)),t},this.disable=function(t){var e;if("undefined"==typeof t&&(t=!1),ke)return!1;for(ke=!0,h("shutdown",1),e=le.soundIDs.length-1;e>=0;e--)L(le.sounds[le.soundIDs[e]]);return d(t),re.remove(me,"load",_),!0},this.canPlayMIME=function(t){var e;return le.hasHTML5&&(e=K({type:t})),!e&&Le&&(e=t&&le.ok()?!!((c>8?t.match(Ke):null)||t.match(le.mimePattern)):null),e},this.canPlayURL=function(t){var e;return le.hasHTML5&&(e=K({url:t})),!e&&Le&&(e=t&&le.ok()?!!t.match(le.filePattern):null),e},this.canPlayLink=function(t){return"undefined"!=typeof t.type&&t.type&&le.canPlayMIME(t.type)?!0:le.canPlayURL(t.href)},this.getSoundById=function(t,e){if(!t)throw new Error(pe+".getSoundById(): sID is null/undefined");var n=le.sounds[t];return n||e||le._wD('"'+t+'" is an invalid sound ID.',2),n},this.onready=function(t,e){var n="onready",r=!1;if("function"!=typeof t)throw R("needFunction",n);return xe&&le._wD(R("queue",n)),e||(e=me),g(n,t,e),v(),r=!0,r},this.ontimeout=function(t,e){var n="ontimeout",r=!1;if("function"!=typeof t)throw R("needFunction",n);return xe&&le._wD(R("queue",n)),e||(e=me),g(n,t,e),v({type:n}),r=!0,r},this._writeDebug=function(t,e,n){var r,i,o,a="soundmanager-debug";if(!le.debugMode)return!1;if("undefined"!=typeof n&&n&&(t=t+" | "+(new Date).getTime()),We&&le.useConsole&&(o=Ce[e],"undefined"!=typeof console[o]?console[o](t):console.log(t),le.consoleOnly))return!0;try{if(r=s(a),!r)return!1;i=ge.createElement("div"),0===++Se%2&&(i.className="sm2-alt"),e="undefined"==typeof e?0:parseInt(e,10),i.appendChild(ge.createTextNode(t)),e&&(e>=2&&(i.style.fontWeight="bold"),3===e&&(i.style.color="#ff3333")),r.insertBefore(i,r.firstChild)}catch(u){}return r=null,!0},this._wD=this._writeDebug,this._debug=function(){var t,e;for(h("currentObj",1),t=0,e=le.soundIDs.length;e>t;t++)le.sounds[le.soundIDs[t]]._debug()},this.reboot=function(){le._wD(pe+".reboot()"),le.soundIDs.length&&le._wD("Destroying "+le.soundIDs.length+" SMSound objects...");var t,e;for(t=le.soundIDs.length-1;t>=0;t--)le.sounds[le.soundIDs[t]].destruct();if(ce)try{je&&(De=ce.innerHTML),Ee=ce.parentNode.removeChild(ce),le._wD("Flash movie removed.")}catch(n){h("badRemove",2)}De=Ee=Le=null,le.enabled=E=xe=Ne=Pe=be=we=ke=le.swfLoaded=!1,le.soundIDs=[],le.sounds={},ce=null;for(t in ve)if(ve.hasOwnProperty(t))for(e=ve[t].length-1;e>=0;e--)ve[t][e].fired=!1;le._wD(pe+": Rebooting..."),me.setTimeout(le.beginDelayedInit,20)},this.getMoviePercent=function(){return ce&&"undefined"!=typeof ce.PercentLoaded?ce.PercentLoaded():null},this.beginDelayedInit=function(){Te=!0,C(),setTimeout(function(){return Pe?!1:(N(),S(),Pe=!0,!0)},20),b()},this.destruct=function(){le._wD(pe+".destruct()"),le.disable(!0)},o=function(t){var e,n,r,i,o,s,a,u,l,d=this,m=!1,y=[],g=0,v=null;l={duration:null,time:null},this.id=t.id,this.sID=this.id,this.url=t.url,this.options=f(t),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,this.id3={},this._debug=function(){if(le.debugMode){var t,e,n=null,r=[],i=64;for(n in d.options)null!==d.options[n]&&("function"==typeof d.options[n]?(t=d.options[n].toString(),t=t.replace(/\s\s+/g," "),e=t.indexOf("{"),r.push(" "+n+": {"+t.substr(e+1,Math.min(Math.max(t.indexOf("\n")-1,i),i)).replace(/\n/g,"")+"... }")):r.push(" "+n+": "+d.options[n]));le._wD("SMSound() merged options: {\n"+r.join(", \n")+"\n}")}},this._debug(),this.load=function(t){var e,n=null;if("undefined"!=typeof t?(d._iO=f(t,d.options),d.instanceOptions=d._iO):(t=d.options,d._iO=t,d.instanceOptions=d._iO,v&&v!==d.url&&(h("manURL"),d._iO.url=d.url,d.url=null)),d._iO.url||(d._iO.url=d.url),d._iO.url=G(d._iO.url),le._wD("SMSound.load(): "+d._iO.url,1),d._iO.url===d.url&&0!==d.readyState&&2!==d.readyState)return h("onURL",1),3===d.readyState&&d._iO.onload&&d._iO.onload.apply(d,[!!d.duration]),d;if(e=d._iO,v=d.url,d.loaded=!1,d.readyState=1,d.playState=0,d.id3={},Y(e))n=d._setup_html5(e),n._called_load?le._wD(de+"ignoring request to load again: "+d.id):(le._wD(de+"load: "+d.id),d._html5_canplay=!1,d._a.src!==e.url&&(le._wD(h("manURL")+": "+e.url),d._a.src=e.url,d.setPosition(0)),d._a.autobuffer="auto",d._a.preload="auto",n._called_load=!0,e.autoPlay&&d.play());else try{d.isHTML5=!1,d._iO=B(z(e)),e=d._iO,8===c?ce._load(d.id,e.url,e.stream,e.autoPlay,e.whileloading?1:0,e.loops||1,e.usePolicyFile):ce._load(d.id,e.url,!!e.stream,!!e.autoPlay,e.loops||1,!!e.autoLoad,e.usePolicyFile)}catch(r){h("smError",2),p("onload",!1),P({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}return d},this.unload=function(){return 0!==d.readyState&&(le._wD('SMSound.unload(): "'+d.id+'"'),d.isHTML5?(i(),d._a&&(d._a.pause(),te(d._a,Ge),d.url=Ge)):8===c?ce._unload(d.id,Ge):ce._unload(d.id),e()),d},this.destruct=function(t){le._wD('SMSound.destruct(): "'+d.id+'"'),d.isHTML5?(i(),d._a&&(d._a.pause(),te(d._a),$e||r(),d._a._t=null,d._a=null)):(d._iO.onfailure=null,ce._destroySound(d.id)),t||le.destroySound(d.id,!0)},this.play=function(t,e){var n,r,i,a,l=!0,p=null;if(n="SMSound.play(): ",e="undefined"==typeof e?!0:e,t||(t={}),d._iO=f(t,d._iO),d._iO=f(d._iO,d.options),d._iO.url=G(d._iO.url),d.instanceOptions=d._iO,d._iO.serverURL&&!d.connected)return d.getAutoPlay()||(le._wD(n+" Netstream not connected yet - setting autoPlay"),d.setAutoPlay(!0)),d;if(Y(d._iO)&&(d._setup_html5(d._iO),o()),1!==d.playState||d.paused||(r=d._iO.multiShot,r?le._wD(n+'"'+d.id+'" already playing (multi-shot)',1):(le._wD(n+'"'+d.id+'" already playing (one-shot)',1),p=d)),null!==p)return p;if(d.loaded?le._wD(n+'"'+d.id+'"'):0===d.readyState?(le._wD(n+'Attempting to load "'+d.id+'"',1),d.isHTML5?d.load(d._iO):(d._iO.autoPlay=!0,d.load(d._iO))):2===d.readyState?(le._wD(n+'Could not load "'+d.id+'" - exiting',2),p=d):le._wD(n+'"'+d.id+'" is loading - attempting to play..',1),null!==p)return p;if(!d.isHTML5&&9===c&&d.position>0&&d.position===d.duration&&(le._wD(n+'"'+d.id+'": Sound at end, resetting to position:0'),t.position=0),d.paused&&d.position&&d.position>0)le._wD(n+'"'+d.id+'" is resuming from paused state',1),d.resume();else{if(d._iO=f(t,d._iO),null!==d._iO.from&&null!==d._iO.to&&0===d.instanceCount&&0===d.playState&&!d._iO.serverURL){if(a=function(){d._iO=f(t,d._iO),d.play(d._iO)},d.isHTML5&&!d._html5_canplay?(le._wD(n+'Beginning load of "'+d.id+'" for from/to case'),d.load({_oncanplay:a}),p=!1):d.isHTML5||d.loaded||d.readyState&&2===d.readyState||(le._wD(n+'Preloading "'+d.id+'" for from/to case'),d.load({onload:a}),p=!1),null!==p)return p;d._iO=u()}le._wD(n+'"'+d.id+'" is starting to play'),(!d.instanceCount||d._iO.multiShotEvents||!d.isHTML5&&c>8&&!d.getAutoPlay())&&d.instanceCount++,d._iO.onposition&&0===d.playState&&s(d),d.playState=1,d.paused=!1,d.position="undefined"==typeof d._iO.position||isNaN(d._iO.position)?0:d._iO.position,d.isHTML5||(d._iO=B(z(d._iO))),d._iO.onplay&&e&&(d._iO.onplay.apply(d),m=!0),d.setVolume(d._iO.volume,!0),d.setPan(d._iO.pan,!0),d.isHTML5?(o(),i=d._setup_html5(),d.setPosition(d._iO.position),i.play()):(l=ce._start(d.id,d._iO.loops||1,9===c?d._iO.position:d._iO.position/1e3,d._iO.multiShot),9!==c||l||(le._wD(n+d.id+": No sound hardware, or 32-sound ceiling hit"),d._iO.onplayerror&&d._iO.onplayerror.apply(d)))}return d},this.start=this.play,this.stop=function(t){var e,n=d._iO;return 1===d.playState&&(d._onbufferchange(0),d._resetOnPosition(0),d.paused=!1,d.isHTML5||(d.playState=0),a(),n.to&&d.clearOnPosition(n.to),d.isHTML5?d._a&&(e=d.position,d.setPosition(0),d.position=e,d._a.pause(),d.playState=0,d._onTimer(),i()):(ce._stop(d.id,t),n.serverURL&&d.unload()),d.instanceCount=0,d._iO={},n.onstop&&n.onstop.apply(d)),d},this.setAutoPlay=function(t){le._wD("sound "+d.id+" turned autoplay "+(t?"on":"off")),d._iO.autoPlay=t,d.isHTML5||(ce._setAutoPlay(d.id,t),t&&(d.instanceCount||1!==d.readyState||(d.instanceCount++,le._wD("sound "+d.id+" incremented instance count to "+d.instanceCount))))},this.getAutoPlay=function(){return d._iO.autoPlay},this.setPosition=function(t){"undefined"==typeof t&&(t=0);var e,n,r,i=d.isHTML5?Math.max(t,0):Math.min(d.duration||d._iO.duration,Math.max(t,0));if(e=d.position,d.position=i,r=d.position/1e3,d._resetOnPosition(d.position),d._iO.position=i,d.isHTML5){if(d._a)if(d._html5_canplay){if(d._a.currentTime!==r){le._wD("setPosition("+r+"): setting position");try{d._a.currentTime=r,(0===d.playState||d.paused)&&d._a.pause()}catch(o){le._wD("setPosition("+r+"): setting position failed: "+o.message,2)}}}else le._wD("setPosition("+r+"): delaying, sound not ready")}else n=9===c?d.position:r,d.readyState&&2!==d.readyState&&ce._setPosition(d.id,n,d.paused||!d.playState,d._iO.multiShot);return d.isHTML5&&d.paused&&d._onTimer(!0),d},this.pause=function(t){return d.paused||0===d.playState&&1!==d.readyState?d:(le._wD("SMSound.pause()"),d.paused=!0,d.isHTML5?(d._setup_html5().pause(),i()):(t||"undefined"==typeof t)&&ce._pause(d.id,d._iO.multiShot),d._iO.onpause&&d._iO.onpause.apply(d),d)},this.resume=function(){var t=d._iO;return d.paused?(le._wD("SMSound.resume()"),d.paused=!1,d.playState=1,d.isHTML5?(d._setup_html5().play(),o()):(t.isMovieStar&&!t.serverURL&&d.setPosition(d.position),ce._pause(d.id,t.multiShot)),!m&&t.onplay?(t.onplay.apply(d),m=!0):t.onresume&&t.onresume.apply(d),d):d},this.togglePause=function(){return le._wD("SMSound.togglePause()"),0===d.playState?(d.play({position:9!==c||d.isHTML5?d.position/1e3:d.position}),d):(d.paused?d.resume():d.pause(),d)},this.setPan=function(t,e){return"undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=!1),d.isHTML5||ce._setPan(d.id,t),d._iO.pan=t,e||(d.pan=t,d.options.pan=t),d},this.setVolume=function(t,e){return"undefined"==typeof t&&(t=100),"undefined"==typeof e&&(e=!1),d.isHTML5?d._a&&(d._a.volume=Math.max(0,Math.min(1,t/100))):ce._setVolume(d.id,le.muted&&!d.muted||d.muted?0:t),d._iO.volume=t,e||(d.volume=t,d.options.volume=t),d},this.mute=function(){return d.muted=!0,d.isHTML5?d._a&&(d._a.muted=!0):ce._setVolume(d.id,0),d},this.unmute=function(){d.muted=!1;var t="undefined"!=typeof d._iO.volume;return d.isHTML5?d._a&&(d._a.muted=!1):ce._setVolume(d.id,t?d._iO.volume:d.options.volume),d},this.toggleMute=function(){return d.muted?d.unmute():d.mute()},this.onPosition=function(t,e,n){return y.push({position:parseInt(t,10),method:e,scope:"undefined"!=typeof n?n:d,fired:!1}),d},this.onposition=this.onPosition,this.clearOnPosition=function(t,e){var n;if(t=parseInt(t,10),isNaN(t))return!1;for(n=0;n<y.length;n++)t===y[n].position&&(e&&e!==y[n].method||(y[n].fired&&g--,y.splice(n,1)))},this._processOnPosition=function(){var t,e,n=y.length;if(!n||!d.playState||g>=n)return!1;for(t=n-1;t>=0;t--)e=y[t],!e.fired&&d.position>=e.position&&(e.fired=!0,g++,e.method.apply(e.scope,[e.position]));return!0},this._resetOnPosition=function(t){var e,n,r=y.length;if(!r)return!1;for(e=r-1;e>=0;e--)n=y[e],n.fired&&t<=n.position&&(n.fired=!1,g--);return!0},u=function(){var t,e,n=d._iO,r=n.from,i=n.to;return e=function(){le._wD(d.id+': "to" time of '+i+" reached."),d.clearOnPosition(i,e),d.stop()},t=function(){le._wD(d.id+': playing "from" '+r),null===i||isNaN(i)||d.onPosition(i,e)},null===r||isNaN(r)||(n.position=r,n.multiShot=!1,t()),n},s=function(){var t,e=d._iO.onposition;if(e)for(t in e)e.hasOwnProperty(t)&&d.onPosition(parseInt(t,10),e[t])},a=function(){var t,e=d._iO.onposition;if(e)for(t in e)e.hasOwnProperty(t)&&d.clearOnPosition(parseInt(t,10))},o=function(){d.isHTML5&&U(d)},i=function(){d.isHTML5&&X(d)},e=function(t){t||(y=[],g=0),m=!1,d._hasTimer=null,d._a=null,d._html5_canplay=!1,d.bytesLoaded=null,d.bytesTotal=null,d.duration=d._iO&&d._iO.duration?d._iO.duration:null,d.durationEstimate=null,d.buffered=[],d.eqData=[],d.eqData.left=[],d.eqData.right=[],d.failures=0,d.isBuffering=!1,d.instanceOptions={},d.instanceCount=0,d.loaded=!1,d.metadata={},d.readyState=0,d.muted=!1,d.paused=!1,d.peakData={left:0,right:0},d.waveformData={left:[],right:[]},d.playState=0,d.position=null,d.id3={}},e(),this._onTimer=function(t){var e,n,r=!1,i={};return d._hasTimer||t?(d._a&&(t||(d.playState>0||1===d.readyState)&&!d.paused)&&(e=d._get_html5_duration(),e!==l.duration&&(l.duration=e,d.duration=e,r=!0),d.durationEstimate=d.duration,n=1e3*d._a.currentTime||0,n!==l.time&&(l.time=n,r=!0),(r||t)&&d._whileplaying(n,i,i,i,i)),r):void 0},this._get_html5_duration=function(){var t=d._iO,e=d._a?1e3*d._a.duration:t?t.duration:void 0,n=e&&!isNaN(e)&&1/0!==e?e:t?t.duration:null;return n},this._apply_loop=function(t,e){!t.loop&&e>1&&le._wD("Note: Native HTML5 looping is infinite."),t.loop=e>1?"loop":""},this._setup_html5=function(t){var r,i=f(d._iO,t),o=decodeURI,s=$e?le._global_a:d._a,a=o(i.url),u=s&&s._t?s._t.instanceOptions:null;if(s){if(s._t&&($e||a!==o(v)?!$e||u.url!==i.url||v&&v!==u.url||(r=s):r=s,r))return d._apply_loop(s,i.loops),r;le._wD("setting URL on existing object: "+a+(v?", old URL: "+v:"")),$e&&s._t&&s._t.playState&&i.url!==u.url&&s._t.stop(),e(u&&u.url?i.url===u.url:v?v===i.url:!1),s.src=i.url,d.url=i.url,v=i.url,s._called_load=!1}else h("h5a"),d._a=i.autoLoad||i.autoPlay?new Audio(i.url):He?new Audio(null):new Audio,s=d._a,s._called_load=!1,$e&&(le._global_a=s);return d.isHTML5=!0,d._a=s,s._t=d,n(),d._apply_loop(s,i.loops),i.autoLoad||i.autoPlay?d.load():(s.autobuffer=!1,s.preload="auto"),s},n=function(){function t(t,e,n){return d._a?d._a.addEventListener(t,e,n||!1):null}if(d._a._added_events)return!1;var e;d._a._added_events=!0;for(e in ae)ae.hasOwnProperty(e)&&t(e,ae[e]);return!0},r=function(){function t(t,e,n){return d._a?d._a.removeEventListener(t,e,n||!1):null}var e;le._wD(de+"removing event listeners: "+d.id),d._a._added_events=!1;for(e in ae)ae.hasOwnProperty(e)&&t(e,ae[e])},this._onload=function(t){var e,n=!!t||!d.isHTML5&&8===c&&d.duration;return e="SMSound._onload(): ",le._wD(e+'"'+d.id+'"'+(n?" loaded.":" failed to load? - "+d.url),n?1:2),n||d.isHTML5||(le.sandbox.noRemote===!0&&le._wD(e+R("noNet"),1),le.sandbox.noLocal===!0&&le._wD(e+R("noLocal"),1)),d.loaded=n,d.readyState=n?3:2,d._onbufferchange(0),d._iO.onload&&d._iO.onload.apply(d,[n]),!0},this._onbufferchange=function(t){return 0===d.playState?!1:t&&d.isBuffering||!t&&!d.isBuffering?!1:(d.isBuffering=1===t,d._iO.onbufferchange&&(le._wD("SMSound._onbufferchange(): "+t),d._iO.onbufferchange.apply(d)),!0)},this._onsuspend=function(){return d._iO.onsuspend&&(le._wD("SMSound._onsuspend()"),d._iO.onsuspend.apply(d)),!0},this._onfailure=function(t,e,n){d.failures++,le._wD('SMSound._onfailure(): "'+d.id+'" count '+d.failures),d._iO.onfailure&&1===d.failures?d._iO.onfailure(d,t,e,n):le._wD("SMSound._onfailure(): ignoring")},this._onfinish=function(){var t=d._iO.onfinish;d._onbufferchange(0),d._resetOnPosition(0),d.instanceCount&&(d.instanceCount--,d.instanceCount||(a(),d.playState=0,d.paused=!1,d.instanceCount=0,d.instanceOptions={},d._iO={},i(),d.isHTML5&&(d.position=0)),(!d.instanceCount||d._iO.multiShotEvents)&&t&&(le._wD('SMSound._onfinish(): "'+d.id+'"'),t.apply(d)))},this._whileloading=function(t,e,n,r){var i=d._iO;d.bytesLoaded=t,d.bytesTotal=e,d.duration=Math.floor(n),d.bufferLength=r,i.isMovieStar?d.durationEstimate=d.duration:(d.durationEstimate=i.duration?d.duration>i.duration?d.duration:i.duration:parseInt(d.bytesTotal/d.bytesLoaded*d.duration,10),"undefined"==typeof d.durationEstimate&&(d.durationEstimate=d.duration)),d.isHTML5||(d.buffered=[{start:0,end:d.duration}]),(3!==d.readyState||d.isHTML5)&&i.whileloading&&i.whileloading.apply(d)},this._whileplaying=function(t,e,n,r,i){var o,s=d._iO;return isNaN(t)||null===t?!1:(d.position=Math.max(0,t),d._processOnPosition(),!d.isHTML5&&c>8&&(s.usePeakData&&"undefined"!=typeof e&&e&&(d.peakData={left:e.leftPeak,right:e.rightPeak}),s.useWaveformData&&"undefined"!=typeof n&&n&&(d.waveformData={left:n.split(","),right:r.split(",")}),s.useEQData&&"undefined"!=typeof i&&i&&i.leftEQ&&(o=i.leftEQ.split(","),d.eqData=o,d.eqData.left=o,"undefined"!=typeof i.rightEQ&&i.rightEQ&&(d.eqData.right=i.rightEQ.split(",")))),1===d.playState&&(d.isHTML5||8!==c||d.position||!d.isBuffering||d._onbufferchange(0),s.whileplaying&&s.whileplaying.apply(d)),!0)},this._oncaptiondata=function(t){le._wD('SMSound._oncaptiondata(): "'+this.id+'" caption data received.'),d.captiondata=t,d._iO.oncaptiondata&&d._iO.oncaptiondata.apply(d)},this._onmetadata=function(t,e){le._wD('SMSound._onmetadata(): "'+this.id+'" metadata received.');var n,r,i={};for(n=0,r=t.length;r>n;n++)i[t[n]]=e[n];d.metadata=i,d._iO.onmetadata&&d._iO.onmetadata.apply(d)},this._onid3=function(t,e){le._wD('SMSound._onid3(): "'+this.id+'" ID3 data received.');var n,r,i=[];for(n=0,r=t.length;r>n;n++)i[t[n]]=e[n];d.id3=f(d.id3,i),d._iO.onid3&&d._iO.onid3.apply(d)},this._onconnect=function(t){t=1===t,le._wD('SMSound._onconnect(): "'+d.id+'"'+(t?" connected.":" failed to connect? - "+d.url),t?1:2),d.connected=t,t&&(d.failures=0,V(d.id)&&(d.getAutoPlay()?d.play(void 0,d.getAutoPlay()):d._iO.autoLoad&&d.load()),d._iO.onconnect&&d._iO.onconnect.apply(d,[t]))},this._ondataerror=function(t){d.playState>0&&(le._wD("SMSound._ondataerror(): "+t),d._iO.ondataerror&&d._iO.ondataerror.apply(d))}},D=function(){return ge.body||ge._docElement||ge.getElementsByTagName("div")[0]},s=function(t){return ge.getElementById(t)},f=function(t,e){var n,r,i=t||{};n="undefined"==typeof e?le.defaultOptions:e;for(r in n)n.hasOwnProperty(r)&&"undefined"==typeof i[r]&&(i[r]="object"!=typeof n[r]||null===n[r]?n[r]:f(i[r],n[r]));return i},y={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},m=function(t,e){var n,r=!0,i="undefined"!=typeof e,o=le.setupOptions,s=y;if("undefined"==typeof t){r=[];for(n in o)o.hasOwnProperty(n)&&r.push(n);for(n in s)s.hasOwnProperty(n)&&("object"==typeof le[n]?r.push(n+": {...}"):le[n]instanceof Function?r.push(n+": function() {...}"):r.push(n));return le._wD(R("setup",r.join(", "))),!1}for(n in t)if(t.hasOwnProperty(n))if("object"!=typeof t[n]||null===t[n]||t[n]instanceof Array)i&&"undefined"!=typeof s[e]?le[e][n]=t[n]:"undefined"!=typeof o[n]?(le.setupOptions[n]=t[n],le[n]=t[n]):"undefined"==typeof s[n]?(W(R("undefined"==typeof le[n]?"setupUndef":"setupError",n),2),r=!1):le[n]instanceof Function?le[n].apply(le,t[n]instanceof Array?t[n]:[t[n]]):le[n]=t[n];
else{if("undefined"!=typeof s[n])return m(t[n],n);W(R("undefined"==typeof le[n]?"setupUndef":"setupError",n),2),r=!1}return r},re=function(){function t(t){var e=Me.call(t),n=e.length;return i?(e[1]="on"+e[1],n>3&&e.pop()):3===n&&e.push(!1),e}function e(t,e){var n=t.shift(),r=[o[e]];i?n[r](t[0],t[1]):n[r].apply(n,t)}function n(){e(t(arguments),"add")}function r(){e(t(arguments),"remove")}var i=me.attachEvent,o={add:i?"attachEvent":"addEventListener",remove:i?"detachEvent":"removeEventListener"};return{add:n,remove:r}}(),ae={abort:i(function(){le._wD(de+"abort: "+this._t.id)}),canplay:i(function(){var t,e=this._t;if(e._html5_canplay)return!0;if(e._html5_canplay=!0,le._wD(de+"canplay: "+e.id+", "+e.url),e._onbufferchange(0),t="undefined"==typeof e._iO.position||isNaN(e._iO.position)?null:e._iO.position/1e3,e.position&&this.currentTime!==t){le._wD(de+"canplay: setting position to "+t);try{this.currentTime=t}catch(n){le._wD(de+"setting position of "+t+" failed: "+n.message,2)}}e._iO._oncanplay&&e._iO._oncanplay()}),canplaythrough:i(function(){var t=this._t;t.loaded||(t._onbufferchange(0),t._whileloading(t.bytesLoaded,t.bytesTotal,t._get_html5_duration()),t._onload(!0))}),ended:i(function(){var t=this._t;le._wD(de+"ended: "+t.id),t._onfinish()}),error:i(function(){le._wD(de+"error: "+this.error.code),this._t._onload(!1)}),loadeddata:i(function(){var t=this._t;le._wD(de+"loadeddata: "+this._t.id),t._loaded||Fe||(t.duration=t._get_html5_duration())}),loadedmetadata:i(function(){le._wD(de+"loadedmetadata: "+this._t.id)}),loadstart:i(function(){le._wD(de+"loadstart: "+this._t.id),this._t._onbufferchange(1)}),play:i(function(){le._wD(de+"play: "+this._t.id+", "+this._t.url),this._t._onbufferchange(0)}),playing:i(function(){le._wD(de+"playing: "+this._t.id),this._t._onbufferchange(0)}),progress:i(function(t){var e,n,r,i=this._t,o=0,s="progress"===t.type,a=t.target.buffered,u=t.loaded||0,l=t.total||1;if(i.buffered=[],a&&a.length){for(e=0,n=a.length;n>e;e++)i.buffered.push({start:a.start(e),end:a.end(e)});if(o=a.end(0)-a.start(0),u=o/t.target.duration,s&&a.length>1){for(r=[],n=a.length,e=0;n>e;e++)r.push(t.target.buffered.start(e)+"-"+t.target.buffered.end(e));le._wD(de+"progress: timeRanges: "+r.join(", "))}s&&!isNaN(u)&&le._wD(de+"progress: "+i.id+": "+Math.floor(100*u)+"% loaded")}isNaN(u)||(i._onbufferchange(0),i._whileloading(u,l,i._get_html5_duration()),u&&l&&u===l&&ae.canplaythrough.call(this,t))}),ratechange:i(function(){le._wD(de+"ratechange: "+this._t.id)}),suspend:i(function(t){var e=this._t;le._wD(de+"suspend: "+e.id),ae.progress.call(this,t),e._onsuspend()}),stalled:i(function(){le._wD(de+"stalled: "+this._t.id)}),timeupdate:i(function(){this._t._onTimer()}),waiting:i(function(){var t=this._t;le._wD(de+"waiting: "+t.id),t._onbufferchange(1)})},Y=function(t){var e;return e=t.serverURL||t.type&&r(t.type)?!1:t.type?K({type:t.type}):K({url:t.url})||le.html5Only},te=function(t,e){t&&(t.src=e)},K=function(t){if(!le.useHTML5Audio||!le.hasHTML5)return!1;var e,n,i,o,s=t.url||null,a=t.type||null,u=le.audioFormats;if(a&&"undefined"!=typeof le.html5[a])return le.html5[a]&&!r(a);if(!Z){Z=[];for(o in u)u.hasOwnProperty(o)&&(Z.push(o),u[o].related&&(Z=Z.concat(u[o].related)));Z=new RegExp("\\.("+Z.join("|")+")(\\?.*)?$","i")}return i=s?s.toLowerCase().match(Z):null,i&&i.length?i=i[1]:a?(n=a.indexOf(";"),i=(-1!==n?a.substr(0,n):a).substr(6)):e=!1,i&&"undefined"!=typeof le.html5[i]?e=le.html5[i]&&!r(i):(a="audio/"+i,e=le.html5.canPlayType({type:a}),le.html5[i]=e,e=e&&le.html5[a]&&!r(a)),e},ne=function(){function t(t){var e,n,r,i=!1,s=!1;if(!o||"function"!=typeof o.canPlayType)return i;if(t instanceof Array){for(n=0,r=t.length;r>n&&!s;n++)(le.html5[t[n]]||o.canPlayType(t[n]).match(le.html5Test))&&(s=!0,le.html5[t[n]]=!0,le.flash[t[n]]=!!t[n].match(Je));i=s}else e=o&&"function"==typeof o.canPlayType?o.canPlayType(t):!1,i=!(!e||!e.match(le.html5Test));return i}if(!le.useHTML5Audio||"undefined"==typeof Audio)return!1;var e,n,r,i,o="undefined"!=typeof Audio?He?new Audio(null):new Audio:null,s={};r=le.audioFormats;for(e in r)if(r.hasOwnProperty(e)&&(n="audio/"+e,s[e]=t(r[e].type),s[n]=s[e],e.match(Je)?(le.flash[e]=!0,le.flash[n]=!0):(le.flash[e]=!1,le.flash[n]=!1),r[e]&&r[e].related))for(i=r[e].related.length-1;i>=0;i--)s["audio/"+r[e].related[i]]=s[e],le.html5[r[e].related[i]]=s[e],le.flash[r[e].related[i]]=s[e];return s.canPlayType=o?t:null,le.html5=f(le.html5,s),!0},T={notReady:"Not loaded yet - wait for soundManager.onready()",notOK:"Audio support is not available.",domError:he+"createMovie(): appendChild/innerHTML call failed. DOM not ready or other error.",spcWmode:he+"createMovie(): Removing wmode, preventing known SWF loading issue(s)",swf404:pe+": Verify that %s is a valid path.",tryDebug:"Try "+pe+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:pe+": Non-HTTP page ("+ge.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:pe+": Special case: Waiting for SWF to load with window focus...",waitImpatient:pe+": Getting impatient, still waiting for Flash%s...",waitForever:pe+": Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:pe+": Retrying, waiting for 100% SWF load...",needFunction:pe+": Function object expected for %s",badID:'Warning: Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:"--- "+pe+"._debug(): Current sound objects ---",waitEI:he+"initMovie(): Waiting for ExternalInterface call from Flash...",waitOnload:pe+": Waiting for window.onload()",docLoaded:pe+": Document already loaded",onload:he+"initComplete(): calling soundManager.onload()",onloadOK:pe+".onload() complete",init:he+"init()",didInit:he+"init(): Already called?",flashJS:pe+": Attempting JS to Flash call...",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:"Warning: Failed to remove flash movie.",shutdown:pe+".disable(): Shutting down",queue:pe+": Queueing %s handler",smFail:pe+": Failed to initialise.",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+F.swfTimedout+" CSS...",fbLoaded:"Flash loaded",fbHandler:he+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:pe+".load(): current URL already assigned.",badFV:pe+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",mfOn:"mobileFlash::enabling on-screen flash repositioning",policy:"Enabling usePolicyFile for data access",setup:pe+".setup(): allowed parameters: %s",setupError:pe+'.setup(): "%s" cannot be assigned with this method.',setupUndef:pe+'.setup(): Could not find option "%s"',setupLate:pe+".setup(): url + flashVersion changes will not take effect until reboot().",h5a:"creating HTML5 Audio() object"},R=function(){var t,e,n=Me.call(arguments),r=n.shift(),i=T&&T[r]?T[r]:"";if(i&&n&&n.length)for(t=0,e=n.length;e>t;t++)i=i.replace("%s",n[t]);return i},z=function(t){return 8===c&&t.loops>1&&t.stream&&(h("as2loop"),t.stream=!1),t},B=function(t,e){return t&&!t.usePolicyFile&&(t.onid3||t.usePeakData||t.useWaveformData||t.useEQData)&&(le._wD((e||"")+R("policy")),t.usePolicyFile=!0),t},W=function(t){"undefined"!=typeof console&&"undefined"!=typeof console.warn?console.warn(t):le._wD(t)},a=function(){return!1},L=function(t){var e;for(e in t)t.hasOwnProperty(e)&&"function"==typeof t[e]&&(t[e]=a);e=null},M=function(t){"undefined"==typeof t&&(t=!1),(ke||t)&&(h("smFail",2),le.disable(t))},$=function(t){var e,n=null;if(t)if(t.match(/\.swf(\?.*)?$/i)){if(n=t.substr(t.toLowerCase().lastIndexOf(".swf?")+4))return t}else t.lastIndexOf("/")!==t.length-1&&(t+="/");return e=(t&&-1!==t.lastIndexOf("/")?t.substr(0,t.lastIndexOf("/")+1):"./")+le.movieURL,le.noSWFCache&&(e+="?ts="+(new Date).getTime()),e},x=function(){c=parseInt(le.flashVersion,10),8!==c&&9!==c&&(le._wD(R("badFV",c,Oe)),le.flashVersion=c=Oe);var t=le.debugMode||le.debugFlash?"_debug.swf":".swf";le.useHTML5Audio&&!le.html5Only&&le.audioFormats.mp4.required&&9>c&&(le._wD(R("needfl9")),le.flashVersion=c=9),le.version=le.versionNumber+(le.html5Only?" (HTML5-only mode)":9===c?" (AS3/Flash 9)":" (AS2/Flash 8)"),c>8?(le.defaultOptions=f(le.defaultOptions,le.flash9Options),le.features.buffering=!0,le.defaultOptions=f(le.defaultOptions,le.movieStarOptions),le.filePatterns.flash9=new RegExp("\\.(mp3|"+Ze.join("|")+")(\\?.*)?$","i"),le.features.movieStar=!0):le.features.movieStar=!1,le.filePattern=le.filePatterns[8!==c?"flash9":"flash8"],le.movieURL=(8===c?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",t),le.features.peakData=le.features.waveformData=le.features.eqData=c>8},I=function(t,e){return ce?(ce._setPolling(t,e),void 0):!1},A=function(){if(le.debugURLParam.test(ye)&&(le.debugMode=!0),s(le.debugID))return!1;var t,e,n,r,i;if(!(!le.debugMode||s(le.debugID)||We&&le.useConsole&&le.consoleOnly)){t=ge.createElement("div"),t.id=le.debugID+"-toggle",r={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},t.appendChild(ge.createTextNode("-")),t.onclick=H,t.title="Toggle SM2 debug console",fe.match(/msie 6/i)&&(t.style.position="absolute",t.style.cursor="hand");for(i in r)r.hasOwnProperty(i)&&(t.style[i]=r[i]);if(e=ge.createElement("div"),e.id=le.debugID,e.style.display=le.debugMode?"block":"none",le.debugMode&&!s(t.id)){try{n=D(),n.appendChild(t)}catch(o){throw new Error(R("domError")+" \n"+o.toString())}n.appendChild(e)}}n=null},V=this.getSoundById,h=function(t,e){return t?le._wD(R(t),e):""},ye.indexOf("sm2-debug=alert")+1&&le.debugMode&&(le._wD=function(e){t.alert(e)}),H=function(){var t=s(le.debugID),e=s(le.debugID+"-toggle");return t?(_e?(e.innerHTML="+",t.style.display="none"):(e.innerHTML="-",t.style.display="block"),_e=!_e,void 0):!1},p=function(t,e,n){if("undefined"!=typeof sm2Debugger)try{sm2Debugger.handleEvent(t,e,n)}catch(r){}return!0},q=function(){var t=[];return le.debugMode&&t.push(F.sm2Debug),le.debugFlash&&t.push(F.flashDebug),le.useHighPerformance&&t.push(F.highPerf),t.join(" ")},j=function(){var t=R("fbHandler"),e=le.getMoviePercent(),n=F,r={type:"FLASHBLOCK"};return le.html5Only?!1:(le.ok()?(le.didFlashBlock&&le._wD(t+": Unblocked"),le.oMC&&(le.oMC.className=[q(),n.swfDefault,n.swfLoaded+(le.didFlashBlock?" "+n.swfUnblocked:"")].join(" "))):(Le&&(le.oMC.className=q()+" "+n.swfDefault+" "+(null===e?n.swfTimedout:n.swfError),le._wD(t+": "+R("fbTimeout")+(e?" ("+R("fbLoaded")+")":""))),le.didFlashBlock=!0,v({type:"ontimeout",ignoreInit:!0,error:r}),P(r)),void 0)},g=function(t,e,n){"undefined"==typeof ve[t]&&(ve[t]=[]),ve[t].push({method:e,scope:n||null,fired:!1})},v=function(t){if(t||(t={type:le.ok()?"onready":"ontimeout"}),!xe&&t&&!t.ignoreInit)return!1;if("ontimeout"===t.type&&(le.ok()||ke&&!t.ignoreInit))return!1;var e,n,r={success:t&&t.ignoreInit?le.ok():!ke},i=t&&t.type?ve[t.type]||[]:[],o=[],s=[r],a=Le&&le.useFlashBlock&&!le.ok();for(t.error&&(s[0].error=t.error),e=0,n=i.length;n>e;e++)i[e].fired!==!0&&o.push(i[e]);if(o.length)for(le._wD(pe+": Firing "+o.length+" "+t.type+"() item"+(1===o.length?"":"s")),e=0,n=o.length;n>e;e++)o[e].scope?o[e].method.apply(o[e].scope,s):o[e].method.apply(this,s),a||(o[e].fired=!0);return!0},_=function(){me.setTimeout(function(){le.useFlashBlock&&j(),v(),"function"==typeof le.onload&&(h("onload",1),le.onload.apply(me),h("onloadOK",1)),le.waitForWindowLoad&&re.add(me,"load",_)},1)},oe=function(){if("undefined"!=typeof ie)return ie;var t,e,n,r=!1,i=navigator,o=i.plugins,s=me.ActiveXObject;if(o&&o.length)e="application/x-shockwave-flash",n=i.mimeTypes,n&&n[e]&&n[e].enabledPlugin&&n[e].enabledPlugin.description&&(r=!0);else if("undefined"!=typeof s){try{t=new s("ShockwaveFlash.ShockwaveFlash")}catch(a){}r=!!t}return ie=r,r},Q=function(){var t,e,n=!0,r=le.audioFormats,i=Re&&!!fe.match(/os (1|2|3_0|3_1)/i);if(i?(le.hasHTML5=!1,le.html5Only=!0,le.oMC&&(le.oMC.style.display="none"),n=!1):le.useHTML5Audio&&(le.html5&&le.html5.canPlayType?le.hasHTML5=!0:(le._wD("SoundManager: No HTML5 Audio() support detected."),le.hasHTML5=!1),Be&&le._wD(he+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(ie?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1)),le.useHTML5Audio&&le.hasHTML5)for(e in r)r.hasOwnProperty(e)&&(r[e].required&&!le.html5.canPlayType(r[e].type)||le.preferFlash&&(le.flash[e]||le.flash[r[e].type]))&&(t=!0);return le.ignoreFlash&&(t=!1),le.html5Only=le.hasHTML5&&le.useHTML5Audio&&!t,!le.html5Only},G=function(t){var e,n,r,i=0;if(t instanceof Array){for(e=0,n=t.length;n>e;e++)if(t[e]instanceof Object){if(le.canPlayMIME(t[e].type)){i=e;break}}else if(le.canPlayURL(t[e])){i=e;break}t[i].url&&(t[i]=t[i].url),r=t[i]}else r=t;return r},U=function(t){t._hasTimer||(t._hasTimer=!0,!ze&&le.html5PollingInterval&&(null===Ae&&0===Ie&&(Ae=me.setInterval(J,le.html5PollingInterval)),Ie++))},X=function(t){t._hasTimer&&(t._hasTimer=!1,!ze&&le.html5PollingInterval&&Ie--)},J=function(){var t;if(null!==Ae&&!Ie)return me.clearInterval(Ae),Ae=null,!1;for(t=le.soundIDs.length-1;t>=0;t--)le.sounds[le.soundIDs[t]].isHTML5&&le.sounds[le.soundIDs[t]]._hasTimer&&le.sounds[le.soundIDs[t]]._onTimer()},P=function(t){t="undefined"!=typeof t?t:{},"function"==typeof le.onerror&&le.onerror.apply(me,[{type:"undefined"!=typeof t.type?t.type:null}]),"undefined"!=typeof t.fatal&&t.fatal&&le.disable()},se=function(){if(!Be||!oe())return!1;var t,e,n=le.audioFormats;for(e in n)if(n.hasOwnProperty(e)&&("mp3"===e||"mp4"===e)&&(le._wD(pe+": Using flash fallback for "+e+" format"),le.html5[e]=!1,n[e]&&n[e].related))for(t=n[e].related.length-1;t>=0;t--)le.html5[n[e].related[t]]=!1},this._setSandboxType=function(t){var e=le.sandbox;e.type=t,e.description=e.types["undefined"!=typeof e.types[t]?t:"unknown"],le._wD("Flash security sandbox type: "+e.type),"localWithFile"===e.type?(e.noRemote=!0,e.noLocal=!1,h("secNote",2)):"localWithNetwork"===e.type?(e.noRemote=!1,e.noLocal=!0):"localTrusted"===e.type&&(e.noRemote=!1,e.noLocal=!1)},this._externalInterfaceOK=function(t,e){if(le.swfLoaded)return!1;var n,r=(new Date).getTime();return le._wD(he+"externalInterfaceOK()"+(t?" (~"+(r-t)+" ms)":"")),p("swf",!0),p("flashtojs",!0),le.swfLoaded=!0,Ue=!1,Be&&se(),e&&e.replace(/\+dev/i,"")===le.versionNumber.replace(/\+dev/i,"")?(setTimeout(l,je?100:1),void 0):(n=pe+': Fatal: JavaScript file build "'+le.versionNumber+'" does not match Flash SWF build "'+e+'" at '+le.url+". Ensure both are up-to-date.",setTimeout(function(){throw new Error(n)},0),!1)},N=function(t,e){function n(){le._wD("-- SoundManager 2 "+le.version+(!le.html5Only&&le.useHTML5Audio?le.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"")+(le.html5Only?"":(le.useHighPerformance?", high performance mode, ":", ")+((le.flashPollingInterval?"custom ("+le.flashPollingInterval+"ms)":"normal")+" polling")+(le.wmode?", wmode: "+le.wmode:"")+(le.debugFlash?", flash debug mode":"")+(le.useFlashBlock?", flashBlock mode":""))+" --",1)}function r(t,e){return'<param name="'+t+'" value="'+e+'" />'}if(be&&we)return!1;if(le.html5Only)return x(),n(),le.oMC=s(le.movieID),l(),be=!0,we=!0,!1;var i,o,a,u,c,p,d,f,m=e||le.url,y=le.altURL||m,g="JS/Flash audio component (SoundManager 2)",v=D(),_=q(),b=null,w=ge.getElementsByTagName("html")[0];if(b=w&&w.dir&&w.dir.match(/rtl/i),t="undefined"==typeof t?le.id:t,x(),le.url=$(Qe?m:y),e=le.url,le.wmode=!le.wmode&&le.useHighPerformance?"transparent":le.wmode,null!==le.wmode&&(fe.match(/msie 8/i)||!je&&!le.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(h("spcWmode"),le.wmode=null),i={name:t,id:t,src:e,quality:"high",allowScriptAccess:le.allowScriptAccess,bgcolor:le.bgColor,pluginspage:Ye+"www.macromedia.com/go/getflashplayer",title:g,type:"application/x-shockwave-flash",wmode:le.wmode,hasPriority:"true"},le.debugFlash&&(i.FlashVars="debug=1"),le.wmode||delete i.wmode,je)o=ge.createElement("div"),u=['<object id="'+t+'" data="'+e+'" type="'+i.type+'" title="'+i.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+Ye+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',r("movie",e),r("AllowScriptAccess",le.allowScriptAccess),r("quality",i.quality),le.wmode?r("wmode",le.wmode):"",r("bgcolor",le.bgColor),r("hasPriority","true"),le.debugFlash?r("FlashVars",i.FlashVars):"","</object>"].join("");else{o=ge.createElement("embed");for(a in i)i.hasOwnProperty(a)&&o.setAttribute(a,i[a])}if(A(),_=q(),v=D())if(le.oMC=s(le.movieID)||ge.createElement("div"),le.oMC.id)f=le.oMC.className,le.oMC.className=(f?f+" ":F.swfDefault)+(_?" "+_:""),le.oMC.appendChild(o),je&&(c=le.oMC.appendChild(ge.createElement("div")),c.className=F.swfBox,c.innerHTML=u),we=!0;else{if(le.oMC.id=le.movieID,le.oMC.className=F.swfDefault+" "+_,p=null,c=null,le.useFlashBlock||(le.useHighPerformance?p={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(p={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},b&&(p.left=Math.abs(parseInt(p.left,10))+"px"))),qe&&(le.oMC.style.zIndex=1e4),!le.debugFlash)for(d in p)p.hasOwnProperty(d)&&(le.oMC.style[d]=p[d]);try{je||le.oMC.appendChild(o),v.appendChild(le.oMC),je&&(c=le.oMC.appendChild(ge.createElement("div")),c.className=F.swfBox,c.innerHTML=u),we=!0}catch(k){throw new Error(R("domError")+" \n"+k.toString())}}return be=!0,n(),le._wD(he+"createMovie(): Trying to load "+e+(!Qe&&le.altURL?" (alternate URL)":""),1),!0},S=function(){return le.html5Only?(N(),!1):ce?!1:(ce=le.getMovie(le.id),ce||(Ee?(je?le.oMC.innerHTML=De:le.oMC.appendChild(Ee),Ee=null,be=!0):N(le.id,le.url),ce=le.getMovie(le.id)),ce&&h("waitEI"),"function"==typeof le.oninitmovie&&setTimeout(le.oninitmovie,1),!0)},b=function(){setTimeout(w,1e3)},w=function(){var t,e=!1;return Ne?!1:(Ne=!0,re.remove(me,"load",b),Ue&&!Ve?(h("waitFocus"),!1):(xe||(t=le.getMoviePercent(),le._wD(R("waitImpatient",t>0?" (SWF "+t+"% loaded)":"")),t>0&&100>t&&(e=!0)),setTimeout(function(){return t=le.getMoviePercent(),e?(Ne=!1,le._wD(R("waitSWF")),me.setTimeout(b,1),!1):(xe||(le._wD(pe+": No Flash response within expected time.\nLikely causes: "+(0===t?"Loading "+le.movieURL+" may have failed (and/or Flash "+c+"+ not present?), ":"")+"Flash blocked or JS-Flash security error."+(le.debugFlash?" "+R("checkSWF"):""),2),!Qe&&t&&(h("localFail",2),le.debugFlash||h("tryDebug",2)),0===t&&le._wD(R("swf404",le.url)),p("flashtojs",!1," (Check flash security or flash blockers)")),!xe&&Xe&&(null===t?le.useFlashBlock||0===le.flashLoadTimeout?(le.useFlashBlock&&j(),h("waitForever")):M(!0):0===le.flashLoadTimeout?h("waitForever"):M(!0)),void 0)},le.flashLoadTimeout),void 0))},k=function(){function t(){re.remove(me,"focus",k)}return Ve||!Ue?(t(),!0):(Xe=!0,Ve=!0,le._wD(pe+": Got window focus."),Ne=!1,b(),t(),!0)},ue=function(){var t,e=[];if(le.useHTML5Audio&&le.hasHTML5){for(t in le.audioFormats)le.audioFormats.hasOwnProperty(t)&&e.push(t+": "+le.html5[t]+(!le.html5[t]&&ie&&le.flash[t]?" (using flash)":le.preferFlash&&le.flash[t]&&ie?" (preferring flash)":le.html5[t]?"":" ("+(le.audioFormats[t].required?"required, ":"")+"and no flash support)"));le._wD("-- SoundManager 2: HTML5 support tests ("+le.html5Test+"): "+e.join(", ")+" --",1)}},d=function(t){if(xe)return!1;if(le.html5Only)return le._wD("-- SoundManager 2: loaded --"),xe=!0,_(),p("onload",!0),!0;var e,n=le.useFlashBlock&&le.flashLoadTimeout&&!le.getMoviePercent(),r=!0;return n||(xe=!0,ke&&(e={type:!ie&&Le?"NO_FLASH":"INIT_TIMEOUT"})),le._wD("-- SoundManager 2 "+(ke?"failed to load":"loaded")+" ("+(ke?"security/load error":"OK")+") --",1),ke||t?(le.useFlashBlock&&le.oMC&&(le.oMC.className=q()+" "+(null===le.getMoviePercent()?F.swfTimedout:F.swfError)),v({type:"ontimeout",error:e,ignoreInit:!0}),p("onload",!1),P(e),r=!1):p("onload",!0),ke||(le.waitForWindowLoad&&!Te?(h("waitOnload"),re.add(me,"load",_)):(le.waitForWindowLoad&&Te&&h("docLoaded"),_())),r},u=function(){var t,e=le.setupOptions;for(t in e)e.hasOwnProperty(t)&&("undefined"==typeof le[t]?le[t]=e[t]:le[t]!==e[t]&&(le.setupOptions[t]=le[t]))},l=function(){function t(){re.remove(me,"load",le.beginDelayedInit)}if(h("init"),xe)return h("didInit"),!1;if(le.html5Only)return xe||(t(),le.enabled=!0,d()),!0;S();try{h("flashJS"),ce._externalInterfaceTest(!1),I(!0,le.flashPollingInterval||(le.useHighPerformance?10:50)),le.debugMode||ce._disableDebug(),le.enabled=!0,p("jstoflash",!0),le.html5Only||re.add(me,"unload",a)}catch(e){return le._wD("js/flash exception: "+e.toString()),p("jstoflash",!1),P({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),M(!0),d(),!1}return d(),t(),!0},C=function(){return E?!1:(E=!0,u(),A(),function(){var t="sm2-usehtml5audio=",e="sm2-preferflash=",n=null,r=null,i="undefined"!=typeof console&&"function"==typeof console.log,o=ye.toLowerCase();-1!==o.indexOf(t)&&(n="1"===o.charAt(o.indexOf(t)+t.length),i&&console.log((n?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter"),le.setup({useHTML5Audio:n})),-1!==o.indexOf(e)&&(r="1"===o.charAt(o.indexOf(e)+e.length),i&&console.log((r?"Enabling ":"Disabling ")+"preferFlash via URL parameter"),le.setup({preferFlash:r}))}(),!ie&&le.hasHTML5&&(le._wD("SoundManager: No Flash detected"+(le.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5.")),le.setup({useHTML5Audio:!0,preferFlash:!1})),ne(),le.html5.usingFlash=Q(),Le=le.html5.usingFlash,ue(),!ie&&Le&&(le._wD("SoundManager: Fatal error: Flash is needed to play some required formats, but is not available."),le.setup({flashLoadTimeout:1})),ge.removeEventListener&&ge.removeEventListener("DOMContentLoaded",C,!1),S(),!0)},ee=function(){return"complete"===ge.readyState&&(C(),ge.detachEvent("onreadystatechange",ee)),!0},O=function(){Te=!0,re.remove(me,"load",O)},oe(),re.add(me,"focus",k),re.add(me,"load",b),re.add(me,"load",O),ge.addEventListener?ge.addEventListener("DOMContentLoaded",C,!1):ge.attachEvent?ge.attachEvent("onreadystatechange",ee):(p("onload",!1),P({type:"NO_DOM2_EVENTS",fatal:!0})),"complete"===ge.readyState&&setTimeout(C,100)}var n=null;"undefined"!=typeof SM2_DEFER&&SM2_DEFER||(n=new e),t.SoundManager=e,t.soundManager=n}(window);var swfobject=function(){function t(){if(!B){try{var t=$.getElementsByTagName("body")[0].appendChild(y("span"));t.parentNode.removeChild(t)}catch(e){return}B=!0;for(var n=q.length,r=0;n>r;r++)q[r]()}}function e(t){B?t():q[q.length]=t}function n(t){if(typeof M.addEventListener!=E)M.addEventListener("load",t,!1);else if(typeof $.addEventListener!=E)$.addEventListener("load",t,!1);else if(typeof M.attachEvent!=E)g(M,"onload",t);else if("function"==typeof M.onload){var e=M.onload;M.onload=function(){e(),t()}}else M.onload=t}function r(){j?i():o()}function i(){var t=$.getElementsByTagName("body")[0],e=y(D);e.setAttribute("type",I);var n=t.appendChild(e);if(n){var r=0;!function(){if(typeof n.GetVariable!=E){var i=n.GetVariable("$version");i&&(i=i.split(" ")[1].split(","),U.pv=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)])}else if(10>r)return r++,setTimeout(arguments.callee,10),void 0;t.removeChild(e),n=null,o()}()}else o()}function o(){var t=F.length;if(t>0)for(var e=0;t>e;e++){var n=F[e].id,r=F[e].callbackFn,i={success:!1,id:n};if(U.pv[0]>0){var o=m(n);if(o)if(!v(F[e].swfVersion)||U.wk&&U.wk<312)if(F[e].expressInstall&&a()){var c={};c.data=F[e].expressInstall,c.width=o.getAttribute("width")||"0",c.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(c.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(c.align=o.getAttribute("align"));for(var p={},h=o.getElementsByTagName("param"),d=h.length,f=0;d>f;f++)"movie"!=h[f].getAttribute("name").toLowerCase()&&(p[h[f].getAttribute("name")]=h[f].getAttribute("value"));u(c,p,n,r)}else l(o),r&&r(i);else b(n,!0),r&&(i.success=!0,i.ref=s(n),r(i))}else if(b(n,!0),r){var y=s(n);y&&typeof y.SetVariable!=E&&(i.success=!0,i.ref=y),r(i)}}}function s(t){var e=null,n=m(t);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=E)e=n;else{var r=n.getElementsByTagName(D)[0];r&&(e=r)}return e}function a(){return!W&&v("6.0.65")&&(U.win||U.mac)&&!(U.wk&&U.wk<312)}function u(t,e,n,r){W=!0,T=r||null,S={success:!1,id:n};var i=m(n);if(i){"OBJECT"==i.nodeName?(x=c(i),k=null):(x=i,k=n),t.id=A,(typeof t.width==E||!/%$/.test(t.width)&&parseInt(t.width,10)<310)&&(t.width="310"),(typeof t.height==E||!/%$/.test(t.height)&&parseInt(t.height,10)<137)&&(t.height="137"),$.title=$.title.slice(0,47)+" - Flash Player Installation";var o=U.ie&&U.win?"ActiveX":"PlugIn",s="MMredirectURL="+encodeURI(M.location).toString().replace(/&/g,"%26")+"&MMplayerType="+o+"&MMdoctitle="+$.title;if(typeof e.flashvars!=E?e.flashvars+="&"+s:e.flashvars=s,U.ie&&U.win&&4!=i.readyState){var a=y("div");n+="SWFObjectNew",a.setAttribute("id",n),i.parentNode.insertBefore(a,i),i.style.display="none",function(){4==i.readyState?i.parentNode.removeChild(i):setTimeout(arguments.callee,10)}()}p(t,e,n)}}function l(t){if(U.ie&&U.win&&4!=t.readyState){var e=y("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(c(t),e),t.style.display="none",function(){4==t.readyState?t.parentNode.removeChild(t):setTimeout(arguments.callee,10)}()}else t.parentNode.replaceChild(c(t),t)}function c(t){var e=y("div");if(U.win&&U.ie)e.innerHTML=t.innerHTML;else{var n=t.getElementsByTagName(D)[0];if(n){var r=n.childNodes;if(r)for(var i=r.length,o=0;i>o;o++)1==r[o].nodeType&&"PARAM"==r[o].nodeName||8==r[o].nodeType||e.appendChild(r[o].cloneNode(!0))}}return e}function p(t,e,n){var r,i=m(n);if(U.wk&&U.wk<312)return r;if(i)if(typeof t.id==E&&(t.id=n),U.ie&&U.win){var o="";for(var s in t)t[s]!=Object.prototype[s]&&("data"==s.toLowerCase()?e.movie=t[s]:"styleclass"==s.toLowerCase()?o+=' class="'+t[s]+'"':"classid"!=s.toLowerCase()&&(o+=" "+s+'="'+t[s]+'"'));var a="";for(var u in e)e[u]!=Object.prototype[u]&&(a+='<param name="'+u+'" value="'+e[u]+'" />');i.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+o+">"+a+"</object>",H[H.length]=t.id,r=m(t.id)}else{var l=y(D);l.setAttribute("type",I);for(var c in t)t[c]!=Object.prototype[c]&&("styleclass"==c.toLowerCase()?l.setAttribute("class",t[c]):"classid"!=c.toLowerCase()&&l.setAttribute(c,t[c]));for(var p in e)e[p]!=Object.prototype[p]&&"movie"!=p.toLowerCase()&&h(l,p,e[p]);i.parentNode.replaceChild(l,i),r=l}return r}function h(t,e,n){var r=y("param");r.setAttribute("name",e),r.setAttribute("value",n),t.appendChild(r)}function d(t){var e=m(t);e&&"OBJECT"==e.nodeName&&(U.ie&&U.win?(e.style.display="none",function(){4==e.readyState?f(t):setTimeout(arguments.callee,10)}()):e.parentNode.removeChild(e))}function f(t){var e=m(t);if(e){for(var n in e)"function"==typeof e[n]&&(e[n]=null);e.parentNode.removeChild(e)}}function m(t){var e=null;try{e=$.getElementById(t)}catch(n){}return e}function y(t){return $.createElement(t)}function g(t,e,n){t.attachEvent(e,n),z[z.length]=[t,e,n]}function v(t){var e=U.pv,n=t.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,e[0]>n[0]||e[0]==n[0]&&e[1]>n[1]||e[0]==n[0]&&e[1]==n[1]&&e[2]>=n[2]?!0:!1}function _(t,e,n,r){if(!U.ie||!U.mac){var i=$.getElementsByTagName("head")[0];if(i){var o=n&&"string"==typeof n?n:"screen";if(r&&(C=null,O=null),!C||O!=o){var s=y("style");s.setAttribute("type","text/css"),s.setAttribute("media",o),C=i.appendChild(s),U.ie&&U.win&&typeof $.styleSheets!=E&&$.styleSheets.length>0&&(C=$.styleSheets[$.styleSheets.length-1]),O=o}U.ie&&U.win?C&&typeof C.addRule==D&&C.addRule(t,e):C&&typeof $.createTextNode!=E&&C.appendChild($.createTextNode(t+" {"+e+"}"))}}}function b(t,e){if(V){var n=e?"visible":"hidden";B&&m(t)?m(t).style.visibility=n:_("#"+t,"visibility:"+n)}}function w(t){var e=/[\\\"<>\.;]/,n=null!=e.exec(t);return n&&typeof encodeURIComponent!=E?encodeURIComponent(t):t}var x,k,T,S,C,O,E="undefined",D="object",N="Shockwave Flash",P="ShockwaveFlash.ShockwaveFlash",I="application/x-shockwave-flash",A="SWFObjectExprInst",L="onreadystatechange",M=window,$=document,R=navigator,j=!1,q=[r],F=[],H=[],z=[],B=!1,W=!1,V=!0,U=function(){var t=typeof $.getElementById!=E&&typeof $.getElementsByTagName!=E&&typeof $.createElement!=E,e=R.userAgent.toLowerCase(),n=R.platform.toLowerCase(),r=n?/win/.test(n):/win/.test(e),i=n?/mac/.test(n):/mac/.test(e),o=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,s=!1,a=[0,0,0],u=null;if(typeof R.plugins!=E&&typeof R.plugins[N]==D)u=R.plugins[N].description,!u||typeof R.mimeTypes!=E&&R.mimeTypes[I]&&!R.mimeTypes[I].enabledPlugin||(j=!0,s=!1,u=u.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),a[0]=parseInt(u.replace(/^(.*)\..*$/,"$1"),10),a[1]=parseInt(u.replace(/^.*\.(.*)\s.*$/,"$1"),10),a[2]=/[a-zA-Z]/.test(u)?parseInt(u.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof M.ActiveXObject!=E)try{var l=new ActiveXObject(P);l&&(u=l.GetVariable("$version"),u&&(s=!0,u=u.split(" ")[1].split(","),a=[parseInt(u[0],10),parseInt(u[1],10),parseInt(u[2],10)]))}catch(c){}return{w3:t,pv:a,wk:o,ie:s,win:r,mac:i}}();return function(){U.w3&&((typeof $.readyState!=E&&"complete"==$.readyState||typeof $.readyState==E&&($.getElementsByTagName("body")[0]||$.body))&&t(),B||(typeof $.addEventListener!=E&&$.addEventListener("DOMContentLoaded",t,!1),U.ie&&U.win&&($.attachEvent(L,function(){"complete"==$.readyState&&($.detachEvent(L,arguments.callee),t())}),M==top&&function(){if(!B){try{$.documentElement.doScroll("left")}catch(e){return setTimeout(arguments.callee,0),void 0}t()}}()),U.wk&&function(){return B?void 0:/loaded|complete/.test($.readyState)?(t(),void 0):(setTimeout(arguments.callee,0),void 0)}(),n(t)))}(),function(){U.ie&&U.win&&window.attachEvent("onunload",function(){for(var t=z.length,e=0;t>e;e++)z[e][0].detachEvent(z[e][1],z[e][2]);for(var n=H.length,r=0;n>r;r++)d(H[r]);for(var i in U)U[i]=null;U=null;for(var o in swfobject)swfobject[o]=null;swfobject=null})}(),{registerObject:function(t,e,n,r){if(U.w3&&t&&e){var i={};i.id=t,i.swfVersion=e,i.expressInstall=n,i.callbackFn=r,F[F.length]=i,b(t,!1)}else r&&r({success:!1,id:t})},getObjectById:function(t){return U.w3?s(t):void 0},embedSWF:function(t,n,r,i,o,s,l,c,h,d){var f={success:!1,id:n};U.w3&&!(U.wk&&U.wk<312)&&t&&n&&r&&i&&o?(b(n,!1),e(function(){r+="",i+="";var e={};if(h&&typeof h===D)for(var m in h)e[m]=h[m];e.data=t,e.width=r,e.height=i;var y={};if(c&&typeof c===D)for(var g in c)y[g]=c[g];if(l&&typeof l===D)for(var _ in l)typeof y.flashvars!=E?y.flashvars+="&"+_+"="+l[_]:y.flashvars=_+"="+l[_];if(v(o)){var w=p(e,y,n);e.id==n&&b(n,!0),f.success=!0,f.ref=w}else{if(s&&a())return e.data=s,u(e,y,n,d),void 0;b(n,!0)}d&&d(f)})):d&&d(f)},switchOffAutoHideShow:function(){V=!1},ua:U,getFlashPlayerVersion:function(){return{major:U.pv[0],minor:U.pv[1],release:U.pv[2]}},hasFlashPlayerVersion:v,createSWF:function(t,e,n){return U.w3?p(t,e,n):void 0},showExpressInstall:function(t,e,n,r){U.w3&&a()&&u(t,e,n,r)},removeSWF:function(t){U.w3&&d(t)},createCSS:function(t,e,n,r){U.w3&&_(t,e,n,r)},addDomLoadEvent:e,addLoadEvent:n,getQueryParamValue:function(t){var e=$.location.search||$.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),null==t)return w(e);for(var n=e.split("&"),r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==t)return w(n[r].substring(n[r].indexOf("=")+1))
}return""},expressInstallCallback:function(){if(W){var t=m(A);t&&x&&(t.parentNode.replaceChild(x,t),k&&(b(k,!0),U.ie&&U.win&&(x.style.display="block")),T&&T(S)),W=!1}}}}();require.register("application",function(t,e,n){var r,i,o,s,a,u,l,c,p,h,d,f,m,y,g;r=e("jquery"),g=e("pubsub"),y=e("notifications"),h=e("router"),f=e("models/user"),a=e("models/library_state"),m=e("models/user_library"),d=e("models/sidebar"),p=e("models/lists/playlists").PlayQueuePlaylist,s=e("views/layout_view"),u=e("views/sidebars/nav_sidebar_view"),o=e("views/sidebars/info_sidebar_view"),c="",l="",i=function(){function t(){}return t.prototype.initialize=function(){var t=this;return this.user=g.user=new f,this.user.library=new m,this.libraryState=new a(null,{library:this.user.library}),this.navSidebar=g.navSidebar=new d({width:150}),this.infoSidebar=g.infoSidebar=new d({width:250}),this.initLayout(),this.pubsub=g,g.user=this.user,g.libraryState=this.libraryState,g.router=new h,this.user.fetch({success:function(){return t.libraryState.library.fetch({reset:!0}).then(function(){return Backbone.history.start({pushState:!0})})}}),this.initPlayer(),this.initSidebars(),r(window).on("beforeunload",function(){return t.user.get("confirm_exit")&&t.player.playing()?"CloudTunes music is still playing, do you really want to leave?":void 0})},t.prototype.initLayout=function(){return new s({el:r(document.body)}).render()},t.prototype.initSidebars=function(){return new u({model:this.navSidebar,el:r("#nav-sidebar")}).render(),new o({model:this.infoSidebar,el:r("#info-sidebar")}).render()},t.prototype.initPlayer=function(){var t,n,i,o=this;return t=e("models/player"),n=e("views/player_view"),this.player=g.player=new t,i=io.connect("http:///player"),io.connect("http:///remote").on("play_artist",function(t){var e;return e=o.user.library.playlists.at(0).getChild(),e.criteria.set({artist:t}),o.player.replaceQueue(e.getTracks()),o.player.play()}).on("play_pause",function(){return o.player.toggle()}).on("play",function(t){var e;return t&&(e=o.user.library.get(t)),o.player.play(e)}).on("clear",function(){return o.player.queue.clear(),o.player.stop()}).on("queue",function(t){var e;return e=o.user.library.playlists.at(t),o.player.replaceQueue(e.getTracks())}).on("select",function(t){var e;return e=o.user.library.playlists.at(t),e?e.collection.selected(e):void 0}).on("pause",function(){return o.player.pause()}).on("prev",function(){return o.player.prev()}).on("next",function(){return o.player.next()}),new n({model:this.player,el:r("#player")}).render(),this.user.library.playlists.unshift(new p({id:"queue",parent:this.player.queue,name:"Play Queue"})),this.player.on("change:state",function(){var t;return o.player.playing()&&(t=o.player.get("track"),t!==o.player.previous("track"))?i.emit("play",{track_dict:t}):void 0}),this.player.on("change:state",function(){var t,e;return o.player.playing()&&g.user.get("desktop_notifications")?(e=o.player.get("track"),t="",e.get("album")&&(t+=" from "+e.get("album")),y({title:" Now Playing",body:""+e.get("artist")+"  "+e.get("title")})):void 0}),this.player.on("change:state",function(){var t,e;return e=o.player.get("track"),e?(t=o.player.playing()?c:l,document.title=""+t+" "+e.get("title")+"  "+e.get("artist")):document.title="cloudtunes"})},t}(),n.exports=i}),require.register("main",function(t,e){var n,r,i;i=e("pubsub"),n=e("application"),r=e("backbone"),window.WEB_SOCKET_DEBUG=!0,window.WEB_SOCKET_SWF_LOCATION="/static/socketio/WebSocketMain.swf",window.soundManager.setup({url:"/static/soundmanager/",onready:function(){}}),r.urlRoot="/api/",r.socket=io.connect("///model"),"#_=_"===window.location.hash&&(window.location.hash="",history.pushState("",document.title,window.location.pathname)),$(function(){var t;return t=new n,window.app=t,t.initialize()})}),require.register("models/library_state",function(t,e,n){var r,i,o,s,a,u,l,c,p,h,d,f=function(t,e){return function(){return t.apply(e,arguments)}},m={}.hasOwnProperty,y=function(t,e){function n(){this.constructor=t}for(var r in e)m.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};p=e("pubsub"),s=e("mvc").Model,c=e("models/user_library"),h=e("models/lists/virtual"),r=h.AlbumNameList,i=h.ArtistNameList,l=e("models/lists/tracklist"),a=e("models/lists/states").Ordering,u={d:"Dropbox",y:"YouTube"},o=function(t){function e(){return this.selectTrack=f(this.selectTrack,this),this.selectAlbum=f(this.selectAlbum,this),this.selectArtist=f(this.selectArtist,this),this.updateLists=f(this.updateLists,this),this.setPlaylist=f(this.setPlaylist,this),d=e.__super__.constructor.apply(this,arguments)}return y(e,t),e.prototype.defaults={playlist:null,artist:null,album:null,track:null,sortBy:"artist",ordering:"asc",centerY:25,centerX:35,trackColumns:[5,32,32]},e.prototype.initialize=function(t,e){var n=this;return this.library=e.library,this.library.playlists.on("change:selected",function(t){return t.get("selected")?n.setPlaylist(t):void 0}),this.library.playlists.selected(this.library.playlists.first()),this.library.on("reset",function(){return n.library.playlists.selected(n.library.playlists.first())}),this.on("change:artist change:album change:sortBy change:ordering",function(){return n.updateLists()}),this.library.on("all",function(){return n.trigger("tracks:"+arguments[0],_.toArray(arguments).slice(1))}),p.on("select:artist",this.selectArtist).on("select:album",this.selectAlbum).on("select:track",this.selectTrack),io.connect("http:///sync").on("track:add",function(t){return n.library.add(JSON.parse(t))}).on("track:change",function(t){return n.library.add(JSON.parse(t))}).on("track:remove",function(t){var e;return e=n.library.byId[t],e?n.library.remove(e):void 0})},e.prototype.getPlaylist=function(){return this.get("playlist")},e.prototype.getArtistList=function(){return this.getPlaylist().children.artists},e.prototype.getAlbumList=function(){return this.getPlaylist().children.albums},e.prototype.getTrackList=function(){return this.getPlaylist().children.tracks},e.prototype.setPlaylist=function(t){return t.children||(t.children={artists:t.getArtistList(),albums:t.getAlbumList(),tracks:t.getChild()}),this.set("playlist",t)},e.prototype.updateLists=function(){var t;return console.log("updateLists"),t=this.getPlaylist(),t.children?(t.children.albums.criteria.set({artist:this.get("artist")}),t.children.tracks.criteria.set({artist:this.get("artist"),album:this.get("album")}),t.children.tracks.ordering.set({field:this.get("sortBy"),direction:this.get("ordering")})):void 0},e.prototype.selectArtist=function(t){return null==t&&(t=null),console.log("selectArtist",t),t?this.set({artist:t.get("artist"),album:null,track:t}):this.set({artist:null})},e.prototype.selectAlbum=function(t){return null==t&&(t=null),t?this.set({artist:t.get("artist"),album:t.get("album"),track:t}):this.set({album:null})},e.prototype.selectTrack=function(t){return null==t&&(t=null),this.set({track:t,artist:t.get("artist"),album:t.get("album")})},e.prototype.toggleOrdering=function(){return this.set("ordering",this.get("ordering")===a.ASC?a.DESC:a.ASC)},e}(s),n.exports=o}),require.register("models/lists/base",function(t,e,n){var r,i,o,s,a,u,l,c=function(t,e){return function(){return t.apply(e,arguments)}},p={}.hasOwnProperty,h=function(t,e){function n(){this.constructor=t}for(var r in e)p.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};u=e("underscore"),a=e("pubsub"),o=e("mvc").Model,l=e("models/lists/states"),i=l.Criteria,s=l.Ordering,r=function(t){function e(t,n){this._proxyRemove=c(this._proxyRemove,this),this._proxyChange=c(this._proxyChange,this),this._proxyAdd=c(this._proxyAdd,this),this.reset=c(this.reset,this);var r;if(!t.parent)throw"MISSING PARENT LIST";r=[t.parent,t.criteria||new this.Criteria,t.ordering||new this.Ordering],this.parent=r[0],this.criteria=r[1],this.ordering=r[2],e.__super__.constructor.call(this,u.omit(t,"parent","criteria","ordering"),n),this.listenTo(this.criteria,"change",this.reset),this.listenTo(this.ordering,"change",this.reset),this.listenTo(this.parent,"reset add change remove",this.reset)}return h(e,t),e.prototype.namespace=null,e.prototype.parent=null,e.prototype.criteria=null,e.prototype.ordering=null,e.prototype.cachedResult=null,e.prototype.Criteria=i,e.prototype.Ordering=s,e.prototype.reset=function(){return this.cachedResult=null,this.trigger("reset")},e.prototype.close=function(){return this.parent.off(null,null,this)},e.prototype.getTracks=function(){return this.criteria.apply(this.parent.getTracks())},e.prototype.getResult=function(){return this.cachedResult||(this.cachedResult=this._getResult()),this.cachedResult},e.prototype.clone=function(){var t;return t=u.extend({},this.attributes,{parent:this.parent,criteria:this.criteria.clone(),ordering:this.ordering.clone()}),new this.constructor(t)},e.prototype._getResult=function(){return this.ordering.apply(this._getValues(this.getTracks()))},e.prototype._includes=function(t){return u.include(this.getResult(),this._getValue(t))},e.prototype._getValue=function(){throw"NOT IMPLEMENTED"},e.prototype._getValues=function(){throw"NOT IMPLEMENTED"},e.prototype._proxyAdd=function(t){var e;return console.log("_proxyAdd",this.criteria.matches(t),this,t),this.criteria.matches(t)?(e=this._add(t),this.trigger("add",t,e),this.trigger(this.namespace+":add",t)):void 0},e.prototype._proxyChange=function(t){var e;return this._includes(t)?(e=u.indexOf(this.cachedResult,this._getValue(t)),this.trigger("change",t,e),this.trigger(this.namespace+":change",t)):void 0},e.prototype._proxyRemove=function(t){var e;return this._includes(t)?(e=this._remove(t),this.trigger("remove",t,e),this.trigger(this.namespace+":remove",t)):void 0},e.prototype._add=function(t){var e;return this.getResult(),e=this.ordering.getSortedIndex(this.cachedResult,this._getValue(t)),this.cachedResult.splice(e,0,this._getValue(t)),e},e.prototype._remove=function(t){var e;return this.getResult(),e=u.indexOf(this.cachedResult,this._getValue(t)),this.cachedResult.splice(e,1),e},e}(o),n.exports=r}),require.register("models/lists/play_queue",function(t,e,n){var r,i,o,s,a;r=e("backbone"),a=e("underscore"),i=e("models/lists/states").NullOrdering,s=e("models/lists/tracklist"),o=function(){function t(){this.tracks=[],this.clear()}return a.extend(t.prototype,r.Events),t.prototype.len=function(){return this.tracks.length},t.prototype.getCurrent=function(){return this.tracks[this.index]},t.prototype.setCurrent=function(t){var e;if(e=a.indexOf(this.tracks,t),-1===e)throw"Track not in queue!";return this.index=e},t.prototype.hasNext=function(){return this.len()&&this.len()>this.index+1},t.prototype.hasPrev=function(){return this.index>0},t.prototype.next=function(){return this.hasNext()?this.tracks[++this.index]:void 0},t.prototype.prev=function(){return this.hasPrev()?this.tracks[--this.index]:void 0},t.prototype.rewind=function(){return this.index=0},t.prototype.clear=function(t){return null==t&&(t={silent:!1}),this.rewind(),this.tracks.length=0,t.silent?void 0:this.trigger("reset")},t.prototype.replace=function(t){return this.clear({silent:!0}),this.add(t),this.trigger("reset")},t.prototype.add=function(t){return Array.prototype.push.apply(this.tracks,t),this.trigger("reset")},t.prototype.remove=function(){},t.prototype.move=function(t,e){var n;if(console.log("moving",t.get("title"),"to",e),n=a.indexOf(this.tracks,t),-1===n)throw"cannot move track; not in queue";return n===e?(console.log("no change"),void 0):(this.tracks.splice(n,1),e>n&&(e-=1),console.log("@tracks.splice(",e,"0",t,")"),this.tracks.splice(e,0,t),this.trigger("reset"))},t.prototype.getTracks=function(){return[].concat(this.tracks)},t.prototype.getResult=function(){return this.getTracks()},t}(),n.exports=o}),require.register("models/lists/playlists",function(t,e,n){var r,i,o,s,a,u,l,c,p,h,d,f,m,y={}.hasOwnProperty,g=function(t,e){function n(){this.constructor=t}for(var r in e)y.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=e("mvc").Collection,p=e("pubsub"),l=e("models/lists/tracklist"),o=e("models/lists/states").NullOrdering,a=function(t){function e(){return h=e.__super__.constructor.apply(this,arguments)}return g(e,t),e.prototype.getRoute=function(){return"/playlist/"+this.id},e.prototype.acceptsTracks=function(){return!1},e.prototype.canRename=function(){return!1},e.prototype.canDelete=function(){return!1},e}(l),c=function(t){function e(t,n){var r;t.parent=p.user.library,r=t.tracks||[],delete t.tracks,e.__super__.constructor.call(this,t,n),this.criteria.set("id",r)}return g(e,t),e.prototype.editable=!0,e.prototype.defaults={icon:"music"},e.prototype.acceptsTracks=function(){return!0},e.prototype.canRename=function(){return!0},e.prototype.canDelete=function(){return!0},e.prototype.addTracks=function(t){var e=this;return p.user.library.ensureIncluded(t).done(function(){var n,r;return r=e.criteria.get("id"),n=_.pluck(t,"id"),n=_.difference(n,r),n.length?(e.criteria.set({id:n.concat(r)}),e._updateTracks(n,"add")):void 0})},e.prototype.removeTracks=function(t){var e,n;return e=this.criteria.get("id"),n=_.pluck(t,"id"),n=_.intersection(n,e),n.length?(this.criteria.set("id",_.without(e,n)),this._updateTracks(n,"remove")):void 0},e.prototype._updateTracks=function(t,e){return $.ajax({url:this.url()+"/tracks/"+e,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(t)})},e}(a),s=function(t){function e(){return d=e.__super__.constructor.apply(this,arguments)}return g(e,t),e.prototype.defaults={icon:"list-ol"},e.prototype.Ordering=o,e.prototype.acceptsTracks=function(){return!0},e.prototype.getRoute=function(){return"/queue"},e.prototype.getChild=function(){return this},e.prototype.addTracks=function(t){return this.parent.add(t)},e}(a),r=function(t){function e(){return f=e.__super__.constructor.apply(this,arguments)}return g(e,t),e.prototype.defaults={icon:"globe"},e.prototype.acceptsTracks=function(){return!0},e.prototype.getRoute=function(){return"/collection"},e.prototype.addTracks=function(t){return this.parent.ensureIncluded(t)},e}(a),u=function(t){function e(){return m=e.__super__.constructor.apply(this,arguments)}return g(e,t),e.prototype.model=c,e.prototype.url="/api/library/playlists",e.prototype.selected=function(t){var e;return null==t&&(t=null),t?(null!=(e=this.selected())&&e.set({selected:!1},{silent:!0}),t.set("selected",!0)):this.findWhere({selected:!0})},e}(i),n.exports={Playlist:a,Playlists:u,PlayQueuePlaylist:s,AllPlaylist:r,UserPlaylist:c}}),require.register("models/lists/states",function(t,e,n){var r,i,o,s,a,u,l,c,p,h,d=function(t,e){return function(){return t.apply(e,arguments)}},f={}.hasOwnProperty,m=function(t,e){function n(){this.constructor=t}for(var r in e)f.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=e("mvc").Model,u=e("underscore"),r=function(t){function e(){return this.matches=d(this.matches,this),l=e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.apply=function(t){return this.hasRules()&&(t=u.filter(t,this.matches)),t},e.prototype.matches=function(t){var e,n,r,i;i=this.attributes;for(e in i)if(n=i[e],r=t.get(e),null!==n&&!(u.isArray(n)&&u.contains(n,r)||n===r))return!1;return!0},e.prototype.hasRules=function(){return Boolean(u.compact(u.values(this.attributes)).length)},e}(i),o=function(t){function e(){return c=e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.apply=u.identity,e}(i),s=function(t){function e(){return p=e.__super__.constructor.apply(this,arguments)}return m(e,t),e.ASC="asc",e.DESC="desc",e.prototype.defaults={direction:e.ASC},e.prototype.apply=function(t){return t=this._sortAscending(t),this.get("direction")===e.DESC&&t.reverse(),t},e.prototype.getSortedIndex=function(t,e){return u.sortedIndex(t,e,this._getComparator())},e.prototype._sortAscending=function(t){return t.sort()},e.prototype._getComparator=function(){return function(t){return console.log(t),t.toLowerCase()}},e}(o),a=function(t){function e(){return h=e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.defaults=u.extend({field:"artist"},s.prototype.defaults),e.prototype._sortAscending=function(t){return u.sortBy(t,this._getComparator())},e.prototype._getComparator=function(){var t,e,n;switch(n=["0000","000","00","0"],e=function(t){return n[String(t.get("number")).length]+t.get("number")},this.get("field")){case"artist":return function(t){return[t.get("artist").toLowerCase(),t.get("album").toLowerCase(),e(t),t.get("title").toLowerCase()].join("|")};case"album":return function(t){return[t.get("album").toLowerCase(),e(t),t.get("title").toLowerCase()].join("|")};default:return t=this.get("field"),"number"!==t?function(e){return e.get(t).toLowerCase()}:function(e){return e.get(t)}}},e}(s),n.exports={Criteria:r,NullOrdering:o,Ordering:s,TrackOrdering:a}}),require.register("models/lists/tracklist",function(t,e,n){var r,i,o,s,a,u,l,c={}.hasOwnProperty,p=function(t,e){function n(){this.constructor=t}for(var r in e)c.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};o=e("models/lists/base"),u=e("models/lists/virtual"),r=u.AlbumNameList,i=u.ArtistNameList,a=e("models/lists/states").TrackOrdering,s=function(t){function e(){return l=e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.namespace="track",e.prototype.Ordering=a,e.prototype.acceptsTracks=function(){return!1},e.prototype.getChild=function(){return new e({parent:this})},e.prototype.getAlbumList=function(){return new r({parent:this})},e.prototype.getArtistList=function(){return new i({parent:this})},e.prototype._getValue=_.identity,e.prototype._getValues=_.identity,e}(o),n.exports=s}),require.register("models/lists/virtual",function(t,e,n){var r,i,o,s,a,u,l,c=function(t,e){return function(){return t.apply(e,arguments)}},p={}.hasOwnProperty,h=function(t,e){function n(){this.constructor=t}for(var r in e)p.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};o=e("models/lists/base"),s=function(t){function e(){return this._getValue=c(this._getValue,this),a=e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype._getValue=function(t){return t.get(this.namespace)},e.prototype._getValues=function(t){return _.unique(_.map(t,this._getValue))},e}(o),r=function(t){function e(){return u=e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.namespace="album",e}(s),i=function(t){function e(){return l=e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.namespace="artist",e}(s),n.exports={AlbumNameList:r,ArtistNameList:i}}),require.register("models/mb/album",function(t,e,n){var r,i,o,s,a,u,l,c,p={}.hasOwnProperty,h=function(t,e){function n(){this.constructor=t}for(var r in e)p.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};u=e("mvc"),a=u.Model,r=u.Collection,s=e("models/mb/track").MBTracks,i=function(t){function e(){return l=e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.initialize=function(){return this.tracks=new s(this)},e.prototype.getCloudtunesTracks=function(){var t,e=this;return t=new $.Deferred,$.when(this.tracks.ensureFetched()).then(function(){var n;return n=e.tracks.map(function(t){return t.videos.fetch()}),$.when.apply(null,n).done(function(){var n;return n=_.compact(e.tracks.map(function(t){var e;return null!=(e=t.videos.first())?e.toCloudtunesTrack():void 0})),t.resolve(n)})}),t.promise()},e.prototype.getDragged=e.prototype.getCloudtunesTracks,e}(a),o=function(t){function e(){return c=e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.model=i,e.prototype.initialize=function(t){this.artist=t},e.prototype.parse=function(t){var e,n,r;for(n=0,r=t.length;r>n;n++)e=t[n],e.artist=this.artist;return t},e}(r),n.exports={MBAlbums:o}}),require.register("models/mb/artist",function(t,e,n){var r,i,o,s,a,u,l,c,p={}.hasOwnProperty,h=function(t,e){function n(){this.constructor=t}for(var r in e)p.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};u=e("underscore"),l=e("mvc"),s=l.Model,r=l.Collection,i=e("models/mb/album").MBAlbums,a=e("models/mb/youtube"),o=function(t){function e(){return c=e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.url=function(){return"/api/artist/"+this.id},e.prototype.initialize=function(){return this.albums=new i(this),this.videos=new a(null,{mbartist:this})},e.prototype.parse=function(t){return t.albums&&(this.albums.reset(this.albums.parse(t.albums)),delete t.albums),t},e.prototype.getQuery=function(){return this.get("name")},e.prototype.getLibraryTopTracks=function(){return this.videos.map(function(t){return t.toCloudtunesTrack()})},e.prototype.getSimilar=function(){return this.get("similar")},e}(s),n.exports=o}),require.register("models/mb/track",function(t,e,n){var r,i,o,s,a,u,l,c,p,h,d={}.hasOwnProperty,f=function(t,e){function n(){this.constructor=t}for(var r in e)d.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};c=e("mvc"),s=c.Model,r=c.Collection,u=e("models/mb/youtube"),a=e("models/track"),l=e("pubsub"),i=function(t){function e(){return p=e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.initialize=function(){return this.videos=new u(null,{mbtrack:this})},e.prototype.getQuery=function(){return""+this.get("artist").get("name")+" - "+this.get("title")},e.prototype.toCloudtunesTrack=function(){return new a({number:this.get("number"),title:this.get("title"),album:this.get("album").get("name"),artist:this.get("artist").get("name"),mbid:this.id,album_mbid:this.get("album").id,artist_mbid:this.get("artist").id})},e.prototype.getDragged=function(){var t,e=this;return t=new $.Deferred,$.when(this.videos.ensureFetched()).then(function(){var n;return n=[],e.videos.length&&n.push(e.videos.first().toCloudtunesTrack()),t.resolve(n)}),t},e}(s),o=function(t){function e(){return h=e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.model=i,e.prototype.initialize=function(t){this.album=t},e.prototype.url=function(){return"/api/album/"+this.album.id},e.prototype.parse=function(t){var e,n,r;for(n=0,r=t.length;r>n;n++)e=t[n],e.artist=this.album.get("artist"),e.album=this.album;return t},e}(r),n.exports={MBTracks:o}}),require.register("models/mb/youtube",function(t,e,n){var r,i,o,s,a,u,l,c,p,h,d,f,m,y={}.hasOwnProperty,g=function(t,e){function n(){this.constructor=t}for(var r in e)y.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};h=e("underscore"),d=e("mvc"),i=d.Model,r=d.Collection,c=e("utils").escapeRegExp,p=e("pubsub"),s=e("models/track"),u=e("source_ids").YOUTUBE,window.REGISTRY=o={},a=function(t){function e(){return f=e.__super__.constructor.apply(this,arguments)}return g(e,t),e.prototype.toCloudtunesTrack=function(){var t,e,n,r;return r=this.collection,e=r.mbtrack,t=r.mbartist,this._ctTrack?this._ctTrack:(this._ctTrack=p.user.library.findWhere({source:u,source_id:this.id}),this._ctTrack?this._ctTrack:o[this.id]?o[this.id]:(n=e?e.toCloudtunesTrack():new s({artist:t.get("name"),title:this.getCleanTitle(t.get("name")),artist_mbid:t.id}),n.set({source:u,source_id:this.id}),o[this.id]=n))},e.prototype.getCleanTitle=function(t){var e,n,r;return e=c(t),e=new RegExp("^\\s*(the\\s*)?"+e+"[\\s|:/-]*","i"),n=this.get("title").replace(e,""),('"'===(r=n[0])||"'"===r)&&n[0]===n[n.length-1]&&(n=n.slice(1,-1)),n},e}(i),l=function(t){function e(){return m=e.__super__.constructor.apply(this,arguments)}return g(e,t),e.prototype.model=a,e.prototype.initialize=function(t,n){if(this.mbartist=n.mbartist,this.mbtrack=n.mbtrack,!this.mbartist&&!this.mbtrack)throw"MISSING TRACK OR ARTIST";return e.__super__.initialize.call(this,t,n)},e.prototype.url=function(){var t;return t=(this.mbartist||this.mbtrack).getQuery(),t=encodeURIComponent(t),"https://gdata.youtube.com/feeds/api/videos?v=2&alt=jsonc&category=Music&q="+t},e.prototype.fetch=function(t){return t||(t={}),t.dataType="jsonp",e.__super__.fetch.call(this,t)},e.prototype.parse=function(t){return t.data.items},e}(r),n.exports=l}),require.register("models/media/base",function(t,e,n){var r,i,o,s,a={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=e("mvc").Model,o=function(t){return console.error("NotImplementedError "+t)},r=function(t){function e(){return s=e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.defaults={position:0,loaded:0,track:null},e.prototype.play=function(){return o("play")},e.prototype.pause=function(){return o("pause")},e.prototype.paused=function(){return o("paused")},e.prototype.stop=function(){return o("stop")},e.prototype.setVolume=function(){return o("setVolume")},e.prototype.setPosition=function(){return o("setPosition")},e}(i),n.exports=r}),require.register("models/media/sound",function(t,e,n){var r,i,o,s,a,u={}.hasOwnProperty,l=function(t,e){function n(){this.constructor=t}for(var r in e)u.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=e("models/media/base"),o=function(t){function e(){return s=e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.initialize=function(){var t=this;return e.__super__.initialize.apply(this,arguments),this.sound=soundManager.createSound({id:"t"+this.id,url:this._getUrl(),onfinish:function(){return t.trigger("finish")},whileplaying:_.throttle(function(){return t.sound?t.set("position",100*(t.sound.position/t.sound.durationEstimate)):void 0},1e3),whileloading:_.throttle(function(){return t.sound?t.set("loaded",100*(t.sound.bytesLoaded/t.sound.bytesTotal)):void 0},200)})},e.prototype._getUrl=function(){throw"not implemented"},e.prototype.play=function(){return this.sound.play()},e.prototype.pause=function(){return this.sound.pause()},e.prototype.paused=function(){return this.sound.paused},e.prototype.resume=function(){return this.sound.resume()},e.prototype.stop=function(){return this.sound.stop(),soundManager.destroySound(this.sound.id),delete this.sound},e.prototype.setVolume=function(t){return this.sound.setVolume(t)},e.prototype.setPosition=function(t){return this.sound.setPosition(this.sound.durationEstimate/100*t)},e}(i),r=function(t){function e(){return a=e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype._getUrl=function(){return"/dropbox/play/"+this.get("track").id},e}(o),n.exports={DropboxTrack:r}}),require.register("models/media/youtube",function(t,e,n){var r,i,o,s,a,u,l,c={}.hasOwnProperty,p=function(t,e){function n(){this.constructor=t}for(var r in e)c.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},h=function(t,e){return function(){return t.apply(e,arguments)}};i=e("mvc").Model,r=e("models/media/base"),o=function(t){function e(){return u=e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.initialize=function(){return this.player=a},e.prototype.stop=function(){return this.player.off(null,null,this),this.player.stop()},e.prototype.play=function(){var t=this;return this.player.on("change:state",function(){return t.player.get("state")===t.player.ENDED?t.trigger("finish"):void 0},this),this.player.on("change:position",function(e,n){return t.player=e,t.set("position",n)},this),this.player.on("change:loaded",function(e,n){return t.player=e,t.set("loaded",n)},this),this.player.play(this.get("track").get("source_id"))},e.prototype.pause=function(){return this.player.pause()},e.prototype.paused=function(){return this.player.paused()},e.prototype.resume=function(){return this.player.resume()},e.prototype.setVolume=function(t){return this.player.setVolume(t)},e.prototype.setPosition=function(t){return this.player.setPosition(t)},e}(r),s=function(t){function e(){return this.handleError=h(this.handleError,this),this.reportProgress=h(this.reportProgress,this),this.handleStateChanged=h(this.handleStateChanged,this),this.playerReady=h(this.playerReady,this),l=e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.id="youtube-player",e.prototype.UNSTARTED=-1,e.prototype.ENDED=0,e.prototype.PLAYING=1,e.prototype.PAUSED=2,e.prototype.BUFFERING=3,e.prototype.VIDEO_CUED=5,e.prototype.INITIALIZING=11,e.prototype.READY=12,e.prototype.ERROR=13,e.prototype.defaults={state:e.prototype.INITIALIZING,error:"",position:0,loaded:0},e.prototype.initialize=function(){var t;return $("<div id='"+this.id+"'></div>").appendTo($("#medium")),window.youtubePlayer=this,window.onYouTubePlayerReady=this.playerReady,t={url:"http://www.youtube.com/apiplayer?enablejsapi=1&version=3",id:this.id,width:"150",height:"150",version:"8",xiUrl:null,flashVars:null,params:{allowScriptAccess:"always"},attributes:null,callback:this.swfReady},swfobject.embedSWF(t.url,t.id,t.width,t.height,t.version,t.xiUrl,t.flashVars,t.params,t.attributes,t.callback)},e.prototype.player=function(){},e.prototype.swfReady=function(t){return t.success?t.ref.style.visibility="hidden":(alert("YouTube player failed to load"),void 0)},e.prototype.playerReady=function(){var t;return t=document.getElementById(this.id),this.set({state:this.READY}),t.addEventListener("onStateChange","youtubePlayer.handleStateChanged"),t.addEventListener("onError","youtubePlayer.handleError"),this.player=function(){return t},this.autoplay&&this.play(),this.autovolume?this.setVolume(this.autovolume):void 0},e.prototype.handleStateChanged=function(t){return window.clearInterval(this.timer),(t===this.BUFFERING||t===this.PLAYING)&&(this.timer=window.setInterval(this.reportProgress,1e3)),this.set("state",t)},e.prototype.reportProgress=function(){return this.set({position:100*(this.player().getCurrentTime()/this.player().getDuration()),loaded:100*this.player().getVideoLoadedFraction()})},e.prototype.handleError=function(t){var e;return e=function(){switch(t){case 2:return"request contains an invalid parameter";case 100:return"the video requested was not found";case 101:case 150:return"the video requested does not allow playback in the embedded players";default:return"unknown error"}}(),this.set({state:this.ERROR,error:e})},e.prototype.stop=function(){return this.player().style.visibility="hidden",this.player().stopVideo()},e.prototype.play=function(t){return console.log("playing ",t),this.player().style.visibility="visible",this.player()?this.player().loadVideoById(t):this.autoplay=!0},e.prototype.pause=function(){return this.player().pauseVideo()},e.prototype.paused=function(){return this.player().getPlayerState()===this.PAUSED},e.prototype.resume=function(){return this.player().playVideo()},e.prototype.setVolume=function(t){return this.player()?this.player().setVolume(t):this.autovolume=t},e.prototype.setPosition=function(t){var e;if(this.player())return e=this.player().getDuration(),0===e?0:this.player().seekTo(e/100*t,!0)},e}(i),a=new s,n.exports=o}),require.register("models/player",function(t,e,n){var r,i,o,s,a,u,l,c,p,h,d,f,m,y,g,v,_,b=function(t,e){return function(){return t.apply(e,arguments)}},w={}.hasOwnProperty,x=function(t,e){function n(){this.constructor=t}for(var r in e)w.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};y=e("mvc"),s=y.Model,r=y.Collection,m=e("pubsub"),g=e("source_ids"),i=g.DROPBOX,h=g.YOUTUBE,o=e("models/media/sound").DropboxTrack,d=e("models/media/youtube"),l=e("models/lists/play_queue"),v=["playing","paused","stopped"],u=v[0],a=v[1],p=v[2],f=function(t){switch(t.get("source")){case i:return new o({track:t});case h:return new d({track:t});default:throw"Unknown source"}},c=function(t){function e(){return this.prev=b(this.prev,this),this.next=b(this.next,this),this.resume=b(this.resume,this),this.pause=b(this.pause,this),this.toggle=b(this.toggle,this),this.stop=b(this.stop,this),this.position=b(this.position,this),this.volume=b(this.volume,this),_=e.__super__.constructor.apply(this,arguments)
}return x(e,t),e.prototype.defaults={repeat:!1,random:!1,state:p,track:null,volume:50,position:0,duration:0,loaded:0,playlist:null},e.prototype.initialize=function(t,n){return e.__super__.initialize.call(this,t,n),this.queue=new l},e.prototype.state=function(t){return null==t&&(t=null),t?this.set("state",t):this.get("state")},e.prototype.playing=function(t){return this.state(null!=t?u:null)===u},e.prototype.paused=function(t){return this.state(null!=t?a:null)===a},e.prototype.stopped=function(t){return this.state(null!=t?p:null)===p},e.prototype.volume=function(t){var e;return null!=t?(this.set("volume",t),null!=(e=this.medium)?e.setVolume(t):void 0):this.get("volume")},e.prototype.position=function(t,e){var n;return null==t?this.get("position"):(this.set("position",t),e?void 0:null!=(n=this.medium)?n.setPosition(t):void 0)},e.prototype.play=function(t){var e=this;return null==t&&(t=null),this.stop(),t?this.queue.setCurrent(t):t=this.queue.getCurrent(),this.medium=f(t),this.medium.on("finish",this.next,this),this.medium.on("change:position",function(t,n){return t===e.medium?e.position(n,!0):void 0},this),this.medium.on("change:loaded",function(t,n){return t===e.medium?e.set("loaded",n):void 0},this),this.medium.setVolume(this.volume()),this.set({track:t,state:u,position:0,loaded:0}),this.medium.play()},e.prototype.stop=function(){return this.stopped(!0),this.medium?(this.medium.off(null,null,this),this.medium.stop(),delete this.medium):void 0},e.prototype.toggle=function(){var t;return this.medium?this.medium.paused()?this.resume():this.pause():(t=this.queue.getCurrent(),this.play(t))},e.prototype.pause=function(){return this.medium.pause(),this.paused(!0)},e.prototype.resume=function(){return this.playing(!0),this.medium.resume()},e.prototype.next=function(){return this.queue.hasNext()?this.play(this.queue.next()):this.get("repeat")?(this.queue.rewind(),this.play()):(this.stop(),this.queue.rewind())},e.prototype.prev=function(){var t;return t=this.queue.prev(),t?this.play(t):(this.stop(),this.queue.rewind())},e.prototype.replaceQueue=function(t){return this.stop(),this.queue.replace(t)},e}(s),n.exports=c}),require.register("models/sidebar",function(t,e,n){var r,i,o,s,a={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};o=e("underscore"),r=e("mvc").Model,i=function(t){function e(){return s=e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.defaults={width:180},e}(r),n.exports=i}),require.register("models/track",function(t,e,n){var r,i,o,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=e("mvc").Model,i=function(t){function e(){return o=e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.defaults={artist:"Unknown Artist",album:"Unknown Album",title:"Untitled Track"},e.prototype.url=function(){var t;return t=""+this.collection.url+"/tracks",this.id&&(t+="/"+this.id),t},e.prototype.equals=function(t){return this===t?!0:this.has("mbid")&&t.has("mbid")?this.get("mbid")===t.get("mbid"):void 0},e}(r),n.exports=i}),require.register("models/user",function(t,e,n){var r,i,o,s,a={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};o=e("underscore"),r=e("mvc").Model,i=function(t){function e(){return s=e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.url="/api/user",e.prototype.isNew=function(){return!1},e.prototype.initialize=function(){},e.prototype.serverChange=function(t){return t=JSON.parse(t),this.set(t)},e.prototype.toJSON=function(){return o.pick(this.attributes,"email","name","picture","username","desktop_notifications","confirm_exit","location")},e}(r),n.exports=i}),require.register("models/user_library",function(t,e,n){var r,i,o,s,a,u,l,c,p,h,d,f,m,y,g,v={}.hasOwnProperty,b=function(t,e){function n(){this.constructor=t}for(var r in e)v.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=e("backbone"),o=e("mvc").Collection,m=e("models/lists/playlists"),a=m.Playlist,u=m.Playlists,c=m.TrackList,r=m.AllPlaylist,c=e("models/lists/tracklist"),l=e("models/track"),y=e("source_ids"),s=y.DROPBOX,h=y.YOUTUBE,f=function(t,e){var n,r,i,o,s,a,u,l;a=[];for(o in t){i=t[o];for(n in i)for(r=i[n],u=0,l=r.length;l>u;u++)s=r[u],a.push(d(o,n,s,e))}return a},d=function(t,e,n,r){var i,o,s,a,u;for(o=0,s={artist:t,album:e},o=a=0,u=r.length;u>a;o=++a)i=r[o],s[i]=n[o];return s},p=function(t){function e(){return g=e.__super__.constructor.apply(this,arguments)}return b(e,t),e.prototype.model=l,e.prototype.url="/api/library",e.prototype.initialize=function(t,n){return e.__super__.initialize.call(this,t,n),this.tracklist=new c({parent:this}),this.playlists=new u([new r({parent:this,name:"All",id:"all"}),new a({parent:this,name:"Dropbox",icon:"dropbox",id:"dropbox",criteria:new c.prototype.Criteria({source:s})}),new a({parent:this,name:"YouTube",icon:"youtube",id:"youtube",criteria:new c.prototype.Criteria({source:h})})])},e.prototype.parse=function(t){return this.playlists.add(t.playlists),f(t.collection,t._fields)},e.prototype.getTracks=function(){return this.models},e.prototype.ensureIncluded=function(t){var e,n,r,i;return e=new $.Deferred,n=_.where(t,{id:void 0}),n.length?(this.add(n),r=function(){var t,e,r;for(r=[],t=0,e=n.length;e>t;t++)i=n[t],r.push(i.save());return r}(),$.when.apply(null,r).then(e.resolve),e.promise()):e.resolve()},e}(o),n.exports=p}),require.register("models/youtube/track",function(t,e){var n,r,i,o={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=e("models/track"),r=function(t){function e(){return i=e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.getImages=function(){return["http://i.ytimg.com/vi/"+this.getSourceID()+"/default.jpg"]},e}(n)}),require.register("mvc",function(t,e,n){var r,i,o,s,a,u,l,c,p,h,d={}.hasOwnProperty,f=function(t,e){function n(){this.constructor=t}for(var r in e)d.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},m=function(t,e){return function(){return t.apply(e,arguments)}},y=[].slice;l=e("underscore"),r=e("backbone"),s=function(t){function e(){return c=e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.fetch=function(t){return this._deferred=e.__super__.fetch.call(this,t)},e.prototype.ensureFetched=function(t){return this._deferred?void 0:this.fetch(t)},e.prototype.toString=function(){return"["+this.constructor.name+" '"+(this.get("name")||this.get("title"))+"]'"},e}(r.Model),i=function(t){function e(){return p=e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.fetch=function(t){return this._deferred=e.__super__.fetch.call(this,t)},e.prototype.ensureFetched=function(t){return this._deferred?void 0:this.fetch(t)},e}(r.Collection),o=function(){function t(){}return t}(),u=function(t){function e(){var t;t=1<=arguments.length?y.call(arguments,0):[],this.render=m(this.render,this),this.remove=m(this.remove,this),this._forgetSubview=m(this._forgetSubview,this),this.subview=m(this.subview,this),this.subviews=[],this.subviewsByName={},e.__super__.constructor.apply(this,t)}return f(e,t),e.prototype.subviews=null,e.prototype.subviewsByName=null,e.prototype.container=null,e.prototype.template=null,e.prototype.subview=function(t,n){if(!n){if(!(t instanceof e))return this.subviewsByName[t];n=t,t=n.cid}return n.once("remove",this._forgetSubview),this.subviews.push(n),this.subviewsByName[t]=n,n},e.prototype._forgetSubview=function(t){return this.subviews=l.without(this.subviews,t),delete this.subviewsByName[name]},e.prototype.remove=function(){return this.trigger("remove",this),e.__super__.remove.call(this),this.off(),this.removeSubviews()},e.prototype.removeSubviews=function(){var t,e,n,r;for(r=this.subviews,e=0,n=r.length;n>e;e++)t=r[e],t.remove();return this.subviews.length=0},e.prototype.getTemplate=function(){return this.template},e.prototype.getTemplateData=function(){return this.model?this.model.toJSON():void 0},e.prototype.render=function(){var t;return t=this.getTemplate(),t&&this.$el.html(t(this.getTemplateData())),this.container&&$(this.container).append(this.el),this},e}(r.View),a=function(t){function e(){return h=e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.container="#page",e}(u),n.exports={Model:s,View:u,PageView:a,Collection:i,Controller:o}}),require.register("notifications",function(t,e,n){n.exports=function(t){var e,n,r,i,o;return n=t.image,o=t.title,e=t.body,(r=window.webkitNotifications)?(i=function(){var t;return t=r.createNotification(n,o,e),t.onclick=function(){return window.blur(),window.focus()},t.show()},0===r.checkPermission()?i():r.requestPermission(function(){return 0===r.checkPermission()?i():void 0})):void 0}}),require.register("pubsub",function(t,e,n){var r,i,o;r=e("backbone"),o=e("underscore"),i=o.extend({},r.Events),i.subscribe=i.on,i.unsubscribe=i.off,i.publish=i.trigger,n.exports=i}),require.register("router",function(t,e,n){var r,i,o,s,a,u,l,c,p,h,d={}.hasOwnProperty,f=function(t,e){function n(){this.constructor=t}for(var r in e)d.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=e("backbone"),p=e("pubsub"),s=e("views/library/library_page_view"),c=e("views/settings/settings_page_view"),r=e("views/artist/artist_page_view"),o=e("views/explore/explore_page_view"),l=e("views/search/search_page_view"),a=e("models/mb/artist"),u=function(t){function e(){return h=e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.routes={collection:"library",queue:"queue","playlist/:playlist":"library","settings/:section":"settings",settings:"settings","artist/:id/:section":"artist","artist/:id":"artist",search:"search","":"explore",":section":"explore"},e.prototype.explore=function(t){var e;return null!=(e=this.view)&&e.remove(),this.view=new o({section:t}).render()},e.prototype.search=function(){var t;return null!=(t=this.view)&&t.remove(),this.view=(new l).render()},e.prototype.queue=function(){return this.library("queue")},e.prototype.library=function(t){var e,n,r;return null==t&&(t="all"),null!=(r=this.view)&&r.remove(),n=p.user.library.playlists,e=n.get(t),e&&n.selected(e),this.view=new s({model:p.libraryState}),this.view.render()},e.prototype.settings=function(t){var e;return null!=(e=this.view)&&e.remove(),this.view=new c({model:p.user,section:t}),this.view.render()},e.prototype.artist=function(t,e){var n;return null!=(n=this.view)&&n.remove(),this.view=new r({model:new a({id:t}),section:e}),this.view.render()},e}(i.Router),n.exports=u}),require.register("source_ids",function(t,e,n){n.exports={DROPBOX:"d",YOUTUBE:"y"}}),require.register("templates/artist/album",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){function o(t,e){var r,i="";return i+='\n                <span class="type">',(r=n.subtypes)?r=r.call(t,{hash:{},data:e}):(r=t.subtypes,r=typeof r===l?r.apply(t):r),i+=c(r)+"</span>\n            "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var s,a,u="",l="function",c=this.escapeExpression,p=this;return u+='<h3 draggable="true">\n    <span class="name" title="Show tracks">\n        <img src="'+c((s=e.images,s=null==s||s===!1?s:s.medium,typeof s===l?s.apply(e):s))+'" />\n        ',(a=n.name)?a=a.call(e,{hash:{},data:i}):(a=e.name,a=typeof a===l?a.apply(e):a),u+=c(a)+'\n        <span class="meta">\n            ',a=n["if"].call(e,e.subtypes,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(a||0===a)&&(u+=a),u+='\n        </span>\n    </span>\n</h3>\n<div class="body">\n\n    <div class="buttons">\n        <span class="button play-all toggle icon-play" title="Play album">Play Album</span>\n        <!--<span class="button add-all toggle icon-plus" title="Add album to collection"></span>-->\n    </div>\n\n    <div class="tracklist">\n\n    </div>\n\n</div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("templates/artist/artist_list",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){function o(t,e){var r,i,o="";return o+='\n        <li>\n            <a href="/artist/',(r=n.id)?r=r.call(t,{hash:{},data:e}):(r=t.id,r=typeof r===u?r.apply(t):r),o+=l(r)+'" style="background-image: url(\''+l((r=t.images,r=null==r||r===!1?r:r.extralarge,typeof r===u?r.apply(t):r))+'\')">\n                <span class="name"><span>',(i=n.name)?i=i.call(t,{hash:{},data:e}):(i=t.name,i=typeof i===u?i.apply(t):i),o+=l(i)+"</span></span>\n            </a>\n        </li>\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var s,a="",u="function",l=this.escapeExpression,c=this;return a+='<ul class="artist-list">\n    ',s=n.each.call(e,e.artists,{hash:{},inverse:c.noop,fn:c.program(1,o,i),data:i}),(s||0===s)&&(a+=s),a+="\n</ul>\n"});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("templates/artist/track",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var o,s="",a="function",u=this.escapeExpression;return s+='<h4 title="Show track versions" draggable="true"><span>',(o=n.number)?o=o.call(e,{hash:{},data:i}):(o=e.number,o=typeof o===a?o.apply(e):o),s+=u(o)+".</span> ",(o=n.title)?o=o.call(e,{hash:{},data:i}):(o=e.title,o=typeof o===a?o.apply(e):o),s+=u(o)+'</h4>\n<div class="videos-wrap">\n    <div class="videos"></div>\n</div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("templates/artist/tracklist",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},'<!-- FIXME: duplicated in ./playlist_browse.hbs -->\n<div class="list tracks">\n    <div class="head-wrap">\n        <table class="head">\n            <tr>\n                <td></td>\n                <td>Name</td>\n            </tr>\n        </table>\n    </div>\n    <div class="body playable-list">\n\n    </div>\n</div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("templates/artist/video",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var o,s,a="",u="function",l=this.escapeExpression;return a+='<img src="'+l((o=e.thumbnail,o=null==o||o===!1?o:o.hqDefault,typeof o===u?o.apply(e):o))+'" />\n<span class="title">',(s=n.title)?s=s.call(e,{hash:{},data:i}):(s=e.title,s=typeof s===u?s.apply(e):s),a+=l(s)+"</span>\n"});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("templates/layout",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},'<div id="main">\n\n    <div id="nav-sidebar" class="sidebar">\n\n\n        <section class="explore">\n            <h2><a href="/">Cloudtunes</a></h2>\n\n            <ul></ul>\n\n        </section>\n\n        <section class="collection">\n            <h2>Collection</h2>\n\n            <ul class="builtin-playlists">\n            </ul>\n        </section>\n\n        <section class="playlists">\n            <h2>Playlists</h2>\n\n            <ul class="user-playlists"></ul>\n\n            <div class="tools">\n                <div class="button add create-playlist">\n                    <i class="icon-plus-sign"></i>\n                    New Playlist\n                </div>\n            </div>\n\n        </section>\n\n        <section class="user">\n\n            <div class="profile"></div>\n\n            <div class="settings">\n                <a href="/settings">\n                    <i class="icon-cog"></i>\n                </a>\n            </div>\n        </section>\n\n\n    </div>\n    <div class="resize-col resize-nav-sidebar"></div>\n\n    <div id="page"></div>\n\n\n    <div id="info-sidebar" class="sidebar">\n\n        <div id="medium"></div>\n        <div id="player"></div>\n\n    </div>\n    <div class="resize-col resize-info-sidebar"></div>\n\n</div>\n\n<div id="menu">\n    <div class="pointer"></div>\n</div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("templates/playlists/playlist_browse",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},'<div class="resize-row resize-main-grid"></div>\n<div class="resize-col resize-main-grid"></div>\n\n<div class="list artists">\n    <h2>Artists</h2>\n    <div class="body playable-list">\n\n    </div>\n</div>\n\n<div class="list albums">\n    <h2>Albums</h2>\n    <div class="body playable-list">\n\n    </div>\n</div>\n\n</div>\n\n<!--FIXME: duplicated in ./track_list.hbs-->\n<div class="list tracks">\n    <div class="head-wrap">\n        <table class="head">\n            <tr>\n                <td data-order-field="number"></td>\n                <td data-order-field="title">Track</td>\n                <td data-order-field="album">Album</td>\n                <td data-order-field="artist">Artist</td>\n            </tr>\n        </table>\n    </div>\n    <div class="body playable-list">\n\n    </div>\n</div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("templates/playlists/playlist_header",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){function o(){return'\n<span class="icon-cog options"></span>\n'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var s,a="",u="function",l=this.escapeExpression,c=this;return a+='<h2><i class="icon-',(s=n.icon)?s=s.call(e,{hash:{},data:i}):(s=e.icon,s=typeof s===u?s.apply(e):s),a+=l(s)+'" /> ',(s=n.name)?s=s.call(e,{hash:{},data:i}):(s=e.name,s=typeof s===u?s.apply(e):s),a+=l(s)+"</h2>\n\n",s=n["if"].call(e,e.showOptions,{hash:{},inverse:c.noop,fn:c.program(1,o,i),data:i}),(s||0===s)&&(a+=s),a+="\n"});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("templates/playlists/tracklist",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},'<!-- FIXME: duplicated in ./playlist_browse.hbs -->\n<div class="list tracks">\n    <div class="head-wrap">\n        <table class="head">\n            <tr>\n                <td data-order-field="number">#</td>\n                <td data-order-field="title">Name</td>\n                <td data-order-field="album">Album</td>\n                <td data-order-field="artist">Artist</td>\n            </tr>\n        </table>\n    </div>\n    <div class="body playable-list">\n\n    </div>\n</div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("templates/page",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){function o(t,e){var r,i="";return i+='\n            <a href="',(r=n.url)?r=r.call(t,{hash:{},data:e}):(r=t.url,r=typeof r===u?r.apply(t):r),i+=l(r)+'" class="',(r=n.className)?r=r.call(t,{hash:{},data:e}):(r=t.className,r=typeof r===u?r.apply(t):r),i+=l(r)+'">',(r=n.name)?r=r.call(t,{hash:{},data:e}):(r=t.name,r=typeof r===u?r.apply(t):r),i+=l(r)+"</a>\n        "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var s,a="",u="function",l=this.escapeExpression,c=this;return a+="<header>\n    <h2>",(s=n.pageName)?s=s.call(e,{hash:{},data:i}):(s=e.pageName,s=typeof s===u?s.apply(e):s),a+=l(s)+"</h2>\n    <nav>\n        ",s=n.each.call(e,e.sections,{hash:{},inverse:c.noop,fn:c.program(1,o,i),data:i}),(s||0===s)&&(a+=s),a+='\n    </nav>\n</header>\n\n<div class="content"></div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("templates/player",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},'\n<div class="slider position">\n    <div class="loaded"></div>\n    <div class="elapsed"></div>\n    <div class="pos"></div>\n</div>\n\n<div class="buttons">\n\n    <div class="playback">\n        <div class="button prev icon-backward"></div>\n        <div class="button toggle icon-play"></div>\n        <div class="button next icon-forward"></div>\n    </div>\n\n    <div class="settings">\n\n        <div class="button repeat icon-repeat"></div>\n\n        <div class="volume-widget closed">\n\n            <div class="button icon-volume-up volume-icon"></div>\n\n            <div class="volume-popup">\n\n                <div class="slider volume">\n                    <div class="elapsed"></div>\n                    <div class="pos"></div>\n                </div>\n\n                <div class="button icon-volume-up volume-icon"></div>\n\n            </div>\n\n        </div>\n    </div>\n\n</div>\n\n\n\n\n<div class="track"></div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("templates/player_track",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){function o(){return""}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var s,a,u="",l="function",c=this.escapeExpression,p=this;return u+='<span class="title">'+c((s=e.track,s=null==s||s===!1?s:s.title,typeof s===l?s.apply(e):s))+'</span>\n<span class="artist">'+c((s=e.track,s=null==s||s===!1?s:s.artist,typeof s===l?s.apply(e):s))+"</span>\n\n",a=n["if"].call(e,(s=e.track,null==s||s===!1?s:s.album),{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(a||0===a)&&(u+=a),u+='\n<span class="album">'+c((s=e.track,s=null==s||s===!1?s:s.album,typeof s===l?s.apply(e):s))+"</span>\n"});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("templates/search/search_page",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},'<div id="search">\n    <input type="text" id="q" placeholder="Search for music and friends" autocomplete="off"/>\n    <div class="suggest"></div>\n</div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("templates/search/search_suggest",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){function o(t,e){var r,i="";return i+='\n        <section class="',(r=n.id)?r=r.call(t,{hash:{},data:e}):(r=t.id,r=typeof r===c?r.apply(t):r),i+=p(r)+'">\n\n            <h2>',(r=n.name)?r=r.call(t,{hash:{},data:e}):(r=t.name,r=typeof r===c?r.apply(t):r),i+=p(r)+"</h2>\n\n            <ul>\n                ",r=n.each.call(t,t.items,{hash:{},inverse:h.noop,fn:h.programWithDepth(2,s,e,t),data:e}),(r||0===r)&&(i+=r),i+="\n            </ul>\n\n        </section>\n    "}function s(t,e,r){var i,o,s="";return s+='\n                    <li data-item="',(i=n.id)?i=i.call(t,{hash:{},data:e}):(i=t.id,i=typeof i===c?i.apply(t):i),s+=p(i)+'" data-type="'+p((i=r.type,typeof i===c?i.apply(t):i))+'" class="item">\n                        ',(o=n.text)?o=o.call(t,{hash:{},data:e}):(o=t.text,o=typeof o===c?o.apply(t):o),(o||0===o)&&(s+=o),s+="\n                        ",o=n["if"].call(t,t.note,{hash:{},inverse:h.noop,fn:h.program(3,a,e),data:e}),(o||0===o)&&(s+=o),s+="\n                    </li>\n                "}function a(t,e){var r,i="";return i+='\n                            <div class="note">',(r=n.note)?r=r.call(t,{hash:{},data:e}):(r=t.note,r=typeof r===c?r.apply(t):r),i+=p(r)+"</div>\n                        "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var u,l="",c="function",p=this.escapeExpression,h=this;return l+='<section class="',(u=n.id)?u=u.call(e,{hash:{},data:i}):(u=e.id,u=typeof u===c?u.apply(e):u),l+=p(u)+'">\n\n    <h1>',(u=n.name)?u=u.call(e,{hash:{},data:i}):(u=e.name,u=typeof u===c?u.apply(e):u),l+=p(u)+"</h1>\n\n    ",u=n.each.call(e,e.sections,{hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i}),(u||0===u)&&(l+=u),l+='\n\n    <ul>\n        <li class="item show-all">',(u=n.showAllLabel)?u=u.call(e,{hash:{},data:i}):(u=e.showAllLabel,u=typeof u===c?u.apply(e):u),l+=p(u)+"</li>\n    </ul>\n\n</section>\n"});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("templates/settings/notifications",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){function o(){return"checked"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var s,a="",u=this;return a+='<form action="">\n\n    <p>\n        <label>\n            <input type="checkbox" value="1" name="desktop_notifications" ',s=n["if"].call(e,e.desktop_notifications,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(s||0===s)&&(a+=s),a+=' />\n            Enable desktop notifications\n        </label>\n    </p>\n    <p>\n        <label>\n            <input type="checkbox" value="1" name="confirm_exit" ',s=n["if"].call(e,e.confirm_exit,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(s||0===s)&&(a+=s),a+=" />\n            Confirm exit while music is still playing\n        </label>\n    </p>\n\n</form>\n"});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("templates/settings/profile",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){function o(t,e){var r,i,o="";return o+='\n            <img src="'+c((r=t.picture,typeof r===l?r.apply(t):r))+'" class="',i=n["if"].call(t,t.selected,{hash:{},inverse:p.noop,fn:p.program(2,s,e),data:e}),(i||0===i)&&(o+=i),o+='" />\n        '}function s(){return"selected"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var a,u="",l="function",c=this.escapeExpression,p=this;return u+='<form action="">\n    <p>\n        <a class="button external icon-off" href="/logout">Log out</a>\n    </p>\n    <p class="picture">\n        <span class="label">Picture</span>\n        ',a=n.each.call(e,e.services,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(a||0===a)&&(u+=a),u+='\n    </p>\n    <p>\n        <label for="acc-name">Name</label>\n        <input name="name" value="',(a=n.name)?a=a.call(e,{hash:{},data:i}):(a=e.name,a=typeof a===l?a.apply(e):a),u+=c(a)+'" id="acc-name"/>\n    </p>\n    <p>\n        <label for="acc-em">Email</label>\n        <input type="email" name="email" value="',(a=n.email)?a=a.call(e,{hash:{},data:i}):(a=e.email,a=typeof a===l?a.apply(e):a),u+=c(a)+'" id="acc-em"/>\n    </p>\n    <p>\n        <label for="_username">Username</label>\n        <input name="username" value="',(a=n.username)?a=a.call(e,{hash:{},data:i}):(a=e.username,a=typeof a===l?a.apply(e):a),u+=c(a)+'" id="_username"/>\n    </p>\n\n    <p>\n        <label for="_location">Location</label>\n        <input name="location" value="',(a=n.location)?a=a.call(e,{hash:{},data:i}):(a=e.location,a=typeof a===l?a.apply(e):a),u+=c(a)+'" id="_location"/>\n    </p>\n\n    <p class="submit">\n        <button>Save</button>\n    </p>\n\n</form>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("templates/settings/social",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){function o(t){var e,n="";return n+='\n                Connected as <span class="username">'+f((e=t.dropbox,e=null==e||e===!1?e:e.username,typeof e===d?e.apply(t):e))+'</span>\n                <a href="/auth/dropbox" target="_blank" class="remove">Remove</a>\n            '}function s(){return'\n                <a href="/auth/dropbox?popup=1" target="_blank" class="connect">Connect</a>\n            '}function a(t){var e,n="";return n+='\n                Connected as\n                <a href="'+f((e=t.facebook,e=null==e||e===!1?e:e.url,typeof e===d?e.apply(t):e))+'" target="_blank" class="username">\n                    <img src="'+f((e=t.facebook,e=null==e||e===!1?e:e.picture,typeof e===d?e.apply(t):e))+'" />\n                    '+f((e=t.facebook,e=null==e||e===!1?e:e.username,typeof e===d?e.apply(t):e))+'\n                </a>\n                <a href="/auth/facebook" target="_blank" class="remove">Remove</a>\n            '}function u(){return'\n                <a href="/auth/facebook?popup=1" target="_blank" class="connect">Connect</a>\n            '}function l(t){var e,n="";return n+='\n            Connected as\n                <a href="'+f((e=t.lastfm,e=null==e||e===!1?e:e.url,typeof e===d?e.apply(t):e))+'" target="_blank" class="username">\n                    <img src="'+f((e=t.lastfm,e=null==e||e===!1?e:e.picture,typeof e===d?e.apply(t):e))+'" />\n                    '+f((e=t.lastfm,e=null==e||e===!1?e:e.username,typeof e===d?e.apply(t):e))+'\n                </a>\n                <a href="/auth/lastfm" target="_blank" class="remove">Remove</a>\n            '}function c(){return'\n                <a href="/auth/lastfm/popup" target="_blank" class="connect">Connect</a>\n            '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var p,h="",d="function",f=this.escapeExpression,m=this;return h+='<article class="dropbox">\n    <h4>Dropbox</h4>\n        <p>\n            ',p=n["if"].call(e,e.dropbox,{hash:{},inverse:m.program(3,s,i),fn:m.program(1,o,i),data:i}),(p||0===p)&&(h+=p),h+='\n        </p>\n</article>\n\n\n<article class="facebook">\n    <h4>Facebook</h4>\n        <p>\n            ',p=n["if"].call(e,e.facebook,{hash:{},inverse:m.program(7,u,i),fn:m.program(5,a,i),data:i}),(p||0===p)&&(h+=p),h+='\n        </p>\n</article>\n\n\n<article class="lastfm">\n    <h4>Lastfm</h4>\n        <p>\n            ',p=n["if"].call(e,e.lastfm,{hash:{},inverse:m.program(11,c,i),fn:m.program(9,l,i),data:i}),(p||0===p)&&(h+=p),h+="\n        </p>\n</article>\n"});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("templates/sidebars/item",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){function o(t,e){var r,i="";return i+='\n    <span class="button ',(r=n.className)?r=r.call(t,{hash:{},data:e}):(r=t.className,r=typeof r===l?r.apply(t):r),i+=c(r)+" icon-"+c((r=t.button,r=null==r||r===!1?r:r.icon,typeof r===l?r.apply(t):r))+'" title="'+c((r=t.button,r=null==r||r===!1?r:r.title,typeof r===l?r.apply(t):r))+'"></span>\n'}function s(t,e){var r,i="";return i+='\n        <i class="icon-',(r=n.icon)?r=r.call(t,{hash:{},data:e}):(r=t.icon,r=typeof r===l?r.apply(t):r),i+=c(r)+'"></i>\n    '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var a,u="",l="function",c=this.escapeExpression,p=this;return u+="\n",a=n["if"].call(e,e.button,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(a||0===a)&&(u+=a),u+='\n\n<a href="',(a=n.url)?a=a.call(e,{hash:{},data:i}):(a=e.url,a=typeof a===l?a.apply(e):a),u+=c(a)+'">\n    ',a=n["if"].call(e,e.icon,{hash:{},inverse:p.noop,fn:p.program(3,s,i),data:i}),(a||0===a)&&(u+=a),u+="\n    ",(a=n.name)?a=a.call(e,{hash:{},data:i}):(a=e.name,a=typeof a===l?a.apply(e):a),u+=c(a)+"\n</a>\n"
});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("templates/sidebars/user",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){function o(t,e){var r,i="";return i+='<img src="',(r=n.picture)?r=r.call(t,{hash:{},data:e}):(r=t.picture,r=typeof r===u?r.apply(t):r),i+=l(r)+'" />'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var s,a="",u="function",l=this.escapeExpression,c=this;return a+='<div class="picture">',s=n["if"].call(e,e.picture,{hash:{},inverse:c.noop,fn:c.program(1,o,i),data:i}),(s||0===s)&&(a+=s),a+="</div>\n"});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("templates/sidebars/youtube_add_dialog",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},'<div class="body">\n    <h2>Add a YouTube music video</h2>\n    <p>\n        <input placeholder="Enter YouTube URL" />\n        <button>Add to my collection</button>\n    </p>\n</div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("templates/ui/menu_item",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){function o(t,e){var r,i="";return i+='\n    <i class="icon-',(r=n.icon)?r=r.call(t,{hash:{},data:e}):(r=t.icon,r=typeof r===u?r.apply(t):r),i+=l(r)+'"></i>\n'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var s,a="",u="function",l=this.escapeExpression,c=this;return s=n["if"].call(e,e.icon,{hash:{},inverse:c.noop,fn:c.program(1,o,i),data:i}),(s||0===s)&&(a+=s),a+='\n\n<span class="name">',(s=n.label)?s=s.call(e,{hash:{},data:i}):(s=e.label,s=typeof s===u?s.apply(e):s),a+=l(s)+"</span>\n"});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("utils",function(t,e,n){n.exports={escapeRegExp:function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},timed:function(t,e){return function(){var n;return console.time(t),n=e(Array.prototype.slice(arguments)),console.timeEnd(t),n}}}}),require.register("views/artist/album_track_view",function(t,e,n){var r,i,o,s,a,u,l,c=function(t,e){return function(){return t.apply(e,arguments)}},p={}.hasOwnProperty,h=function(t,e){function n(){this.constructor=t}for(var r in e)p.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};o=e("views/ui/dnd").DraggableView,a=e("pubsub"),u=e("templates/artist/track"),s=e("views/artist/video_list_view"),r=e("views/artist/video_views").AlbumTrackVideoView,i=function(t){function e(){return this.toggleVideos=c(this.toggleVideos,this),this.getDragged=c(this.getDragged,this),this.setPlayingState=c(this.setPlayingState,this),l=e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.className="track",e.prototype.template=u,e.prototype.events={"click h4":"toggleVideos"},e.prototype.initialize=function(t){return t=t||{},null==t.draggableSelector&&(t.draggableSelector="h4"),e.__super__.initialize.call(this,t),this.listenTo(a.player,"change:state",this.setPlayingState)},e.prototype.setPlayingState=function(){var t,e;return t=null!=(e=a.player.get("track"))?e.equals(this.model.toCloudtunesTrack()):void 0,t?this.$el.addClass("playing"):this.$el.removeClass("playing")},e.prototype.render=function(){return e.__super__.render.call(this),this.setPlayingState(),this},e.prototype.getDragged=function(){return this.model},e.prototype.toggleVideos=function(){var t,e,n=this;return t=this.$(".videos"),t.text("finding track"),e=this.$(".videos-wrap"),e.hasClass("open")?(e.removeClass("open"),void 0):(e.addClass("open"),$.when(this.model.videos.ensureFetched()).then(function(){return t.width(160*n.model.videos.length),t.html(""),n.subview("videos",new s({el:t,collection:n.model.videos,VideoView:r})).render()}))},e}(o),n.exports=i}),require.register("views/artist/album_view",function(t,e,n){var r,i,o,s,a,u,l,c=function(t,e){return function(){return t.apply(e,arguments)}},p={}.hasOwnProperty,h=function(t,e){function n(){this.constructor=t}for(var r in e)p.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};s=e("mvc").View,a=e("pubsub"),u=e("templates/artist/album"),r=e("views/artist/album_track_view"),o=e("views/ui/dnd").DraggableView,i=function(t){function e(){return this.setPlayingState=c(this.setPlayingState,this),l=e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.template=u,e.prototype.tagName="article",e.prototype.className="album",e.prototype.events={"click h3":"toggleAlbum","click .play-all":"playTracks","click .add-all":"addTracks"},e.prototype.initialize=function(t){return t=t||{},null==t.draggableSelector&&(t.draggableSelector="h3"),e.__super__.initialize.call(this,t),this.listenTo(a.player,"change:state",this.setPlayingState)},e.prototype.render=function(){return e.__super__.render.call(this),this.setPlayingState(),this},e.prototype.getDragged=function(){return this.model},e.prototype.setPlayingState=function(){var t;return t=a.player.get("track"),t&&t.get("album_mbid")===this.model.id?this.$el.addClass("playing"):this.$el.removeClass("playing")},e.prototype.toggleAlbum=function(){var t,e,n=this;return t=this.$el.find(".body"),this.$el.hasClass("open")?(this.$el.removeClass("open"),void 0):(this.$el.addClass("open"),e=this.$el.find(".tracklist").text("loading tracklist"),$.when(this.model.tracks.ensureFetched()).then(function(){return e.text(""),n.model.tracks.each(function(t){var e;return e=new r({model:t}),n.$el.find(".tracklist").append(n.subview("track-"+t.id,e).render().el)}),n.$el.addClass("loaded")}))},e.prototype.playTracks=function(){return this.model.getCloudtunesTracks().done(function(t){return a.player.replaceQueue(t),a.player.play()})},e.prototype.addTracks=function(){return console.log("addTracks")},e}(o),n.exports=i}),require.register("views/artist/artist_page_view",function(t,e,n){var r,i,o,s,a,u,l,c={}.hasOwnProperty,p=function(t,e){function n(){this.constructor=t}for(var r in e)c.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};u=e("templates/page"),i=e("views/base_content_page_view"),a=e("views/artist/top_tracks_view"),o=e("views/artist/discography_view"),s=e("views/artist/similar_artists_view"),r=function(t){function e(){return l=e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.id="artist",e.prototype.className="content-page",e.prototype.template=u,e.prototype.pageName="Loading",e.prototype.pageURL="artist/",e.prototype.sections=[a,o,s],e.prototype.initialize=function(t){var n=this;return this.pageURL+=this.model.id,this.listenTo(this.model,"change:name",function(){return n.$("h2").text(n.model.get("name")),n.renderSection()}),this.model.ensureFetched(),e.__super__.initialize.call(this,t)},e}(i),n.exports=r}),require.register("views/artist/discography_view",function(t,e,n){var r,i,o,s,a={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};o=e("views/page_section_view"),r=e("views/artist/album_view"),i=function(t){function e(){return s=e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.url="discography",e.prototype.className="discography",e.prototype.name="Discography",e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t)},e.prototype.render=function(){var t=this;return this.model.albums.each(function(e){var n;return n=new r({model:e}),t.$el.append(t.subview("album-"+e.id,n).render().el)}),this.model.albums.length||this.$el.text("No albums found :("),this},e}(o),n.exports=i}),require.register("views/artist/similar_artists_view",function(t,e,n){var r,i,o,s,a,u=function(t,e){return function(){return t.apply(e,arguments)}},l={}.hasOwnProperty,c=function(t,e){function n(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=e("views/page_section_view"),o=e("views/artist/video_list_view"),s=e("templates/artist/artist_list"),i=function(t){function e(){return this.getTemplateData=u(this.getTemplateData,this),a=e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.url="similar",e.prototype.className="similar-artists",e.prototype.name="Similar Artists",e.prototype.template=s,e.prototype.getTemplateData=function(){return{artists:this.model.getSimilar()}},e}(r),n.exports=i}),require.register("views/artist/top_tracks_view",function(t,e,n){var r,i,o,s,a,u,l,c,p,h={}.hasOwnProperty,d=function(t,e){function n(){this.constructor=t}for(var r in e)h.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},f=function(t,e){return function(){return t.apply(e,arguments)}};i=e("views/page_section_view"),u=e("views/artist/video_list_view"),s=e("views/artist/video_views").TopTrackVideoView,r=e("views/base_list_view"),l=function(t){return'<tr class="item" data-track="'+t.cid+'" draggable="true">\n    <td><img src="'+t.get("thumbnail").sqDefault+'" /></td>\n    <td>'+_.escape(t.get("title"))+"</td>\n</tr>\n"},o=function(t){function e(){return c=e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.tagName="table",e.prototype.className="playable-list",e.prototype.render=function(){var t,n,r,i,o;for(e.__super__.render.apply(this,arguments),t="",o=this.collection.models,r=0,i=o.length;i>r;r++)n=o[r],t+=l(n);return this.$el.html(t),this},e}(r),a=function(t){function e(){return this.render=f(this.render,this),p=e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.url="tracks",e.prototype.className="top-tracks",e.prototype.name="Top Tracks",e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.model.videos.fetch({success:this.render})},e.prototype.render=function(){return this.$el.append(new o({collection:this.model.videos}).render().el),this},e}(i),n.exports=a}),require.register("views/artist/video_list_view",function(t,e,n){var r,i,o,s=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=e("mvc").View,r=function(t){function e(){return this.render=s(this.render,this),o=e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.initialize=function(t){return this.VideoView=t.VideoView,t},e.prototype.render=function(){var t=this;return this.collection.each(function(e){var n;return n=new t.VideoView({model:e}),t.$el.append(t.subview("video-"+e.id,n).render().el)}),this},e}(i),n.exports=r}),require.register("views/artist/video_views",function(t,e,n){var r,i,o,s,a,u,l,c,p,h,d=function(t,e){return function(){return t.apply(e,arguments)}},f={}.hasOwnProperty,m=function(t,e){function n(){this.constructor=t}for(var r in e)f.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};a=e("mvc").View,u=e("pubsub"),l=e("templates/artist/video"),o=e("views/ui/dnd").DraggableView,i=function(t){function e(){return this.setPlayingState=d(this.setPlayingState,this),c=e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.template=l,e.prototype.tagName="article",e.prototype.className="video",e.prototype.events={click:"play"},e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.listenTo(u.player,"change:state",this.setPlayingState)},e.prototype.render=function(){return e.__super__.render.call(this),this.setPlayingState(),this},e.prototype.setPlayingState=function(){var t,e;return t=(null!=(e=u.player.get("track"))?e.get("source_id"):void 0)===this.model.id,t?this.$el.addClass("playing"):this.$el.removeClass("playing")},e.prototype.getDragged=function(){return[this.model.toCloudtunesTrack()]},e}(o),r=function(t){function e(){return p=e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.play=function(){var t;return t=this.model.toCloudtunesTrack(),u.player.replaceQueue([t]),u.player.play()},e}(i),s=function(t){function e(){return h=e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.play=function(){var t;return t=this.model.collection.mbartist.getLibraryTopTracks(),u.player.replaceQueue(t),u.player.play(this.model.toCloudtunesTrack())},e}(i),n.exports={AlbumTrackVideoView:r,TopTrackVideoView:s}}),require.register("views/base_content_page_view",function(t,e,n){var r,i,o,s,a,u,l={}.hasOwnProperty,c=function(t,e){function n(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};a=e("mvc"),o=a.View,i=a.PageView,s=e("templates/page"),r=function(t){function e(){return u=e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.template=s,e.prototype.className="content-page",e.prototype.pageName=null,e.prototype.pageURL=null,e.prototype.sections=null,e.prototype.sectionsByURL=null,e.prototype.initialize=function(t){var n,r,i,o;for(this.sectionsByURL={},o=this.sections,r=0,i=o.length;i>r;r++)n=o[r],this.sectionsByURL[n.prototype.url]=n;return e.__super__.initialize.call(this,t)},e.prototype.getTemplateData=function(){var t;return{pageName:this.pageName,pageURL:this.pageURL,sections:function(){var e,n,r,i;for(r=this.sections,i=[],e=0,n=r.length;n>e;e++)t=r[e],i.push({name:t.prototype.name,className:t.prototype.className,url:this.pageURL?"/"+this.pageURL+"/"+t.prototype.url:"/"+t.prototype.url});return i}.call(this)}},e.prototype.renderSection=function(){var t,e;return t=this.sectionsByURL[this.options.section]||this.sections[0],e=new t({model:this.model}),this.$(".content").append(e.render().el),this.$("nav a."+e.className).addClass("active"),this.subview("section",e)},e}(i),n.exports=r}),require.register("views/base_list_view",function(t,e,n){var r,i,o,s,a,u=function(t,e){return function(){return t.apply(e,arguments)}},l={}.hasOwnProperty,c=function(t,e){function n(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};s=e("pubsub"),o=e("views/ui/focus_context_view"),i=e("views/ui/dnd").DraggableView,r=function(t){function e(){return this.getDragged=u(this.getDragged,this),this.handlePlay=u(this.handlePlay,this),a=e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.events={"mousedown .item":"mousedown","dblclick .item":"handlePlay"},e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.$body=this.$(".body:first"),this.subview("draggable",new i({delegate:this,draggableSelector:".item",el:this.el}))},e.prototype.render=function(){return e.__super__.render.apply(this,arguments),this.$selectedItem=null,this},e.prototype.handlePlay=function(){return this.play()},e.prototype.getTracks=function(){throw"not implemented"},e.prototype.play=function(t){var e,n;return null==t&&(t=null),n=this.getTracks(),e=t?_.findWhere(n,{cid:t}):null,s.player.replaceQueue(n),s.player.play(e)},e.prototype.mousedown=function(){throw"not implemented"},e.prototype.getDragged=function(){throw"not implemented"},e.prototype.selectItem=function(t){var e,n,r;return null!=(r=this.$selectedItem)&&r.removeClass("selected"),(null!=t?t.length:void 0)&&(t.addClass("selected"),this.$selectedItem=t,e=this.$body.height(),n=t.position().top,0>n||n>e)?this.$body.scrollTop(t[0].offsetTop-e/2):void 0},e.prototype.focus=function(){return e.__super__.focus.apply(this,arguments),this.$selectedItem?void 0:this.selectItem(this.$body.find(".item:first"))},e.prototype._navigate=function(t){var e;switch(t){case"next":e=this.$selectedItem.next(".item:first");break;case"prev":e=this.$selectedItem.prev(".item:first");break;default:throw"no where "+t}if(e.length)return this.selectItem(e),window.clearTimeout(this._timerSelectNextItem),this._timerSelectNextItem=window.setTimeout(function(){return e.trigger("mousedown")},200)},e.prototype.selectPrevItem=function(){return this._navigate("prev")},e.prototype.selectNextItem=function(){return this._navigate("next")},e.prototype.addItem=function(){},e.prototype.removeItem=function(){},e.prototype.changeItem=function(){},e}(o),n.exports=r}),require.register("views/explore/explore_artists_sections",function(t,e,n){var r,i,o,s,a,u,l,c,p,h,d,f,m,y,g={}.hasOwnProperty,v=function(t,e){function n(){this.constructor=t}for(var r in e)g.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},_=function(t,e){return function(){return t.apply(e,arguments)}};l=e("views/page_section_view"),p=e("templates/artist/artist_list"),a=e("models/mb/artist"),o=e("mvc").Collection,r=function(t){function e(){return h=e.__super__.constructor.apply(this,arguments)}return v(e,t),e.prototype.model=a,e}(o),i=function(t){function e(){return this.getTemplateData=_(this.getTemplateData,this),d=e.__super__.constructor.apply(this,arguments)}return v(e,t),e.prototype.template=p,e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.artists=new r,this.artists.url=this.endpoint,this.artists.fetch({success:this.render})},e.prototype.getTemplateData=function(){return{artists:this.artists.toJSON()}},e}(l),s=function(t){function e(){return f=e.__super__.constructor.apply(this,arguments)}return v(e,t),e.prototype.name="Top",e.prototype.url="top",e.prototype.className="top",e.prototype.artsitsChart="top",e.prototype.endpoint="/api/explore/artists/top",e}(i),c=function(t){function e(){return m=e.__super__.constructor.apply(this,arguments)}return v(e,t),e.prototype.name="Trending",e.prototype.url="trending",e.prototype.className="trending",e.prototype.endpoint="/api/explore/artists/trending",e}(i),u=function(t){function e(){return y=e.__super__.constructor.apply(this,arguments)}return v(e,t),e.prototype.name="Recommended",e.prototype.url="",e.prototype.className="recommended",e.prototype.endpoint="/api/explore/artists/recommended",e}(i),n.exports={HotArtistsSectionView:s,TrendingArtistsSectionView:c,RecommendedArtistsSectionView:u}}),require.register("views/explore/explore_page_view",function(t,e,n){var r,i,o,s,a,u,l,c,p={}.hasOwnProperty,h=function(t,e){function n(){this.constructor=t}for(var r in e)p.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};u=e("pubsub"),r=e("views/base_content_page_view"),l=e("views/explore/explore_artists_sections"),o=l.HotArtistsSectionView,a=l.TrendingArtistsSectionView,s=l.RecommendedArtistsSectionView,i=function(t){function e(){return c=e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.id="explore",e.prototype.pageName="Explore",e.prototype.pageURL="",e.prototype.sections=[s,o,a],e.prototype.render=function(){return e.__super__.render.apply(this,arguments),this.renderSection(),this},e.prototype.getTemplateData=function(){return _.extend(e.__super__.getTemplateData.apply(this,arguments),{user:this.model})},e}(r),n.exports=i}),require.register("views/layout_view",function(t,e,n){var r,i,o,s,a,u,l,c,p=function(t,e){return function(){return t.apply(e,arguments)}},h={}.hasOwnProperty,d=function(t,e){function n(){this.constructor=t}for(var r in e)h.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};a=e("pubsub"),s=e("mvc").View,l=e("views/ui/resizer_views"),r=l.ColumnResizer,o=l.RightBoundColumnResizer,u=e("templates/layout"),i=function(t){function e(){return this.handleLinkClicked=p(this.handleLinkClicked,this),this.setPageHeight=p(this.setPageHeight,this),c=e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.template=u,e.prototype.events={"click a":"handleLinkClicked"},e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.listenTo(a.navSidebar,"change:width",this.setNavSidebarWidth),this.listenTo(a.infoSidebar,"change:width",this.setInfoSidebarWidth),$(window).on("resize",this.setPageHeight)},e.prototype.render=function(){return e.__super__.render.apply(this,arguments),this.setPageHeight(),this.setNavSidebarWidth(),this.setInfoSidebarWidth(),this.addNavSidebarResizer(),this.addInfoSidebarResizer()},e.prototype.addNavSidebarResizer=function(){var t;return t=this.subview("sidebar-resizer",new r({el:$(".resize-nav-sidebar"),context:this.$el,value:a.navSidebar.get("width"),relative:!1,min:100,max:400})),t.render(),this.listenTo(t,"resize",function(t){return a.navSidebar.set({width:t})})},e.prototype.addInfoSidebarResizer=function(){var t;return t=this.subview("sidebar-resizer",new o({el:$(".resize-info-sidebar"),context:this.$el,value:a.infoSidebar.get("width"),relative:!1,min:150,max:400})),t.render(),this.listenTo(t,"resize",function(t){return a.infoSidebar.set({width:t})})},e.prototype.setPageHeight=function(){var t;return t=$(window).height(),$("#page, #main").height(t)},e.prototype.handleLinkClicked=function(t){var e,n;return e=$(t.currentTarget),e.attr("target")||e.is(".external")?void 0:(t.preventDefault(),t.stopPropagation(),n=e.attr("href"),Backbone.history.navigate(n,!0))},e.prototype.setNavSidebarWidth=function(){return $("#page").css("margin-left",a.navSidebar.get("width")+"px")},e.prototype.setInfoSidebarWidth=function(){return $("#page").css("margin-right",a.infoSidebar.get("width")+"px")},e}(s),n.exports=i}),require.register("views/library/base_list_view",function(t,e,n){var r,i,o,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=e("views/base_list_view"),r=function(t){function e(){return o=e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.namespace=null,e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.collection=this.getList(this.model.getPlaylist()),this.listenTo(this.collection,"add",this.addItem),this.listenTo(this.collection,"change",this.changeItem),this.listenTo(this.collection,"remove",this.removeItem),this.listenTo(this.collection,"reset",this.render)},e.prototype.getTracks=function(){return this.model.getTrackList().getResult()},e.prototype.getList=function(t){return t.children[""+this.namespace+"s"]},e}(i),n.exports=r}),require.register("views/library/filter_list_views",function(t,e,n){var r,o,s,a,u,l,c,p,h,d,f=function(t,e){return function(){return t.apply(e,arguments)}},m={}.hasOwnProperty,y=function(t,e){function n(){this.constructor=t}for(var r in e)m.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};c=e("pubsub"),a=e("views/library/base_list_view"),u=function(t,e){return"<div class='"+t+" item' draggable='true'>"+_.escape(e)+"</div>"},l=function(t,e){var n;return"<div class='"+t+" all item' draggable='true'>\n    All (<span>"+e.length+"</span> "+t+"s)\n</div>"+function(){var r,i,o;for(o=[],r=0,i=e.length;i>r;r++)n=e[r],o.push(u(t,n));return o}().join("")},s=function(t){function e(){return this.unselect=f(this.unselect,this),this.select=f(this.select,this),this.render=f(this.render,this),p=e.__super__.constructor.apply(this,arguments)}return y(e,t),e.prototype.events=_.extend({"mousedown h2":"unselect"},a.prototype.events),e.prototype.render=function(){return e.__super__.render.apply(this,arguments),this.$body.html(l(this.namespace,this.collection.getResult())),this.select(this.model.get("track"))},e.prototype.addItem=function(t,e){var n,r;return console.log("addItem",i,t,this),r=this.renderItem(t),n=this.getItem(e),n?r.insertBefore(n):this.$body.append(r),this.updateCount()},e.prototype.removeItem=function(t,e){var n;return null!=(n=this.getItem(e))&&n.remove(),this.updateCount()},e.prototype.updateCount=function(){return this.$body.find(".item.all:first span").text(this.collection.getResult().length)},e.prototype.getItem=function(t){var e;return e=this.$body.find(".item:eq("+(t+1)+")"),e.length?e:void 0},e.prototype.renderItem=function(t){return $(this.itemTemplate(this.namespace,t(this.namespace)))},e.prototype.select=function(t){var e,n=this;return e=null!=t?t[this.namespace]:void 0,e?this.$body.find(".item").each(function(t,r){return r.textContent===e?(n.selectItem($(r)),!1):void 0}):this.selectItem(this.$body.find(".item:first"))},e.prototype.unselect=function(){return c.publish("select:"+this.namespace,null)},e.prototype.getDragged=function(){return this.model.getTrackList().getResult()},e}(a),o=function(t){function e(){return this.mousedown=f(this.mousedown,this),h=e.__super__.constructor.apply(this,arguments)}return y(e,t),e.prototype.namespace="artist",e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.listenTo(this.model,"tracks:reset change:source",this.render),this.listenTo(c,"select:artist",this.select)},e.prototype.mousedown=function(t){var e,n;return e=$(t.currentTarget),this.selectItem(e),n=e.hasClass("all")?null:e.text(),this.model.set({artist:n,album:null})},e}(s),r=function(t){function e(){return this.mousedown=f(this.mousedown,this),d=e.__super__.constructor.apply(this,arguments)}return y(e,t),e.prototype.namespace="album",e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.listenTo(this.model,"change:artist tracks:reset change:source",this.render),this.listenTo(c,"select:album",this.select)},e.prototype.mousedown=function(t){var e,n;return e=$(t.currentTarget),this.selectItem(e),n=e.hasClass("all")?null:e.text(),this.model.set({album:n})},e}(s),n.exports={AlbumListView:r,ArtistListView:o}}),require.register("views/library/library_page_view",function(t,e,n){var r,i,o,s,a,u,l,c,p,h,d,f,m,y,g,v,b={}.hasOwnProperty,w=function(t,e){function n(){this.constructor=t}for(var r in e)b.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},x=function(t,e){return function(){return t.apply(e,arguments)}};f=e("pubsub"),m=e("mvc"),o=m.PageView,h=m.View,i=e("views/ui/menu_view"),p=e("models/lists/playlists").UserPlaylist,a=e("views/library/playlist_browse_view"),l=e("views/library/playlist_view"),s=e("views/library/play_queue_view"),d=e("templates/playlists/playlist_header"),u=function(t){function e(){return y=e.__super__.constructor.apply(this,arguments)}return w(e,t),e.prototype.className="playlist-header",e.prototype.tagName="header",e.prototype.template=d,e.prototype.events={"click .options":"openMenu"},e.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render)},e.prototype.getTemplateData=function(){return console.log(this.model.toJSON()),_.extend(this.model.toJSON(),{showOptions:this.model.canRename()||this.model.canDelete()})},e.prototype.openMenu=function(t){var e,n=this;return e={},this.model.canRename()&&(e.rename={label:"Rename",icon:"edit",callback:function(){var t;return t=prompt("New Name",n.model.get("name")),t?n.model.save({name:t}):void 0}}),this.model.canDelete()&&(e["delete"]={label:"Delete",icon:"remove",callback:function(){return n.model.destroy(),f.router.navigate("/collection",{trigger:!0})}}),i.fromMouseEvent(t,{actions:e})},e}(h),c=function(t){function e(){return g=e.__super__.constructor.apply(this,arguments)}return w(e,t),e}(u),r=function(t){function e(){return this.render=x(this.render,this),v=e.__super__.constructor.apply(this,arguments)}return w(e,t),e.prototype.id="library",e.prototype.initialize=function(t){return console.log("new LibraryPageView"),e.__super__.initialize.call(this,t),this.listenTo(this.model,"change:playlist",this.render)},e.prototype.render=function(){var t,n,r,i,o;return e.__super__.render.apply(this,arguments),null!=(i=this.subview("header"))&&i.remove(),null!=(o=this.subview("playlist"))&&o.remove(),n=this.model.getPlaylist(),t=null,"queue"===n.id?(t=c,r=s):(r=n instanceof p?l:a,"all"!==n.id&&(t=u)),t?this.$el.addClass("has-header").append(this.subview("header",new t({model:n})).render().el):this.$el.removeClass("has-header"),this.$el.append(this.subview("playlist",new r({model:this.model})).render().el)},e}(o),n.exports=r}),require.register("views/library/play_queue_view",function(t,e,n){var r,i,o,s,a,u,l,c,p,h={}.hasOwnProperty,d=function(t,e){function n(){this.constructor=t}for(var r in e)h.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},f=function(t,e){return function(){return t.apply(e,arguments)}};a=e("mvc").View,l=e("templates/playlists/tracklist"),s=e("views/library/track_list_view"),u=e("pubsub"),r=e("views/ui/dnd").DroppableView,i=function(t){function e(){return c=e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.subview("droppable",new r({delegate:this,droppableSelector:".item",el:this.el}))},e.prototype.play=function(t){var e,n;return n=this.model.getTrackList().getResult(),e=_.findWhere(n,{cid:t}),u.player.play(e)},e.prototype.draghover=function(t){var e,n,r,i;return e=$(t.currentTarget),n=t.originalEvent.offsetY,i=e.height()/2,r=i>n?"above":"bellow",e.removeClass("drop-bellow drop-above").addClass("drop-"+r)},e.prototype.dragleave=function(t){return $(t.currentTarget).removeClass("drop-bellow drop-above")},e.prototype.drop=function(t,e){var n,r,i,o,s;if(console.log("PlayQueueTrackListView.drop",t,e),n=$(e.currentTarget),n.data("track")){if(s=this.model.getTrackList().getResult(),r=_.findWhere(s,{cid:n.data("track")}),o=_.indexOf(s,r),console.log("dragged onto",r.get("title")),n.hasClass("drop-above"))i=o;else{if(!n.hasClass("drop-bellow"))throw"No drop-{above,bellow} class!";i=o+1}return u.player.queue.move(t[0],i)}},e}(s),o=function(t){function e(){return this.render=f(this.render,this),p=e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.template=l,e.prototype.id="play-queue",e.prototype.className="flat-playlist-body playlist-body",e.prototype.render=function(){return e.__super__.render.apply(this,arguments),this.subview(new i({model:this.model,el:this.$(".tracks"),disableSorting:!0})).render(),this},e}(a),n.exports=o}),require.register("views/library/playlist_browse_view",function(t,e,n){var r,i,o,s,a,u,l,c,p,h,d,f,m=function(t,e){return function(){return t.apply(e,arguments)}},y={}.hasOwnProperty,g=function(t,e){function n(){this.constructor=t}for(var r in e)y.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};c=e("pubsub"),l=e("mvc").View,p=e("templates/playlists/playlist_browse"),h=e("views/ui/resizer_views"),o=h.ColumnResizer,a=h.RowResizer,d=e("views/library/filter_list_views"),i=d.ArtistListView,r=d.AlbumListView,u=e("views/library/track_list_view"),s=function(t){function e(){return this.render=m(this.render,this),this.updateGridRows=m(this.updateGridRows,this),this.updateGridColumns=m(this.updateGridColumns,this),f=e.__super__.constructor.apply(this,arguments)}return g(e,t),e.prototype.template=p,e.prototype.id="playlist-browse",e.prototype.className="playlist-body",e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.listenTo(this.model,"change:centerX",this.updateGridColumns),this.listenTo(this.model,"change:centerY",this.updateGridRows)},e.prototype.handleRowResized=function(t){return this.model.set("centerY",t)},e.prototype.handleColumnResized=function(t){return this.model.set("centerX",t)},e.prototype.updateGridColumns=function(){var t,e;return e=this.model.get("centerX"),t=100-e,this.subview("artists").$el.css("width",e+"%"),this.subview("albums").$el.css("width",t+"%")},e.prototype.updateGridRows=function(){var t,e;return t=this.model.get("centerY"),e=100-t,this.subview("artists").$el.css("height",t+"%"),this.subview("albums").$el.css("height",t+"%"),this.subview("tracks").$el.css("height",e+"%")
},e.prototype.render=function(){var t,n,s,l,c,p;for(e.__super__.render.apply(this,arguments),this.subview("artists",new i({model:this.model,el:this.$(".artists")})),this.subview("albums",new r({model:this.model,el:this.$(".albums")})),this.subview("tracks",new u({model:this.model,el:this.$(".tracks")})),n=this.subview("resize-row",new a({el:this.$(".resize-row.resize-main-grid"),context:this.$el,value:this.model.get("centerY"),relative:!0,min:100,max:-100})),this.listenTo(n,"resize",this.handleRowResized),t=this.subview("resize-col",new o({el:this.$(".resize-col.resize-main-grid"),value:this.model.get("centerX"),context:this.$el,relative:!0,min:100,max:-100})),this.listenTo(t,"resize",this.handleColumnResized),p=this.subviews,l=0,c=p.length;c>l;l++)s=p[l],s.render();return this.updateGridColumns(),this.updateGridRows(),this},e}(l),n.exports=s}),require.register("views/library/playlist_view",function(t,e,n){var r,i,o,s,a,u=function(t,e){return function(){return t.apply(e,arguments)}},l={}.hasOwnProperty,c=function(t,e){function n(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};o=e("mvc").View,s=e("templates/playlists/tracklist"),i=e("views/library/track_list_view"),r=function(t){function e(){return this.render=u(this.render,this),a=e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.template=s,e.prototype.id="playlist-flat",e.prototype.className="flat-playlist-body playlist-body",e.prototype.render=function(){return e.__super__.render.apply(this,arguments),this.subview(new i({model:this.model,el:this.$(".tracks"),disableSorting:!0})).render(),this},e}(o),n.exports=r}),require.register("views/library/track_list_view",function(t,e,n){var r,i,o,s,a,u,l,c,p,h,d,f,m,y,g,v={}.hasOwnProperty,b=function(t,e){function n(){this.constructor=t}for(var r in e)v.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},w=function(t,e){return function(){return t.apply(e,arguments)}};h=e("pubsub"),p=e("mvc").View,s=e("views/ui/lazy_renderer"),i=e("views/ui/resizer_views").ColumnResizer,r=e("views/library/base_list_view"),u=function(t){function e(){return d=e.__super__.constructor.apply(this,arguments)}return b(e,t),e.prototype.className="resize-col",e.prototype.start=function(t){return this.$el.height(this.getContextSize()+"px"),e.__super__.start.call(this,t)},e.prototype.finish=function(t){return this.$el.height(""),e.__super__.finish.call(this,t)},e.prototype.getLimits=function(){var t,e,n,r,i;return n=45,i=this.prev,r=this.next,e=i?i.getCurrentAbsoluteValue()+n:n,t=r?r.getCurrentAbsoluteValue()-n:this.getContextSize()-n,[e,t]},e}(i),o=function(t){function e(){return this.render=w(this.render,this),f=e.__super__.constructor.apply(this,arguments)}return b(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.listenTo(this.model,"change:trackColumns",this.render),this.addResizers()},e.prototype.addResizers=function(){var t,e,n,r,i,o,s,a,l,c,p,h,d;for(this.resizers=[],i=0,p=this.model.get("trackColumns"),t=s=0,l=p.length;l>s;t=++s)r=p[t],i+=r,o=new u({context:this.$el,value:i,relative:!0}),this.listenTo(o,"resize",this.handleColumnResized),o.$el.appendTo(this.$(".head-wrap")),this.resizers.push(o),this.subview("resize-col-"+t,o.render());for(h=this.resizers,d=[],t=a=0,c=h.length;c>a;t=++a)o=h[t],e=this.resizers[t+1],o.prev=n,o.next=e,d.push(n=o);return d},e.prototype.handleColumnResized=function(){var t,e,n,r,i,o;for(e=[],t=0,o=_.pluck(this.resizers,"value"),r=0,i=o.length;i>r;r++)n=o[r],e.push(n-t),t=n;return this.model.set({trackColumns:e})},e.prototype.render=function(){var t,e,n,r,i,o,s;for(this.$style||(this.$style=$('<style id="tracks-cols" />').appendTo($("head"))),e="\n",r=0,s=this.model.get("trackColumns"),n=i=0,o=s.length;o>i;n=++i)t=s[n],n+=1,r+=t,e+="#library .tracks td:nth-child("+n+") {\n    width: "+t+"% !important;\n}";return e+="#library .tracks td:nth-child("+(n+1)+") {\n    width: "+(100-r)+"% !important;\n}",this.$style.text(e)},e}(p),l=function(t){function e(){return m=e.__super__.constructor.apply(this,arguments)}return b(e,t),e.prototype.makeRow=function(t){return'<tr class="item" data-track="'+t.cid+'" draggable="true">\n    <td>'+(t.get("number")||"")+"</td>\n    <td>"+_.escape(t.get("title"))+"</td>\n    <td>"+_.escape(t.get("album"))+"</td>\n    <td>"+_.escape(t.get("artist"))+"</td>\n</tr>"},e.prototype.makeTable=function(t){var e,n,r,i,o;for(n=["<table>"],o=t.iter(),r=0,i=o.length;i>r;r++)e=o[r],n.push(this.makeRow(this.collection[e]));return n.push("</table>"),n.join("")},e}(s),c=function(t){function e(){return this.sortBy=w(this.sortBy,this),this.render=w(this.render,this),y=e.__super__.constructor.apply(this,arguments)}return b(e,t),e.prototype.events={"mousedown td":"sortBy"},e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.listenTo(this.model,"change:sortBy change:ordering",this.render)},e.prototype.render=function(){var t;return this.$el.addClass("sorting-enabled"),this._orig||(this._orig=this.$el.attr("class")),this.$el.attr("class",""+this._orig+" order-"+this.model.get("ordering")),t="sorted-by",this.$("."+t).removeClass(t),this.$("[data-order-field="+this.model.get("sortBy")+"]").addClass(t),this},e.prototype.sortBy=function(t){var e,n;return e=$(t.target),n=e.data("order-field"),n===this.model.get("sortBy")?this.model.toggleOrdering():this.model.set("sortBy",n)},e}(p),a=function(t){function e(){return this.markPlayingItem=w(this.markPlayingItem,this),this.select=w(this.select,this),this.mousedown=w(this.mousedown,this),this.render=w(this.render,this),g=e.__super__.constructor.apply(this,arguments)}return b(e,t),e.prototype.namespace="track",e.prototype.className="playlist",e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.subview("columnsManager",new o({model:this.model,el:this.el})),t.disableSorting||this.subview("sorting",new c({model:this.model,el:this.$(".head")})).render(),this.listenTo(h.player,"change:track",this.markPlayingItem),this.listenTo(h,"select:artist select:album select:track",this.select)},e.prototype.remove=function(){var t;return null!=(t=this.renderer)&&t.remove(),e.__super__.remove.apply(this,arguments)},e.prototype.render=function(t){var e,n,r,i;return t&&(n=this.renderer.getVisibleRange()),null!=(i=this.renderer)&&i.remove(),this.renderer=new l(this.$body,this.collection.getResult()),this.renderer.renderIntial(n),e=this.$(".head-wrap"),r=this.$el.width()-this.$body[0].scrollWidth,e.css("margin-right",r+"px"),this.select(this.model.get("track")),this.subview("columnsManager").render(),delete this.$playing,this.markPlayingItem(),this},e.prototype.renderFresh=function(){return this.render(!1)},e.prototype.renderOnPosition=function(){return this.render(!0)},e.prototype.updatePlayingTrack=function(){},e.prototype.mousedown=function(t){var e,n;return e=$(t.currentTarget),this.selectItem(e),n=this.model.library.get(e.data("track")),this.model.set({track:n})},e.prototype.getDragged=function(){var t;return t=this.$selectedItem.data("track"),[_.findWhere(this.collection.getTracks(),{cid:t})]},e.prototype.select=function(t){var e;if(!t||t.cid!==(null!=(e=this.$selectedItem)?e.data("track"):void 0))return t?this.selectItem(this.getTrackItem(t)):this.selectItem(null)},e.prototype.getTrackItem=function(t){var e;return e=this.$body.find("[data-track='"+t.cid+"']:first"),e.length?e:void 0},e.prototype.handlePlay=function(t){var e,n;return e=$(t.currentTarget),this.selectItem(e),n=e.data("track"),this.play(n)},e.prototype.addItem=function(t,e){return this.renderer.addItem(t,e)},e.prototype.removeItem=function(t,e){return this.renderer.removeItem(t,e)},e.prototype.changeItem=function(t,e){return this.renderer.changeItem(t,e)},e.prototype.markPlayingItem=function(){var t,e,n;return t="playing",e=h.player.get("track"),e&&this.$playing&&e.cid===this.$playing.data("track")||(this.$playing&&(this.$playing.removeClass(t),delete this.$playing),!e)?void 0:(this.$playing=this.getTrackItem(e),null!=(n=this.$playing)?n.addClass(t):void 0)},e}(r),n.exports=a}),require.register("views/page_section_view",function(t,e,n){var r,i,o,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=e("mvc").View,r=function(t){function e(){return o=e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.tagName="section",e.prototype.url=null,e}(i),n.exports=r}),require.register("views/player_view",function(t,e,n){var r,i,o,s,a,u,l,c,p,h,d,f,m,y,g,v,_,b,w,x,k,T,S,C,O,E={}.hasOwnProperty,D=function(t,e){function n(){this.constructor=t}for(var r in e)E.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},N=function(t,e){return function(){return t.apply(e,arguments)}};m=e("pubsub"),h=e("mvc").View,c=e("views/ui/slider_view"),y=e("templates/player"),g=e("templates/player_track"),r=function(t){function e(){return v=e.__super__.constructor.apply(this,arguments)}return D(e,t),e.prototype.events={click:"click"},e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.listenTo(this.model,"change:state",this.render),this.listenTo(this.model.queue,"reset",this.render)},e.prototype.click=function(){return this.enabled()?this.action():void 0},e.prototype.render=function(){return this.activated()?this.$el.removeClass("inactive"):this.$el.addClass("inactive"),this},e.prototype.activated=function(){return this.enabled()},e.prototype.enabled=function(){return!0},e}(h),l=function(t){function e(){return this.action=N(this.action,this),_=e.__super__.constructor.apply(this,arguments)}return D(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.listenTo(this.model,"change:repeat",this.render)},e.prototype.action=function(){return this.model.set("repeat",!this.model.get("repeat"))},e.prototype.activated=function(){return this.model.get("repeat")},e}(r),u=function(t){function e(){return this.action=N(this.action,this),b=e.__super__.constructor.apply(this,arguments)}return D(e,t),e.prototype.action=function(){return this.model.prev()},e.prototype.enabled=function(){return this.model.queue.hasPrev()},e}(r),i=function(t){function e(){return this.action=N(this.action,this),w=e.__super__.constructor.apply(this,arguments)}return D(e,t),e.prototype.action=function(){return this.model.next()},e.prototype.enabled=function(){return this.model.queue.hasNext()},e}(r),o=function(t){function e(){return this.action=N(this.action,this),this.render=N(this.render,this),x=e.__super__.constructor.apply(this,arguments)}return D(e,t),e.prototype.render=function(){return e.__super__.render.call(this),this.model.playing()?this.$el.removeClass("icon-play").addClass("icon-pause"):this.$el.removeClass("icon-pause").addClass("icon-play"),this},e.prototype.action=function(){return this.model.toggle()},e.prototype.enabled=function(){return Boolean(this.model.queue.len())},e}(r),d=function(t){function e(){return k=e.__super__.constructor.apply(this,arguments)}return D(e,t),e.prototype.field="volume",e}(c),f=function(t){function e(){return this.render=N(this.render,this),this.close=N(this.close,this),this.unopen=N(this.unopen,this),this.open=N(this.open,this),T=e.__super__.constructor.apply(this,arguments)}return D(e,t),e.prototype.events={"mouseover .button":"open",mouseout:"unopen"},e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.$popup=this.$(".volume-popup"),this.listenTo(this.model,"change:volume",this.render)},e.prototype.open=function(){return this.$el.removeClass("closed").addClass("open")},e.prototype.unopen=function(t){return this.$el.andSelf().find(t.relatedTarget).length?void 0:(this.$popup.one("transitionend",this.close),this.$el.removeClass("open"))},e.prototype.close=function(){return this.$el.addClass("closed")},e.prototype.render=function(){var t,e,n,r,i,o;return e=["icon-volume-off","icon-volume-down","icon-volume-up"],r=e[0],i=e[1],n=e[2],o=this.model.get("volume"),t=5>o?r:60>o?i:n,console.log("VOLUME:",o,t),this.$(".volume-icon").removeClass(e.join(" ")).addClass(t),this},e}(h),a=function(t){function e(){return S=e.__super__.constructor.apply(this,arguments)}return D(e,t),e.prototype.field="position",e.prototype.initialize=function(t){var n=this;return e.__super__.initialize.call(this,t),this.$loaded=this.$(".loaded"),this.listenTo(this.model,"change:loaded",function(t,e){return n.$loaded.css("width",""+e+"%")})},e}(c),p=function(t){function e(){return this.selectTrack=N(this.selectTrack,this),this.selectAlbum=N(this.selectAlbum,this),this.selectArtist=N(this.selectArtist,this),C=e.__super__.constructor.apply(this,arguments)}return D(e,t),e.prototype.template=g,e.prototype.events={"click .artist":"selectArtist","click .album":"selectAlbum","click .title":"selectTrack"},e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.listenTo(this.model,"change:track",this.render)},e.prototype.getTemplateData=function(){var t;return{track:(null!=(t=this.model.get("track"))?t.toJSON():void 0)||{}}},e.prototype.selectArtist=function(){return m.publish("select:artist",this.model.get("track"))},e.prototype.selectAlbum=function(){return m.publish("select:album",this.model.get("track"))},e.prototype.selectTrack=function(){return m.publish("select:track",this.model.get("track"))},e}(h),s=function(t){function e(){return O=e.__super__.constructor.apply(this,arguments)}return D(e,t),e.prototype.template=y,e.prototype.render=function(){var t,n,r,s;e.__super__.render.apply(this,arguments),s={prev:u,next:i,toggle:o,repeat:l,volume:d,position:a,track:p,"volume-widget":f};for(r in s)t=s[r],n=this.$("."+r),this.subview(r,new t({model:this.model,el:n}).render());return this},e}(h),n.exports=s}),require.register("views/search/search_form_view",function(t,e,n){var r,i,o,s,a,u,l,c,p,h,d,f,m,y,g,v,b,w,x,k,T,S,C,O,E={}.hasOwnProperty,D=function(t,e){function n(){this.constructor=t}for(var r in e)E.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},N=function(t,e){return function(){return t.apply(e,arguments)}};v=e("mvc"),f=v.View,u=v.Model,i=v.Collection,m=e("utils").escapeRegExp,g=e("templates/search/search_suggest"),y=e("pubsub"),a=e("views/ui/focus_context_view"),h=function(t){function e(){return b=e.__super__.constructor.apply(this,arguments)}return D(e,t),e}(u),d=function(t){function e(){return w=e.__super__.constructor.apply(this,arguments)}return D(e,t),e.prototype.model=h,e}(i),c=function(t){function e(){return this.updateSuggestions=N(this.updateSuggestions,this),this.end=N(this.end,this),this.activity=N(this.activity,this),x=e.__super__.constructor.apply(this,arguments)}return D(e,t),e.prototype.events={"focus #q":"activity","keyup #q":"activity"},e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.$q=this.$("input"),this.suggest=new p({el:this.$(".suggest"),model:this.model}),this.suggest.hide()},e.prototype.activity=function(){return this.$el.addClass("active"),this.updateSuggestions($.trim(this.$q.val()))},e.prototype.activity=_.debounce(e.prototype.activity,500),e.prototype.end=function(){return this.$el.removeClass("active"),this.suggest.hide()},e.prototype.updateSuggestions=function(t){return t?(this.suggest.show(),t!==this.prevQuery?(this.prevQuery=t,this.suggest.render(t)):void 0):this.suggest.hide()},e}(f),l=function(t){function e(){return this.matches=N(this.matches,this),k=e.__super__.constructor.apply(this,arguments)}return D(e,t),e.prototype.initialize=function(){var t,e;return t=this.get("value"),this.res=function(){var n,r,i,o;for(i=t.split(/\s+/g),o=[],n=0,r=i.length;r>n;n++)e=i[n],o.push(new RegExp(m(e),"i"));return o}()},e.prototype.matches=function(t){return _.all(this.res,function(e){return e.test(t)})},e.prototype.getTagText=function(){return this.get("value")},e.prototype.filter=function(t){var e,n,r,i;for(i=[],n=0,r=t.length;r>n;n++)e=t[n],this.matches(e)&&i.push(e);return i},e}(u),r=function(t){function e(){return T=e.__super__.constructor.apply(this,arguments)}return D(e,t),e}(f),o=function(t){function e(){return S=e.__super__.constructor.apply(this,arguments)}return D(e,t),e.prototype.className="suggest-collection",e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.artistNames=this.model.library.tracklist.getArtistList(),this.albums=this.model.library.tracklist.getAlbumList(),this.tracks=this.model.library.tracklist},e.prototype.render=function(t){var e,n,r,i,o,s,a,u,l,c,p,h,d,f;for(s=_.map(this.model.library.playlists.models,function(t){return _.pick(t.attributes,"name","id")}),a={id:"playlists",name:"Playlists",items:function(){var e,n,r,i;for(r=this.filterItems(t,3,s,"name"),i=[],e=0,n=r.length;n>e;e++)o=r[e],i.push({type:"collection:playlist",value:o.id,text:o.name});return i}.call(this)},i={id:"artists",name:"Artists",items:function(){var e,n,i,o;for(i=this.filterItems(t,3,this.artistNames.getResult()),o=[],e=0,n=i.length;n>e;e++)r=i[e],o.push({type:"collection:artist",value:r,text:r});return o}.call(this)},n={id:"albums",name:"Albums",items:function(){var n,r,i,o;for(i=this.filterItems(t,3,this.albums.getResult(),"album"),o=[],n=0,r=i.length;r>n;n++)e=i[n],o.push({type:"collection:album",value:e.album,text:e.album,note:"by "+e.artist});return o}.call(this)},p={id:"tracks",name:"Tracks",items:function(){var e,n,r,i;for(r=this.filterItems(t,3,this.tracks.getResult(),"title"),i=[],e=0,n=r.length;n>e;e++)c=r[e],i.push({type:"collection:track",value:c.id,text:c.get("title"),note:"by "+c.get("artist")+" from "+c.get("album")});return i}.call(this)},l={id:"collection",name:"Collection",showAllLabel:"Show All Results",sections:[]},f=[a,i,n,p],h=0,d=f.length;d>h;h++)u=f[h],u.items.length&&(this.collection.add(u.items),l.sections.push(u));return l.sections.length?(this.$el.html(g(l)),this.$el.show(),!0):(this.$el.hide(),!1)},e.prototype.filterItems=function(t,e,n,r){var i,o,s,a,u,c,p;for(null==r&&(r=null),a=new l({value:t}),i=0,s=[],c=0,p=n.length;p>c&&(o=n[c],u=r?o[r]:o,!a.matches(u)||(s.push(o),++i!==e));c++);return s},e}(r),s=function(t){function e(){return this.render=N(this.render,this),C=e.__super__.constructor.apply(this,arguments)}return D(e,t),e.prototype.className="suggest-external",e.prototype.initialize=function(){return this.render=_.debounce(this.render,500)},e.prototype.render=function(t){var e=this;return $.get("/api/search/suggest",{q:t},function(t){var n,r,i,o,s;return i={id:"external",name:"Elsewhere",showAllLabel:"Show All Results",sections:[]},t.artists.length&&(r={id:"artists",type:"external:artist",name:"Artists",items:function(){var e,r,i,o;for(i=t.artists,o=[],e=0,r=i.length;r>e;e++)n=i[e],o.push({id:n.id,text:n.artist,note:n.note});return o}()},e.collection.add(r.items),i.sections.push(r)),t.tracks.length&&(s={id:"tracks",type:"external:track",name:"Tracks",items:function(){var e,n,r,i;for(r=t.tracks,i=[],e=0,n=r.length;n>e;e++)o=r[e],i.push({id:o.id,text:o.title,note:"by "+o.artist});return i}()},e.collection.add(s.items),i.sections.push(s)),i.sections.length?(e.$el.html(g(i)),e.$el.show(),!0):(e.$el.hide(),!1)})},e}(r),p=function(t){function e(){return this.navigateToItem=N(this.navigateToItem,this),this.handleItemClick=N(this.handleItemClick,this),this.hide=N(this.hide,this),O=e.__super__.constructor.apply(this,arguments)}return D(e,t),e.prototype.events={"click .item":"handleItemClick","mouseover .item":"handleItemHover"},e.prototype.initialize=function(t){var n,r;return e.__super__.initialize.call(this,t),this.collection=new d,n=this.subview("collection",new o({model:this.model,collection:this.collection})),r=this.subview("external",new s({model:this.model,collection:this.collection})),this.$el.append(n.el),this.$el.append(r.el)},e.prototype.render=function(t){return this.focus(),t=$.trim(t),t.length>1?_.invoke(this.subviews,"render",t):this.hide()},e.prototype.hide=function(){return this.$el.hide()},e.prototype.show=function(){return this.$el.show()},e.prototype.selectItem=function(t){var e;return null!=(e=this.$selectedItem)&&e.removeClass("selected"),(null!=t?t.length:void 0)?(t.addClass("selected"),this.$selectedItem=t):void 0},e.prototype.selectPrevItem=function(){var t,e;return this.$selectedItem&&(t=this.$(".items"),e=$(t.get(t.index(this.$selectedItem)-1)),e.length)?this.selectedItem(e):void 0},e.prototype.selectNextItem=function(){var t,e;return this.$selectedItem?(t=this.$(".items"),e=$(t.get(t.index(this.$selectedItem)+1)),e.length?this.selectedItem(e):void 0):this.selectItem(this.$(".item:first"))},e.prototype.handleItemHover=function(t){return this.selectItem($(t.currentTarget))},e.prototype.handleItemClick=function(t){var e;return e=$(t.currentTarget),this.navigateToItem(e.data("type"),e.data("item"))},e.prototype.navigateToItem=function(t,e){var n;switch(Backbone.history.navigate("/",!0),t){case"collection:playlist":this.model.library.playlists.selected(this.model.library.playlists.get(e));break;case"collection:artist":y.publish("select:artist",{artist:e});break;case"collection:album":y.publish("select:album",e);break;case"collection:track":n=this.model.library.get(e),y.publish("select:track",n);break;case"external:artist":y.router.navigate("/artist/"+e,!0);break;default:throw"Unknown item "+t}return this.hide()},e}(a),n.exports=c}),require.register("views/search/search_page_view",function(t,e,n){var r,i,o,s,a,u,l={}.hasOwnProperty,c=function(t,e){function n(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=e("mvc").PageView,a=e("templates/search/search_page"),i=e("views/search/search_form_view"),s=e("pubsub"),n.exports=o=function(t){function e(){return u=e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.id="search",e.prototype.template=a,e.prototype.render=function(){return e.__super__.render.apply(this,arguments),this.subview(new i({el:this.$("#search"),model:s.libraryState})).render(),this},e}(r)}),require.register("views/settings/base_settings_section_view",function(t,e,n){var r,i,o,s=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=e("views/page_section_view"),r=function(t){function e(){return this.submit=s(this.submit,this),o=e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.tagName="section",e.prototype.events={"submit form":"submit"},e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.listenTo(this.model,"change",this.render)},e.prototype.getTemplateData=function(){return this.model.attributes},e.prototype.getFormData=function(){var t,e,n,r,i,o,s,a;for(t={},s=this.fieldNames,a=[],i=0,o=s.length;o>i;i++)n=s[i],e=this.$("[name="+n+"]"),r=e.is("[type=checkbox]")?e.is(":checked"):e.val(),a.push(t[n]=r);return a},e.prototype.submit=function(){var t;return t=this.getFormData(),this.model.save(t),!1},e}(i),n.exports=r}),require.register("views/settings/notifications_view",function(t,e,n){var r,i,o,s,a={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=e("views/settings/base_settings_section_view"),o=e("templates/settings/notifications"),i=function(t){function e(){return s=e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.className="notifications",e.prototype.url="notifications",e.prototype.name="Notifications",e.prototype.template=o,e.prototype.fieldNames=["desktop_notifications","confirm_exit"],e.prototype.events={"click input":"submit"},e}(r),n.exports=i}),require.register("views/settings/profile_view",function(t,e,n){var r,i,o,s,a={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=e("views/settings/base_settings_section_view"),o=e("templates/settings/profile"),i=function(t){function e(){return s=e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.name="Profile",e.prototype.className="profile",e.prototype.url="profile",e.prototype.template=o,e.prototype.fieldNames=["username","picture","location","email","name"],e.prototype.events=_.extend({"click .picture img":"selectImage"},r.prototype.events),e.prototype.getTemplateData=function(){var t,n,r,i,o,s,a;for(i=[],a=["facebook","lastfm"],o=0,s=a.length;s>o;o++)n=a[o],r=this.model.get(n),r?i.push({id:n,connected:!0,name:r.name,picture:r.picture,selected:r.picture===this.model.get("picture")}):i.push({id:n,connected:!1,name:n,picture:null,selected:!1});return t=e.__super__.getTemplateData.apply(this,arguments),t.services=i,t},e.prototype.selectImage=function(t){var e;return e=$(t.currentTarget),this.$(".picture img").removeClass("selected"),e.addClass("selected"),this.model.save("picture",e.attr("src"))},e}(r),n.exports=i}),require.register("views/settings/settings_page_view",function(t,e,n){var r,i,o,s,a,u,l,c={}.hasOwnProperty,p=function(t,e){function n(){this.constructor=t}for(var r in e)c.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};u=e("pubsub"),r=e("views/base_content_page_view"),o=e("views/settings/profile_view"),a=e("views/settings/social_view"),i=e("views/settings/notifications_view"),s=function(t){function e(){return l=e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.id="settings",e.prototype.pageName="Settings",e.prototype.pageURL="settings",e.prototype.sections=[o,a,i],e.prototype.render=function(){return e.__super__.render.apply(this,arguments),this.renderSection()},e.prototype.getTemplateData=function(){return _.extend(e.__super__.getTemplateData.apply(this,arguments),{user:this.model})},e}(r),n.exports=s}),require.register("views/settings/social_view",function(t,e,n){var r,i,o,s,a={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=e("views/settings/base_settings_section_view"),o=e("templates/settings/social"),i=function(t){function e(){return s=e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.className="social",e.prototype.url="social",e.prototype.name="Social",e.prototype.template=o,e.prototype.events={"click .connect":"connectService","click .remove":"removeService"},e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.listenTo(this.model,"change:facebook change:lastfm change:dropbox",this.render)},e.prototype.connectService=function(t){var e,n,r,i;return i=650,e=350,n=screen.width/2-i/2,r=screen.height/2-e/2,window.open(t.currentTarget.href,"_blank","width="+i+", height="+e+", left="+n+", top="+r),!1},e.prototype.removeService=function(t){return $.ajax({url:t.currentTarget.href,type:"DELETE"}),!1},e}(r),n.exports=i}),require.register("views/sidebars/base",function(t,e,n){var r,i,o,s=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=e("mvc").View,r=function(t){function e(){return this.setDimensions=s(this.setDimensions,this),o=e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.listenTo(this.model,"change:width",this.setDimensions),$(window).on("resize",this.setDimensions),this.setDimensions()},e.prototype.setDimensions=function(){var t;return t=this.model.get("width"),this.$el.width(t)},e}(i),n.exports=r}),require.register("views/sidebars/info_sidebar_view",function(t,e,n){var r,i,o,s,a=function(t,e){return function(){return t.apply(e,arguments)}},u={}.hasOwnProperty,l=function(t,e){function n(){this.constructor=t}for(var r in e)u.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};o=e("mvc").View,r=e("views/sidebars/base"),i=function(t){function e(){return this.setDimensions=a(this.setDimensions,this),s=e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t)},e.prototype.setDimensions=function(){var t;return e.__super__.setDimensions.apply(this,arguments),t=this.model.get("width"),this.$("#medium").height(t)},e}(r),n.exports=i}),require.register("views/sidebars/nav_sidebar_view",function(t,e,n){var r,i,o,s,a,u,l,c,p,h,d,f,m,y,g,v,b,w,x,k,T,S,C,O,E,D,N,P,I,A,L,M,$,R,j,q,F,H,z,B,W=function(t,e){return function(){return t.apply(e,arguments)}},V={}.hasOwnProperty,U=function(t,e){function n(){this.constructor=t}for(var r in e)V.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};c=e("views/ui/focus_context_view"),w=e("mvc").View,O=e("pubsub"),N=e("source_ids"),s=N.DROPBOX,x=N.YOUTUBE,u=e("views/ui/dnd").DroppableView,g=e("models/lists/playlists").UserPlaylist,S=e("templates/sidebars/youtube_add_dialog"),C=e("templates/sidebars/item"),D=e("templates/sidebars/user"),i=e("views/sidebars/base"),E=io.connect("http:///sync"),T=function(t){function e(){return this.submit=W(this.submit,this),this.prevent=W(this.prevent,this),P=e.__super__.constructor.apply(this,arguments)}return U(e,t),e.prototype.className="dialog modal",e.prototype.template=S,e.prototype.container="body",e.prototype.events={click:"remove","click button":"submit","click .body":"prevent"},e.prototype.prevent=function(){return!1},e.prototype.submit=function(){var t,e;return t=this.$("input"),e=t.val(),e?(this.remove(),E.emit("add_url",{url:e})):t.focus(),!1},e}(w),y=function(t){function e(){return $=e.__super__.constructor.apply(this,arguments)}return U(e,t),e.prototype.tagName="li",e.prototype.className="item",e.prototype.template=C,e.prototype.events={mousedown:"activate","mousedown .button":"buttonClicked"},e.prototype.activate=function(){return O.router.navigate(this.$("a").attr("href"),{trigger:!0})},e}(w),l=function(t){function e(){return this.render=W(this.render,this),R=e.__super__.constructor.apply(this,arguments)}return U(e,t),e.prototype.initialize=function(){var t=this;return e.__super__.initialize.apply(this,arguments),this.listenTo(O.router,"route",this.render),this.listenTo(O.user.library.playlists,"change:selected",function(){return t.$el.removeClass("selected")})},e.prototype.render=function(){return e.__super__.render.apply(this,arguments),_.contains(["","trending"],Backbone.history.fragment)&&this.$el.addClass("selected"),this},e.prototype.getTemplateData=function(){return{url:"/",icon:"compass",name:"Explore",button:null}},e}(y),m=function(t){function e(){return j=e.__super__.constructor.apply(this,arguments)}return U(e,t),e.prototype.getTemplateData=function(){return{url:"/search",icon:"search",name:"Search",button:null}},e}(y),d=function(t){function e(){return this.render=W(this.render,this),q=e.__super__.constructor.apply(this,arguments)}return U(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.model.acceptsTracks()?this.subview("droppable",new u({delegate:this,el:this.el})):void 0},e.prototype.render=function(){return e.__super__.render.apply(this,arguments),this.setClasses(),this},e.prototype.getTemplateData=function(){return{url:this.model.getRoute(),icon:this.model.get("icon"),name:this.model.get("name")}},e.prototype.setClasses=function(){return this.model.get("selected")?this.$el.addClass("selected"):this.$el.removeClass("selected"),this.model.acceptsTracks()?this.$el.addClass("accepts-tracks"):void 0
},e.prototype.drop=function(t){if(console.log("tracksDropped",this,t),!this.model.acceptsTracks())throw"!";return this.model.addTracks(t)},e}(y),f=function(t){function e(){return F=e.__super__.constructor.apply(this,arguments)}return U(e,t),e.prototype.render=function(){return e.__super__.render.apply(this,arguments),this.setClasses(),this},e}(d),k=function(t){function e(){return this.render=W(this.render,this),this.buttonClicked=W(this.buttonClicked,this),H=e.__super__.constructor.apply(this,arguments)}return U(e,t),e.prototype.buttonClicked=function(){return(new T).render()},e.prototype.getTemplateData=function(){var t;return t=e.__super__.getTemplateData.apply(this,arguments),t.icon="youtube",t.button={title:"Add YouTube song",className:"add",icon:"plus-sign"},t},e.prototype.render=function(){return e.__super__.render.apply(this,arguments)},e}(d),r=function(t){function e(){return z=e.__super__.constructor.apply(this,arguments)}return U(e,t),e}(d),a=function(t){function e(){return this.startSync=W(this.startSync,this),this.buttonClicked=W(this.buttonClicked,this),B=e.__super__.constructor.apply(this,arguments)}return U(e,t),e.prototype.getTemplateData=function(){var t;return t=e.__super__.getTemplateData.apply(this,arguments),t.button={title:"Sync Dropbox",className:"sync",icon:"refresh"},t},e.prototype.buttonClicked=function(){return O.user.has("dropbox")?this.startSync():O.router.navigate("settings/social",{trigger:!0,replace:!0})},e.prototype.startSync=function(){return E.emit("dropbox")},e}(d),b={},b.queue=f,b.all=r,b.dropbox=a,b.youtube=k,p=function(t){function e(){return this.selectPrevItem=W(this.selectPrevItem,this),this.selectNextItem=W(this.selectNextItem,this),this.selectedViewIndex=W(this.selectedViewIndex,this),this.render=W(this.render,this),I=e.__super__.constructor.apply(this,arguments)}return U(e,t),e.prototype.initialize=function(t){var n=this;return e.__super__.initialize.call(this,t),this.listenTo(this.collection,"reset add remove change",this.render),this.listenTo(O.router,"route"),this.listenTo(O.router,"route",function(){return _.contains(["","trending"],Backbone.history.fragment)?this.$(".item:not(.explore)").removeClass("selected"):void 0}),this.$add=this.$(".add"),this.$builtInPlaylists=this.$("ul.builtin-playlists"),this.$userPlaylists=this.$("ul.user-playlists"),this.$exploreList=this.$("section.explore ul"),this.$exploreList.append(this.subview("explore-item",new l).render().el),this.$exploreList.append(this.subview("search-item",new m).render().el),this.collection.each(function(t){var e;return t instanceof g?void 0:"queue"===t.id?n.$exploreList.append(n.subview("queue",new f({model:t}).render()).el):(w=b[t.id],e=n.subview("builtin-playlist-"+t.id,new w({model:t})).render(),n.$builtInPlaylists.append(e.el))})},e.prototype.render=function(){var t,e,n,r,i=this;for(r=this.subviews,e=0,n=r.length;n>e;e++)t=r[e],t.model instanceof g?t.remove():t.render();return this.collection.each(function(t){var e;return t instanceof g?(e=i.subview("user-playlist-"+t.id,new d({model:t})),i.$userPlaylists.append(e.render().el)):void 0})},e.prototype.selectedViewIndex=function(){var t;return console.log(this.subviews.length,_.keys(this.subviewsByName)),t=_.indexOf(this.subviews,_.find(this.subviews,function(t){return t.$el.is(".selected")})),console.log("selectedViewIndex",t),t},e.prototype.selectNextItem=function(){var t;return t=this.selectedViewIndex(),t<this.subviews.length-1?this.subviews[t+1].activate():void 0},e.prototype.selectPrevItem=function(){var t;return t=this.selectedViewIndex(),t>0?this.subviews[t-1].activate():void 0},e}(c),o=function(t){function e(){return A=e.__super__.constructor.apply(this,arguments)}return U(e,t),e.prototype.events={click:"click"},e.prototype.click=function(){return this.openDialog()},e.prototype.openDialog=function(t){var e;return(e=window.prompt("New Playlist Name:"))?O.user.library.playlists.create({name:e},{success:function(e){return O.user.library.playlists.selected(e),t?e.addTracks(t):void 0}}):void 0},e.prototype.drop=function(t){return this.openDialog(t)},e}(u),v=function(t){function e(){return this.toggleMenu=W(this.toggleMenu,this),this.setMenuPos=W(this.setMenuPos,this),L=e.__super__.constructor.apply(this,arguments)}return U(e,t),e.prototype.className="user",e.prototype.template=D,e.prototype.container="#header",e.prototype.events={"click img":"toggleMenu","click li":"toggleMenu"},e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.isOpen=!1,this.listenTo(this.model,"change reset",this.render)},e.prototype.render=function(){return e.__super__.render.apply(this,arguments),this.$menu=this.$(".menu"),this.setMenuPos(),this},e.prototype.setMenuPos=function(){var t;return t=this.isOpen?""+(this.$el.height()+1)+"px":""+(this.$el.height()-this.$menu.height())+"px",this.$menu.css("top",t)},e.prototype.toggleMenu=function(){return this.isOpen=!this.isOpen,this.setMenuPos()},e}(w),h=function(t){function e(){return M=e.__super__.constructor.apply(this,arguments)}return U(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.subview("items",new p({collection:O.user.library.playlists,el:this.$el})).render(),this.subview("create-playlist",new o({el:this.$el.find(".create-playlist")})),this.subview("user",new v({model:O.user,el:this.$(".profile")})).render()},e}(i),n.exports=h}),require.register("views/ui/dnd",function(t,e,n){var r,i,o,s,a,u,l,c={}.hasOwnProperty,p=function(t,e){function n(){this.constructor=t}for(var r in e)c.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},h=function(t,e){return function(){return t.apply(e,arguments)}};r=e("jquery"),s=e("mvc").View,a=e("pubsub"),i=function(t){function e(){return u=e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.events={},e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),t.draggableSelector||this.$el.attr("draggable","true"),this.events["dragstart "+(t.draggableSelector||"")]="_dragstart",this.delegateEvents()},e.prototype.getDragged=function(t){return this.options.delegate.getDragged(t)},e.prototype._dragstart=function(t){var e;return e=this.getDragged(t),console.log("dragstart",e),a._dragged=e},e}(s),o=function(t){function e(){return this.drop=h(this.drop,this),l=e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.events={},e.prototype.initialize=function(t){var n,r,i,o;if(e.__super__.initialize.call(this,t),n={dragover:"_dragover",dragenter:"_dragenter",dragleave:"_dragleave",drop:"_drop"},t.droppableSelector){i={};for(r in n)o=n[r],i[""+r+" "+t.droppableSelector]=o;n=i}return _.extend(this.events,n),this.delegateEvents()},e.prototype.drop=function(t,e){return this.options.delegate.drop(t,e)},e.prototype.draghover=function(t){var e;return r(t.currentTarget).addClass("draghover"),null!=(e=this.options.delegate)?"function"==typeof e.draghover?e.draghover(t):void 0:void 0},e.prototype.dragleave=function(t){var e;return r(t.currentTarget).removeClass("draghover"),null!=(e=this.options.delegate)?"function"==typeof e.dragleave?e.dragleave(t):void 0:void 0},e.prototype._dragover=function(t){return this.draghover(t),!1},e.prototype._dragenter=function(t){return this.draghover(t),!1},e.prototype._dragleave=function(t){return this.dragleave(t),!1},e.prototype._drop=function(t){var e,n=this;return console.log("_drop",t),e=a._dragged,a._dragged=null,e.getDragged&&(e=e.getDragged()),r.when(e).then(function(e){return n.drop(e,t),n.dragleave(t)}),!1},e}(s),n.exports={DraggableView:i,DroppableView:o}}),require.register("views/ui/focus_context_view",function(t,e,n){var r,i,o,s,a,u,l,c,p=function(t,e){return function(){return t.apply(e,arguments)}},h={}.hasOwnProperty,d=function(t,e){function n(){this.constructor=t}for(var r in e)h.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};a=e("mvc").View,l=e("pubsub"),o=9,s=38,i=40,u=function(t){var e,n,i;return e=_.indexOf(r.instances,r.focused),n=r.instances.length-1,i=t.shiftKey?0>=e?n:e-1:e===n?0:e+1,$(":focus").blur(),l.publish("focuscontext:focus",r.instances[i]),!1},$(document).on("keydown",function(t){var e,n;switch(t.keyCode){case o:u(t);break;case s:null!=(e=r.focused)&&e.selectPrevItem();break;case i:null!=(n=r.focused)&&n.selectNextItem();break;default:return!0}return t.preventDefault(),!1}),n.exports=r=function(t){function e(){return this.selectPrevItem=p(this.selectPrevItem,this),this.selectNextItem=p(this.selectNextItem,this),this.remove=p(this.remove,this),this.isFocused=p(this.isFocused,this),this.blur=p(this.blur,this),this.focus=p(this.focus,this),c=e.__super__.constructor.apply(this,arguments)}return d(e,t),e.instances=[],e.focused=null,e.prototype.initialize=function(t){var n=this;return e.__super__.initialize.call(this,t),e.instances.push(this),this.$el.addClass("focuscontext"),this.$el.on("mousedown",function(){return l.publish("focuscontext:focus",n)}),this.listenTo(l,"focuscontext:focus",function(t){return t===n?n.focus():n.blur()})},e.prototype.focus=function(){return e.focused=this,this.$el.addClass("focused")},e.prototype.blur=function(){return this.$el.removeClass("focused")},e.prototype.isFocused=function(){return this.$el.hasClass("focused")},e.prototype.remove=function(){return e.instances=_.without(e.instances,this),this.isFocused()&&(e.focused=null),e.__super__.remove.call(this)},e.prototype.selectNextItem=function(){throw"selectNextItem not implemented"},e.prototype.selectPrevItem=function(){throw"selectPrevItem not implemented"},e}(a)}),require.register("views/ui/lazy_renderer",function(t,e,n){var r,i,o,s=function(t,e){return function(){return t.apply(e,arguments)}};r=e("backbone"),o=function(){function t(t,e){this.start=t,this.end=e}return t.prototype.iter=function(){return _.range(this.start,this.end)},t.prototype.toString=function(){return"[Range start="+this.start+" end="+this.end+"]"},t}(),n.exports=i=function(){function t(t,e){this.viewport=t,this.collection=e,this.update=s(this.update,this),this.disengage=s(this.disengage,this),this.rowHeight=25,this.initial=100,this.extra=50,this.map=new Array(this.collection.length),this.rendered=0,this.update.debounced=_.debounce(this.update,200),this.viewport.on("scroll",this.update.debounced),$(window).on("resize",this.update.debounced)}return _.extend(t.prototype,r.Events),t.prototype.remove=function(){return this.viewport.html(""),this.disengage()},t.prototype.disengage=function(){return this.viewport.off("scroll",this.update.debounced),$(window).off("resize",this.update.debounced)},t.prototype.renderIntial=function(t){return t||(t=new o(0,Math.min(this.collection.length,this.initial))),this.collection.length?this.render(t):void 0},t.prototype.getVisibleRange=function(){var t,e;return t=Math.floor(this.viewport.scrollTop()/this.rowHeight),e=Math.ceil(this.viewport.outerHeight()/this.rowHeight),new o(t,Math.min(this.collection.length,t+e))},t.prototype.update=function(){var t,e;return e=this.getVisibleRange(),t=new o(Math.max(0,e.start-this.extra),Math.min(this.collection.length,e.end+this.extra)),this.ensureRendered(t)},t.prototype.ensureRendered=function(t){var e,n,r,i;for(n=this.getUnrenderedRanges(t),r=0,i=n.length;i>r;r++)e=n[r],this.render(e);return n.length?this.trigger("update"):void 0},t.prototype.getUnrenderedRanges=function(t){var e,n,r,i,s,a;for(r=null,n=[],a=t.iter(),i=0,s=a.length;s>i;i++)e=a[i],this.map[e]?r&&(n.push(r),r=null):r?r.end+=1:r=new o(e,e+1);return r&&n.push(r),n},t.prototype.render=function(t){var e,n,r,i,o,s,a,u,l,c,p;for(p=t.iter(),l=0,c=p.length;c>l;l++)r=p[l],this.map[r]=1,this.rendered++;return e=$(this.makeTable(t)),n=this.getGaps(t),this.rendered===this.collection.length&&this.disengage(),t.start>0&&(s=t.start-n.before,u=".item[data-track="+this.collection[s-1].cid+"]:first",a=this.viewport.find(u).parents("table:first"),a.css("margin-bottom",""),n.before&&e.css("margin-top",""+this.px(n.before)+"px")),o=t.end+n.after,o!==this.collection.length&&(u=".item[data-track="+this.collection[o].cid+"]:first",i=this.viewport.find(u).parents("table:first"),i.css("margin-top","")),n.after&&e.css("margin-bottom",""+this.px(n.after)+"px"),0!==t.start&&(null!=a?a.length:void 0)?a.after(e):this.viewport.prepend(e)},t.prototype.validate=function(){var t,e,n;return e=this.px(this.collection.length),t=this.viewport[0].scrollHeight,t>this.viewport.height()?void 0:(n="expected="+e+" actual="+t+" "+("expected == actual: "+(e===t)),e!==t?console.warn("invalid state: "+n):void 0)},t.prototype.getGaps=function(t){var e,n,r;for(n=0,e=0,r=t.start;--r>=0&&!this.map[r];)n++;for(r=t.end;!this.map[r]&&++r<=this.collection.length;)e++;return{before:n,after:e}},t.prototype.px=function(t){return t*this.rowHeight},t.prototype.makeTable=function(){throw""+this+": makeTable() not implemented"},t.prototype.addItem=function(t,e){var n,r,i,o,s,a;return this.map.splice(e,0,null),a=this.getVisibleRange(),this.map[e+1]?(i=$(this.makeRow(t)),o=this.collection[e+1],n=this.viewport.find(".item[data-track='"+o.cid+"']:first"),$(i).insertBefore(n),++this.rendered,this.map[e]=1):this.map[e-1]?(s=this.collection[e-1],r=this.viewport.find(".item[data-track='"+s.cid+"']:first"),i=$(this.makeRow(t)),$(i).insertAfter(r),this.map[e]=1,++this.rendered,this.viewport.scrollTop(this.viewport.scrollTop()+this.rowHeight)):a.start<=e&&e<=a.end?this.update():void 0},t.prototype.removeItem=function(t,e){var n,r;return r=this.map[e],this.map.splice(e,1),r&&(n=this.viewport.find(".item[data-track='"+t.cid+"']:first"),n.remove(),--this.rendered),this.trigger("update")},t.prototype.changeItem=function(){},t}()}),require.register("views/ui/menu_view",function(t,e,n){var r,i,o,s,a,u={}.hasOwnProperty,l=function(t,e){function n(){this.constructor=t}for(var r in e)u.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};o=e("mvc").View,s=e("templates/ui/menu_item"),r=function(t){function e(t){this.action=t.action,this.action.url&&(this.tagName="a",this.attributes={href:this.action.url}),e.__super__.constructor.call(this,t)}return l(e,t),e.prototype.className="item",e.prototype.template=s,e.prototype.events={click:"click"},e.prototype.click=function(){var t;return console.log("CLICKED",this),"function"==typeof(t=this.action).callback?t.callback():void 0},e.prototype.getTemplateData=function(){return this.action},e}(o),n.exports=i=function(t){function e(){return a=e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.actions=t.actions,t},e.prototype.render=function(){var t,e,n,i;i=this.actions;for(e in i)t=i[e],t=_.extend({id:e},t),n=this.subview(new r({action:t})),this.$el.append(n.render().el);return this},e.fromMouseEvent=function(t,n){var r,i;return t.stopPropagation(),i=new e(n).render(),r=$("#menu"),r.append(i.el).css({top:t.clientY+10,left:t.clientX-r.width()/2}).show().addClass("open"),$(document).one("click",function(){return console.log("REMOVEING"),r.removeClass("open"),r.one("transitionend",function(){return i.remove(),r.hide()})}),i},e}(o)}),require.register("views/ui/resizer_views",function(t,e,n){var r,i,o,s,a,u,l,c,p,h=function(t,e){return function(){return t.apply(e,arguments)}},d={}.hasOwnProperty,f=function(t,e){function n(){this.constructor=t}for(var r in e)d.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};a=e("mvc").View,i=function(t){function e(){return this.finish=h(this.finish,this),this.move=h(this.move,this),this.start=h(this.start,this),u=e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.dimension=null,e.prototype.cssProperty=null,e.prototype.eventProperty=null,e.prototype.events={mousedown:"start"},e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.$context=t.context,this.value=t.value,this.relative=t.relative,this.render()},e.prototype.start=function(t){return this.$el.addClass("active"),this.saveEventValue(t),$(window).on("mousemove",this.move),$(window).on("mouseup",this.finish),!1},e.prototype.move=function(t){var e,n,r,i,o;return r=this.eventValue,this.saveEventValue(t),o=this.getLimits(),n=o[0],e=o[1],i=this.getCurrentAbsoluteValue()-(r-this.eventValue),n>i?i=n:i>e&&(i=e),this.$el.css(this.cssProperty,i+"px")},e.prototype.finish=function(t){return this.saveEventValue(t),this.$el.removeClass("active"),$(window).off("mousemove",this.move),$(window).off("mouseup",this.finish),this.commit(),this.eventValue=null},e.prototype.commit=function(){return this.value=this.relative?100*(this.getCurrentAbsoluteValue()/this.getContextSize()):this.getCurrentAbsoluteValue(),this.render(),this.trigger("resize",this.value)},e.prototype.getCSSValue=function(){return this.value+(this.relative?"%":"px")},e.prototype.getLimits=function(){var t,e;return e=null!=this.options.min?this.options.min:0,t=this.options.max?this.options.max<0?this.getContextSize()+this.options.max:this.options.max:this.getContextSize(),[e,t]},e.prototype.getContextSize=function(){return this.$context[this.dimension]()},e.prototype.saveEventValue=function(t){return this.eventValue=t[this.eventProperty]},e.prototype.render=function(){return this.$el.css(this.cssProperty,this.getCSSValue()),this},e.prototype.getCurrentAbsoluteValue=function(){return parseInt(this.$el.css(this.cssProperty),10)},e}(a),r=function(t){function e(){return l=e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.eventProperty="pageX",e.prototype.cssProperty="left",e.prototype.dimension="width",e}(i),o=function(t){function e(){return this.saveEventValue=h(this.saveEventValue,this),c=e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.eventProperty=null,e.prototype.cssProperty="right",e.prototype.dimension="width",e.prototype.saveEventValue=function(t){return this.eventValue=Math.abs(t.pageX-this.getContextSize())},e}(i),s=function(t){function e(){return p=e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.eventProperty="pageY",e.prototype.cssProperty="top",e.prototype.dimension="height",e}(i),n.exports={ColumnResizer:r,RightBoundColumnResizer:o,RowResizer:s}}),require.register("views/ui/slider_view",function(t,e,n){var r,i,o,s=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=e("mvc").View,n.exports=r=function(t){function e(){return this.finish=s(this.finish,this),this.move=s(this.move,this),this.start=s(this.start,this),this.render=s(this.render,this),o=e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.events={mousedown:"start"},e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.$pos=this.$(".pos"),this.$elapsed=this.$(".elapsed"),this.listenTo(this.model,"change:"+this.field,this.render)},e.prototype.render=function(){var t;return t=this.positionFromValue(),this.$pos.css("left",""+t+"px"),this.$elapsed.css("width",""+(t+4)+"px"),this},e.prototype.getBounds=function(){var t,e,n,r;return r=this.$el.width(),n=this.$pos.width(),e=0,t=r-n,{min:e,max:t,positionWidth:n}},e.prototype.positionFromValue=function(){var t,e,n;return n=this.getBounds(),e=n.min,t=n.max,(t-e)/100*this.model[this.field]()},e.prototype.valueFromPosition=function(){var t,e,n,r;return n=parseInt(this.$pos.css("left"),10),r=this.getBounds(),e=r.min,t=r.max,Math.round(100*(n/(t-e)))},e.prototype.start=function(t){return this.$el.addClass("active"),$(window).on("mousemove",this.move),$(window).on("mouseup",this.finish),this.move(t),!1},e.prototype.positionFromEvent=function(t){var e,n,r,i,o,s;return e=this.$el.offset().left,s=this.getBounds(),r=s.min,n=s.max,o=s.positionWidth,i=t.pageX-o/2,Math.max(r,Math.min(n,i-r-e))},e.prototype.move=function(t){var e;return e=this.positionFromEvent(t),this.$pos.css("left",""+e+"px"),this.$elapsed.css("width",""+(e+4)+"px"),this.setValue()},e.prototype.setValue=function(){var t;return t=this.valueFromPosition(),this.model[this.field](t)},e.prototype.finish=function(){return this.$el.removeClass("active"),$(window).off("mousemove",this.move),$(window).off("mouseup",this.finish),this.setValue()},e}(i)});
